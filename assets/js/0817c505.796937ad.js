"use strict";(self.webpackChunkkuberocketci_docs=self.webpackChunkkuberocketci_docs||[]).push([[98734],{28453:(e,t,n)=>{n.d(t,{R:()=>s,x:()=>r});var o=n(96540);const a={},i=o.createContext(a);function s(e){const t=o.useContext(i);return o.useMemo(function(){return"function"==typeof e?e(t):{...t,...e}},[t,e])}function r(e){let t;return t=e.disableParentContext?"function"==typeof e.components?e.components(a):e.components||a:s(e.components),o.createElement(i.Provider,{value:t},e.children)}},32209:(e,t,n)=>{n.r(t),n.d(t,{assets:()=>c,contentTitle:()=>r,default:()=>p,frontMatter:()=>s,metadata:()=>o,toc:()=>l});const o=JSON.parse('{"id":"how-to/devops/determine-default-namespace-first-login","title":"How Does KubeRocketCI Determine the Default Namespace on First Login?","description":"On the very first login to the platform, KubeRocketCI will attempt to automatically define both default and allowed namespace. The platform follows a specific priority order to determine which namespace to use.","source":"@site/faq/how-to/devops/determine-default-namespace-first-login.md","sourceDirName":"how-to/devops","slug":"/how-to/devops/determine-default-namespace-first-login","permalink":"/faq/how-to/devops/determine-default-namespace-first-login","draft":false,"unlisted":false,"tags":[],"version":"current","frontMatter":{}}');var a=n(74848),i=n(28453);const s={},r="How Does KubeRocketCI Determine the Default Namespace on First Login?",c={},l=[{value:"1. Deployment Namespace",id:"1-deployment-namespace",level:2},{value:"2. Keycloak Configuration",id:"2-keycloak-configuration",level:2},{value:"3. Manual Setting",id:"3-manual-setting",level:2}];function d(e){const t={a:"a",code:"code",h1:"h1",h2:"h2",header:"header",img:"img",p:"p",pre:"pre",strong:"strong",...(0,i.R)(),...e.components},{Head:o}=t;return o||function(e,t){throw new Error("Expected "+(t?"component":"object")+" `"+e+"` to be defined: you likely forgot to import, pass, or provide it.")}("Head",!0),(0,a.jsxs)(a.Fragment,{children:[(0,a.jsx)(t.header,{children:(0,a.jsx)(t.h1,{id:"how-does-kuberocketci-determine-the-default-namespace-on-first-login",children:"How Does KubeRocketCI Determine the Default Namespace on First Login?"})}),"\n",(0,a.jsx)(o,{children:(0,a.jsx)("link",{rel:"canonical",href:"https://docs.kuberocketci.io/faq/how-to/devops/determine-default-namespace-first-login"})}),"\n",(0,a.jsx)(t.p,{children:"On the very first login to the platform, KubeRocketCI will attempt to automatically define both default and allowed namespace. The platform follows a specific priority order to determine which namespace to use."}),"\n",(0,a.jsx)(t.h2,{id:"1-deployment-namespace",children:"1. Deployment Namespace"}),"\n",(0,a.jsxs)(t.p,{children:["When installing KubeRocketCI, the platform writes the target namespace into the ",(0,a.jsx)(t.code,{children:"DEFAULT_NAMESPACE"})," parameter of the ",(0,a.jsx)(t.strong,{children:"portal"})," deployment:"]}),"\n",(0,a.jsx)(t.pre,{children:(0,a.jsx)(t.code,{className:"language-bash",children:"- name: DEFAULT_NAMESPACE\n  valueFrom:\n    fieldRef:\n      apiVersion: v1\n      fieldPath: metadata.namespace\n"})}),"\n",(0,a.jsx)(t.p,{children:"This is the first place the platform checks the namespace to pre-populate it in the KubeRocketCI portal."}),"\n",(0,a.jsx)(t.h2,{id:"2-keycloak-configuration",children:"2. Keycloak Configuration"}),"\n",(0,a.jsxs)(t.p,{children:["If the ",(0,a.jsx)(t.code,{children:"DEFAULT_NAMESPACE"})," parameter is empty for some reason, the platform will try to get the default namespace from the Keycloak attribute."]}),"\n",(0,a.jsxs)(t.p,{children:["If Keycloak is configured and integrated to the platform, the KubeRocketCI portal receives a Keycloak token that contains the namespace specified in the ",(0,a.jsx)(t.strong,{children:"default_namespace"})," attribute:"]}),"\n",(0,a.jsx)(t.p,{children:(0,a.jsx)(t.img,{alt:"Keycloak user attributes",src:n(77071).A+"",title:"Keycloak user attributes",width:"927",height:"712"})}),"\n",(0,a.jsxs)(t.p,{children:["When the ",(0,a.jsx)(t.code,{children:"DEFAULT_NAMESPACE"})," parameter is not empty, you are expected to see the namespace in this user attribute. Redefining the Keycloak user attribute doesn't overwrite the default namespace in the portal. This method works only if the ",(0,a.jsx)(t.code,{children:"DEFAULT_NAMESPACE"})," parameter is not defined from the beginning."]}),"\n",(0,a.jsx)(t.h2,{id:"3-manual-setting",children:"3. Manual Setting"}),"\n",(0,a.jsxs)(t.p,{children:["If both deployment and Keycloak configuration are empty or missing, there will be no namespace specified in the portal. The only available option left is to set namespaces manually. Refer to the ",(0,a.jsx)(t.a,{href:"/docs/user-guide/portal-settings#cluster",children:"Portal Settings"})," page for more details on cluster settings."]})]})}function p(e={}){const{wrapper:t}={...(0,i.R)(),...e.components};return t?(0,a.jsx)(t,{...e,children:(0,a.jsx)(d,{...e})}):d(e)}},77071:(e,t,n)=>{n.d(t,{A:()=>o});const o=n.p+"assets/images/keycloak-user-default-namespace-7ce71e35065eb19e94bdd91e984390d2.png"}}]);