"use strict";(self.webpackChunkkuberocketci_docs=self.webpackChunkkuberocketci_docs||[]).push([[73217],{11470:(e,t,i)=>{i.d(t,{A:()=>w});var s=i(96540),n=i(34164),r=i(23104),a=i(56347),o=i(205),l=i(57485),d=i(31682),c=i(70679);function u(e){return s.Children.toArray(e).filter(e=>"\n"!==e).map(e=>{if(!e||(0,s.isValidElement)(e)&&function(e){const{props:t}=e;return!!t&&"object"==typeof t&&"value"in t}(e))return e;throw new Error(`Docusaurus error: Bad <Tabs> child <${"string"==typeof e.type?e.type:e.type.name}>: all children of the <Tabs> component should be <TabItem>, and every <TabItem> should have a unique "value" prop.`)})?.filter(Boolean)??[]}function h(e){const{values:t,children:i}=e;return(0,s.useMemo)(()=>{const e=t??function(e){return u(e).map(({props:{value:e,label:t,attributes:i,default:s}})=>({value:e,label:t,attributes:i,default:s}))}(i);return function(e){const t=(0,d.XI)(e,(e,t)=>e.value===t.value);if(t.length>0)throw new Error(`Docusaurus error: Duplicate values "${t.map(e=>e.value).join(", ")}" found in <Tabs>. Every value needs to be unique.`)}(e),e},[t,i])}function p({value:e,tabValues:t}){return t.some(t=>t.value===e)}function m({queryString:e=!1,groupId:t}){const i=(0,a.W6)(),n=function({queryString:e=!1,groupId:t}){if("string"==typeof e)return e;if(!1===e)return null;if(!0===e&&!t)throw new Error('Docusaurus error: The <Tabs> component groupId prop is required if queryString=true, because this value is used as the search param name. You can also provide an explicit value such as queryString="my-search-param".');return t??null}({queryString:e,groupId:t});return[(0,l.aZ)(n),(0,s.useCallback)(e=>{if(!n)return;const t=new URLSearchParams(i.location.search);t.set(n,e),i.replace({...i.location,search:t.toString()})},[n,i])]}function g(e){const{defaultValue:t,queryString:i=!1,groupId:n}=e,r=h(e),[a,l]=(0,s.useState)(()=>function({defaultValue:e,tabValues:t}){if(0===t.length)throw new Error("Docusaurus error: the <Tabs> component requires at least one <TabItem> children component");if(e){if(!p({value:e,tabValues:t}))throw new Error(`Docusaurus error: The <Tabs> has a defaultValue "${e}" but none of its children has the corresponding value. Available values are: ${t.map(e=>e.value).join(", ")}. If you intend to show no default tab, use defaultValue={null} instead.`);return e}const i=t.find(e=>e.default)??t[0];if(!i)throw new Error("Unexpected error: 0 tabValues");return i.value}({defaultValue:t,tabValues:r})),[d,u]=m({queryString:i,groupId:n}),[g,f]=function({groupId:e}){const t=function(e){return e?`docusaurus.tab.${e}`:null}(e),[i,n]=(0,c.Dv)(t);return[i,(0,s.useCallback)(e=>{t&&n.set(e)},[t,n])]}({groupId:n}),x=(()=>{const e=d??g;return p({value:e,tabValues:r})?e:null})();(0,o.A)(()=>{x&&l(x)},[x]);return{selectedValue:a,selectValue:(0,s.useCallback)(e=>{if(!p({value:e,tabValues:r}))throw new Error(`Can't select invalid tab value=${e}`);l(e),u(e),f(e)},[u,f,r]),tabValues:r}}var f=i(92303);const x={tabList:"tabList__CuJ",tabItem:"tabItem_LNqP"};var b=i(74848);function y({className:e,block:t,selectedValue:i,selectValue:s,tabValues:a}){const o=[],{blockElementScrollPositionUntilNextRender:l}=(0,r.a_)(),d=e=>{const t=e.currentTarget,n=o.indexOf(t),r=a[n].value;r!==i&&(l(t),s(r))},c=e=>{let t=null;switch(e.key){case"Enter":d(e);break;case"ArrowRight":{const i=o.indexOf(e.currentTarget)+1;t=o[i]??o[0];break}case"ArrowLeft":{const i=o.indexOf(e.currentTarget)-1;t=o[i]??o[o.length-1];break}}t?.focus()};return(0,b.jsx)("ul",{role:"tablist","aria-orientation":"horizontal",className:(0,n.A)("tabs",{"tabs--block":t},e),children:a.map(({value:e,label:t,attributes:s})=>(0,b.jsx)("li",{role:"tab",tabIndex:i===e?0:-1,"aria-selected":i===e,ref:e=>{o.push(e)},onKeyDown:c,onClick:d,...s,className:(0,n.A)("tabs__item",x.tabItem,s?.className,{"tabs__item--active":i===e}),children:t??e},e))})}function j({lazy:e,children:t,selectedValue:i}){const r=(Array.isArray(t)?t:[t]).filter(Boolean);if(e){const e=r.find(e=>e.props.value===i);return e?(0,s.cloneElement)(e,{className:(0,n.A)("margin-top--md",e.props.className)}):null}return(0,b.jsx)("div",{className:"margin-top--md",children:r.map((e,t)=>(0,s.cloneElement)(e,{key:t,hidden:e.props.value!==i}))})}function v(e){const t=g(e);return(0,b.jsxs)("div",{className:(0,n.A)("tabs-container",x.tabList),children:[(0,b.jsx)(y,{...t,...e}),(0,b.jsx)(j,{...t,...e})]})}function w(e){const t=(0,f.A)();return(0,b.jsx)(v,{...e,children:u(e.children)},String(t))}},19365:(e,t,i)=>{i.d(t,{A:()=>a});i(96540);var s=i(34164);const n={tabItem:"tabItem_Ymn6"};var r=i(74848);function a({children:e,hidden:t,className:i}){return(0,r.jsx)("div",{role:"tabpanel",className:(0,s.A)(n.tabItem,i),hidden:t,children:e})}},28453:(e,t,i)=>{i.d(t,{R:()=>a,x:()=>o});var s=i(96540);const n={},r=s.createContext(n);function a(e){const t=s.useContext(r);return s.useMemo(function(){return"function"==typeof e?e(t):{...t,...e}},[t,e])}function o(e){let t;return t=e.disableParentContext?"function"==typeof e.components?e.components(n):e.components||n:a(e.components),s.createElement(r.Provider,{value:t},e.children)}},30206:(e,t,i)=>{i.d(t,{A:()=>s});const s=i.p+"assets/images/gitops-menu-4e2fb63bea1de07bb053c9765d47d553.png"},32926:(e,t,i)=>{i.r(t),i.d(t,{assets:()=>c,contentTitle:()=>d,default:()=>p,frontMatter:()=>l,metadata:()=>s,toc:()=>u});const s=JSON.parse('{"id":"user-guide/gitops","title":"Manage GitOps","description":"Explore the GitOps section in KubeRocketCI for automating infrastructure and application deployments with a Git repository-driven approach.","source":"@site/versioned_docs/version-3.11/user-guide/gitops.md","sourceDirName":"user-guide","slug":"/user-guide/gitops","permalink":"/docs/3.11/user-guide/gitops","draft":false,"unlisted":false,"editUrl":"https://github.com/KubeRocketCI/docs/edit/main/docs/user-guide/gitops.md","tags":[],"version":"3.11","lastUpdatedBy":"Oleksandr_Stepanov@epam.com","lastUpdatedAt":1755673052000,"frontMatter":{"title":"Manage GitOps","description":"Explore the GitOps section in KubeRocketCI for automating infrastructure and application deployments with a Git repository-driven approach.","sidebar_label":"Manage GitOps"},"sidebar":"userGuideSidebar","previous":{"title":"Manage Clusters","permalink":"/docs/3.11/user-guide/cluster"},"next":{"title":"Manage Container Registries","permalink":"/docs/3.11/user-guide/manage-container-registries"}}');var n=i(74848),r=i(28453),a=i(11470),o=i(19365);const l={title:"Manage GitOps",description:"Explore the GitOps section in KubeRocketCI for automating infrastructure and application deployments with a Git repository-driven approach.",sidebar_label:"Manage GitOps"},d="Manage GitOps",c={},u=[{value:"Overview",id:"overview",level:2},{value:"Add GitOps Repository",id:"add-gitops-repository",level:2},{value:"GitOps Usage",id:"gitops-usage",level:2},{value:"Customize Yamllint Scan Rules",id:"customize-yamllint-scan-rules",level:2},{value:"Delete GitOps Repository",id:"delete-gitops-repository",level:2},{value:"Related Articles",id:"related-articles",level:2}];function h(e){const t={a:"a",admonition:"admonition",code:"code",h1:"h1",h2:"h2",header:"header",img:"img",li:"li",ol:"ol",p:"p",pre:"pre",strong:"strong",ul:"ul",...(0,r.R)(),...e.components},{Head:s}=t;return s||function(e,t){throw new Error("Expected "+(t?"component":"object")+" `"+e+"` to be defined: you likely forgot to import, pass, or provide it.")}("Head",!0),(0,n.jsxs)(n.Fragment,{children:[(0,n.jsx)(t.header,{children:(0,n.jsx)(t.h1,{id:"manage-gitops",children:"Manage GitOps"})}),"\n",(0,n.jsx)(s,{children:(0,n.jsx)("link",{rel:"canonical",href:"https://docs.kuberocketci.io/docs/user-guide/gitops"})}),"\n",(0,n.jsxs)(t.p,{children:["This page is dedicated to the ",(0,n.jsx)(t.code,{children:"GitOps"})," section of the ",(0,n.jsx)(t.code,{children:"Configuration"}),' tab, the process of establishing the GitOps repository, outline benefits it extends to users within the platform capabilities. GitOps, short for "Git Operations", is a modern approach to managing and automating infrastructure and application deployments. In GitOps, the desired state of your environment is declared and stored in a Git repository. With GitOps, you can ensure that your infrastructure and applications are always in sync with your intended configurations and readily adapt to changing requirements.']}),"\n",(0,n.jsx)(t.h2,{id:"overview",children:"Overview"}),"\n",(0,n.jsxs)(t.p,{children:["The purpose of the ",(0,n.jsx)(t.code,{children:"GitOps"})," section is to provide users with the ability to customize the state of their environments with the help of GitOps approach that enables you to store your entire deployment configuration in a Git repository, providing version control for changes, consistent collaboration, and automated deployments. Enforcing GitOps allows you to declaratively define and automate your configurations, ensuring consistency, version control, and collaboration within your team."]}),"\n",(0,n.jsx)(t.h2,{id:"add-gitops-repository",children:"Add GitOps Repository"}),"\n",(0,n.jsx)(t.p,{children:"GitOps repository is added in two steps:"}),"\n",(0,n.jsxs)(t.ol,{children:["\n",(0,n.jsxs)(t.li,{children:["\n",(0,n.jsxs)(t.p,{children:["Navigate to ",(0,n.jsx)(t.strong,{children:"Configuration"})," -> ",(0,n.jsx)(t.strong,{children:"Deployment"}),"-> ",(0,n.jsx)(t.strong,{children:"GitOps"})," and click the ",(0,n.jsx)(t.strong,{children:"+ Add GitOps Repository"})," button:"]}),"\n",(0,n.jsx)(t.p,{children:(0,n.jsx)(t.img,{alt:"Required fields",src:i(68950).A+"",title:"GitOps section",width:"1922",height:"994"})}),"\n"]}),"\n",(0,n.jsxs)(t.li,{children:["\n",(0,n.jsxs)(t.p,{children:["Select the creation strategy, fill in the required fields, and click ",(0,n.jsx)(t.strong,{children:"Save"}),":"]}),"\n"]}),"\n"]}),"\n",(0,n.jsxs)(a.A,{defaultValue:"create",values:[{label:"Create",value:"create"},{label:"Import",value:"import"}],children:[(0,n.jsxs)(o.A,{value:"create",children:[(0,n.jsxs)(t.p,{children:["The ",(0,n.jsx)(t.strong,{children:"Create"})," strategy allows you to create a new repository from scratch:"]}),(0,n.jsx)(t.p,{children:(0,n.jsx)(t.img,{alt:"Create GitOps repository",src:i(30206).A+"",title:"Create GitOps repository",width:"1922",height:"994"})}),(0,n.jsxs)(t.ul,{children:["\n",(0,n.jsxs)(t.li,{children:[(0,n.jsx)(t.strong,{children:"Git server"}),": Select the ",(0,n.jsx)(t.a,{href:"/docs/3.11/user-guide/add-git-server",children:"added Git server"})," where the GitOps repository will be created."]}),"\n",(0,n.jsxs)(t.li,{children:[(0,n.jsx)(t.strong,{children:"Git repo relative path"}),": Enter your Git account."]}),"\n",(0,n.jsxs)(t.li,{children:[(0,n.jsx)(t.strong,{children:"Repository name"}),": Specify the name for the new repository."]}),"\n"]})]}),(0,n.jsxs)(o.A,{value:"import",children:[(0,n.jsxs)(t.p,{children:["Select the ",(0,n.jsx)(t.strong,{children:"Import"})," strategy if you already have a repository that stores your application Helm charts' configurations:"]}),(0,n.jsx)(t.p,{children:(0,n.jsx)(t.img,{alt:"Import GitOps repository",src:i(80898).A+"",title:"Import GitOps repository",width:"1922",height:"994"})}),(0,n.jsxs)(t.ul,{children:["\n",(0,n.jsxs)(t.li,{children:[(0,n.jsx)(t.strong,{children:"Git server"}),": Select the ",(0,n.jsx)(t.a,{href:"/docs/3.11/user-guide/add-git-server",children:"added Git server"})," that has credentials to access the GitOps repository."]}),"\n",(0,n.jsxs)(t.li,{children:[(0,n.jsx)(t.strong,{children:"Git repo relative path"}),": Enter your Git account."]}),"\n",(0,n.jsxs)(t.li,{children:[(0,n.jsx)(t.strong,{children:"Repository name"}),": Specify the name of the repository to import."]}),"\n"]})]})]}),"\n",(0,n.jsxs)(t.ol,{start:"3",children:["\n",(0,n.jsxs)(t.li,{children:["\n",(0,n.jsx)(t.p,{children:"Check the GitOps repository connected to the platform:"}),"\n",(0,n.jsx)(t.p,{children:(0,n.jsx)(t.img,{alt:"System Codebase",src:i(83590).A+"",title:"System Codebase",width:"1919",height:"1111"})}),"\n",(0,n.jsxs)(t.p,{children:["As the result, the ",(0,n.jsx)(t.code,{children:"Codebase"})," of ",(0,n.jsx)(t.code,{children:"system"})," type will be added to the Codebase list of the ",(0,n.jsx)(t.strong,{children:"Components"})," section:"]}),"\n",(0,n.jsx)(t.p,{children:(0,n.jsx)(t.img,{alt:"GitOps Codebase",src:i(84934).A+"",title:"GitOps Codebase",width:"1920",height:"1113"})}),"\n"]}),"\n"]}),"\n",(0,n.jsx)(t.admonition,{type:"warning",children:(0,n.jsx)(t.p,{children:"The platform allows only one GitOps repository at a time."})}),"\n",(0,n.jsx)(t.h2,{id:"gitops-usage",children:"GitOps Usage"}),"\n",(0,n.jsx)(t.p,{children:"Once the GitOps repository is added to the platform, you can set custom parameters for the deployed Helm Chart. To redefine the parameters, follow the steps below:"}),"\n",(0,n.jsxs)(t.ol,{children:["\n",(0,n.jsxs)(t.li,{children:["\n",(0,n.jsxs)(t.p,{children:["Within the GitOps repository, follow the naming convention ",(0,n.jsx)(t.code,{children:"<deployment-flow>/<environment>/<application-name>-values.yaml"})," to create the chart values file, e.g. ",(0,n.jsx)(t.code,{children:"mypipe/dev/fastapi-demo-values.yaml"}),"."]}),"\n"]}),"\n",(0,n.jsxs)(t.li,{children:["\n",(0,n.jsxs)(t.p,{children:["Add the necessary custom values to the ",(0,n.jsx)(t.code,{children:"mypipe/dev/fastapi-demo-values.yaml"})," file, and then commit the file to the default branch of the GitOps repository."]}),"\n"]}),"\n",(0,n.jsxs)(t.li,{children:["\n",(0,n.jsxs)(t.p,{children:["Navigate to the ",(0,n.jsx)(t.strong,{children:"Environments"})," section. Open the created environment, open its stage and deploy it with the ",(0,n.jsx)(t.strong,{children:"Values override"})," checkbox selected as it is shown below:"]}),"\n",(0,n.jsx)(t.p,{children:(0,n.jsx)(t.img,{alt:"GitOps Codebase",src:i(33601).A+"",title:"GitOps Codebase",width:"1922",height:"994"})}),"\n"]}),"\n"]}),"\n",(0,n.jsx)(t.h2,{id:"customize-yamllint-scan-rules",children:"Customize Yamllint Scan Rules"}),"\n",(0,n.jsx)(t.admonition,{type:"note",children:(0,n.jsx)(t.p,{children:"Ability to customize yamllint rules is available starting from platform version 3.11."})}),"\n",(0,n.jsxs)(t.p,{children:["Review and build pipelines for a GitOps repository use ",(0,n.jsx)(t.code,{children:"yamllint"})," to scan YAML files. By default, predefined rules are applied automatically. However, it is possible to customize and extend the default rules by adding a ",(0,n.jsx)(t.code,{children:".yamllint"})," configuration file to the root of the GitOps repository. This file should define the required rules and parameters. For example:"]}),"\n",(0,n.jsx)(t.pre,{children:(0,n.jsx)(t.code,{className:"language-yaml",metastring:'title=".yamllint"',children:"# yamllint configuration file\n# Extends the default configuration:\n# https://yamllint.readthedocs.io/en/stable/configuration.html#default-configuration\n\nextends: default\n\nignore:\n  - '.yamllint'\n\nrules:\n  line-length: disable     # Disable line-length rule\n  document-start: disable  # Disable rule for requiring '---' at the document start\n"})}),"\n",(0,n.jsxs)(t.p,{children:["In this example, the ",(0,n.jsx)(t.code,{children:"line-length"})," and ",(0,n.jsx)(t.code,{children:"document-start"})," rules are disabled. For more details on available rules and their configurations, refer to the yamllint ",(0,n.jsx)(t.a,{href:"https://yamllint.readthedocs.io/en/stable/rules.html",children:"documentation"}),"."]}),"\n",(0,n.jsxs)(t.p,{children:["After creating the ",(0,n.jsx)(t.code,{children:".yamllint"})," file, commit it to the main branch of the GitOps repository. Once the changes are applied, the ",(0,n.jsx)(t.code,{children:"yamllint"})," scan in review and build pipelines will use the custom rules defined in the ",(0,n.jsx)(t.code,{children:".yamllint"})," file."]}),"\n",(0,n.jsx)(t.p,{children:(0,n.jsx)(t.img,{alt:"Yamllint rules",src:i(81208).A+"",title:"Yamllint rules",width:"3334",height:"1660"})}),"\n",(0,n.jsx)(t.h2,{id:"delete-gitops-repository",children:"Delete GitOps Repository"}),"\n",(0,n.jsx)(t.p,{children:"In case you need to delete the GitOps repository, do the following:"}),"\n",(0,n.jsxs)(t.ol,{children:["\n",(0,n.jsxs)(t.li,{children:["\n",(0,n.jsx)(t.p,{children:"Delete the GitOps repository in the Git provider."}),"\n"]}),"\n",(0,n.jsxs)(t.li,{children:["\n",(0,n.jsxs)(t.p,{children:["Delete the Codebase custom resource using the ",(0,n.jsx)(t.code,{children:"kubectl delete"})," command:"]}),"\n",(0,n.jsx)(t.pre,{children:(0,n.jsx)(t.code,{className:"language-bash",children:"kubectl delete Codebase krci-gitops -n krci\n"})}),"\n"]}),"\n"]}),"\n",(0,n.jsx)(t.h2,{id:"related-articles",children:"Related Articles"}),"\n",(0,n.jsxs)(t.ul,{children:["\n",(0,n.jsx)(t.li,{children:(0,n.jsx)(t.a,{href:"/docs/3.11/user-guide/add-cd-pipeline",children:"Add CD Pipeline"})}),"\n",(0,n.jsx)(t.li,{children:(0,n.jsx)(t.a,{href:"/docs/3.11/operator-guide/add-ons-overview",children:"Cluster Add-Ons Overview"})}),"\n",(0,n.jsx)(t.li,{children:(0,n.jsx)(t.a,{href:"/docs/3.11/user-guide/cluster",children:"Manage Clusters"})}),"\n"]})]})}function p(e={}){const{wrapper:t}={...(0,r.R)(),...e.components};return t?(0,n.jsx)(t,{...e,children:(0,n.jsx)(h,{...e})}):h(e)}},33601:(e,t,i)=>{i.d(t,{A:()=>s});const s=i.p+"assets/images/values-override-deploy-01c6e3a79a6fa6b000a4a71109ff34cb.png"},68950:(e,t,i)=>{i.d(t,{A:()=>s});const s=i.p+"assets/images/gitops-section-6196ce8685d10f51f4a3d07c5efd2bb7.png"},80898:(e,t,i)=>{i.d(t,{A:()=>s});const s=i.p+"assets/images/gitops-menu-import-415468b4db1fe620da5c5fef27b00841.png"},81208:(e,t,i)=>{i.d(t,{A:()=>s});const s=i.p+"assets/images/yamllint-rules-6abb30a55d188ab49a9d1bbcce3c22a0.png"},83590:(e,t,i)=>{i.d(t,{A:()=>s});const s=i.p+"assets/images/gitops-repo-added-75fe612edbae5badd52f90ce128439a7.png"},84934:(e,t,i)=>{i.d(t,{A:()=>s});const s=i.p+"assets/images/system-codebase-66f0de3e26e742bc60d0d653189ef98e.png"}}]);