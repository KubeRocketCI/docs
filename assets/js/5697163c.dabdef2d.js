"use strict";(self.webpackChunkkuberocketci_docs=self.webpackChunkkuberocketci_docs||[]).push([[24129],{92338:(e,n,t)=>{t.r(n),t.d(n,{assets:()=>c,contentTitle:()=>a,default:()=>h,frontMatter:()=>s,metadata:()=>i,toc:()=>d});const i=JSON.parse('{"id":"operator-guide/ci/tekton-monitoring","title":"Pipeline Monitoring with Prometheus and Grafana","description":"This documentation describes how to integrate tekton-pipelines metrics with Prometheus and Grafana monitoring stack.","source":"@site/versioned_docs/version-3.9/operator-guide/ci/tekton-monitoring.md","sourceDirName":"operator-guide/ci","slug":"/operator-guide/ci/tekton-monitoring","permalink":"/docs/3.9/operator-guide/ci/tekton-monitoring","draft":false,"unlisted":false,"editUrl":"https://github.com/KubeRocketCI/docs/edit/main/docs/operator-guide/ci/tekton-monitoring.md","tags":[],"version":"3.9","lastUpdatedBy":"Sergiy Kulanov","lastUpdatedAt":1737665242000,"frontMatter":{},"sidebar":"operatorGuideSidebar","previous":{"title":"Tekton Overview","permalink":"/docs/3.9/operator-guide/ci/tekton-overview"},"next":{"title":"Microsoft Teams Notification","permalink":"/docs/3.9/operator-guide/ci/notification-msteams"}}');var o=t(74848),r=t(28453);const s={},a="Pipeline Monitoring with Prometheus and Grafana",c={},d=[{value:"Prerequisites",id:"prerequisites",level:2},{value:"Integration via Service Monitor",id:"integration-via-service-monitor",level:2},{value:"Related Articles",id:"related-articles",level:2}];function l(e){const n={a:"a",code:"code",h1:"h1",h2:"h2",header:"header",img:"img",li:"li",ol:"ol",p:"p",pre:"pre",ul:"ul",...(0,r.R)(),...e.components},{Head:i}=n;return i||function(e,n){throw new Error("Expected "+(n?"component":"object")+" `"+e+"` to be defined: you likely forgot to import, pass, or provide it.")}("Head",!0),(0,o.jsxs)(o.Fragment,{children:[(0,o.jsx)(n.header,{children:(0,o.jsx)(n.h1,{id:"pipeline-monitoring-with-prometheus-and-grafana",children:"Pipeline Monitoring with Prometheus and Grafana"})}),"\n",(0,o.jsx)(i,{children:(0,o.jsx)("link",{rel:"canonical",href:"https://docs.kuberocketci.io/docs/operator-guide/ci/tekton-monitoring/"})}),"\n",(0,o.jsx)(n.p,{children:"This documentation describes how to integrate tekton-pipelines metrics with Prometheus and Grafana monitoring stack."}),"\n",(0,o.jsx)(n.h2,{id:"prerequisites",children:"Prerequisites"}),"\n",(0,o.jsx)(n.p,{children:"Ensure the following requirements are met first before moving ahead:"}),"\n",(0,o.jsxs)(n.ul,{children:["\n",(0,o.jsxs)(n.li,{children:[(0,o.jsx)(n.a,{href:"https://prometheus-community.github.io/helm-charts",children:"Kube prometheus stack"})," is installed;"]}),"\n",(0,o.jsxs)(n.li,{children:[(0,o.jsx)(n.a,{href:"https://github.com/tektoncd/pipeline/releases",children:"Tekton pipeline"})," is installed."]}),"\n"]}),"\n",(0,o.jsx)(n.h2,{id:"integration-via-service-monitor",children:"Integration via Service Monitor"}),"\n",(0,o.jsx)(n.p,{children:"To implement Pipeline Monitoring using the Service Monitor resource, follow the steps below:"}),"\n",(0,o.jsxs)(n.ol,{children:["\n",(0,o.jsxs)(n.li,{children:["\n",(0,o.jsx)(n.p,{children:"Create a Service Monitor resource file with the following configuration:"}),"\n",(0,o.jsx)(n.pre,{children:(0,o.jsx)(n.code,{className:"language-yaml",metastring:"service-monitor.yaml",children:"apiVersion: monitoring.coreos.com/v1\nkind: ServiceMonitor\nmetadata:\n  labels:\n    release: prom               # kube-prometheus-stack release name\n  name: tekton-overview\nspec:\n  endpoints:\n    - interval: 10s\n      path: /metrics\n      port: http-metrics\n      scrapeTimeout: 10s\n  namespaceSelector:\n    matchNames:\n      - tekton-pipelines\n  selector:\n    matchLabels:\n      app.kubernetes.io/component: controller\n      app.kubernetes.io/part-of: tekton-pipelines\n"})}),"\n"]}),"\n",(0,o.jsxs)(n.li,{children:["\n",(0,o.jsxs)(n.p,{children:["Apply the created resource to the ",(0,o.jsx)(n.code,{children:"tekton-pipelines"})," namespace:"]}),"\n",(0,o.jsx)(n.pre,{children:(0,o.jsx)(n.code,{className:"language-bash",children:"kubectl apply -f service-monitor.yaml -n tekton-pipelines\n"})}),"\n"]}),"\n",(0,o.jsxs)(n.li,{children:["\n",(0,o.jsxs)(n.p,{children:["Download the ",(0,o.jsx)(n.a,{href:"https://grafana.com/grafana/dashboards/18321",children:"KubeRocketCi"})," dashboard:"]}),"\n",(0,o.jsx)(n.p,{children:"a. Click on the dashboard menu;"}),"\n",(0,o.jsxs)(n.p,{children:["b. In the upper right corner, click on the ",(0,o.jsx)(n.code,{children:"New"})," button. In the dropdown menu, click the ",(0,o.jsx)(n.code,{children:"Import"}),";"]}),"\n",(0,o.jsx)(n.p,{children:(0,o.jsx)(n.img,{alt:"Import dashboard grafana",src:t(92351).A+"",title:"Import Grafana dashboard",width:"3364",height:"1662"})}),"\n",(0,o.jsxs)(n.p,{children:["c. Select the downloaded ",(0,o.jsx)(n.code,{children:"18321_rev*.json"})," file;"]}),"\n",(0,o.jsx)(n.p,{children:(0,o.jsx)(n.img,{alt:"Import dashboard grafana options",src:t(53414).A+"",title:"Import Grafana dashboard: Options",width:"3364",height:"1662"})}),"\n",(0,o.jsx)(n.p,{children:"d. Type the name of the dashboard;"}),"\n",(0,o.jsx)(n.p,{children:"e. Select the folder for the dashboard;"}),"\n",(0,o.jsx)(n.p,{children:"f. Change the UID if necessary;"}),"\n",(0,o.jsxs)(n.p,{children:["g. Click the ",(0,o.jsx)(n.code,{children:"Import"})," button."]}),"\n"]}),"\n"]}),"\n",(0,o.jsx)(n.p,{children:"As soon as the dashboard procedure is completed, you can track the newcoming metrics in the dashboard menu:"}),"\n",(0,o.jsx)(n.p,{children:(0,o.jsx)(n.img,{alt:"Tekton dashboard",src:t(97988).A+"",title:"Tekton dashboard",width:"3578",height:"1848"})}),"\n",(0,o.jsx)(n.h2,{id:"related-articles",children:"Related Articles"}),"\n",(0,o.jsxs)(n.ul,{children:["\n",(0,o.jsx)(n.li,{children:(0,o.jsx)(n.a,{href:"/docs/3.9/operator-guide/install-tekton",children:"Install Tekton"})}),"\n",(0,o.jsx)(n.li,{children:(0,o.jsx)(n.a,{href:"/docs/3.9/operator-guide/install-kuberocketci",children:"Install KubeRocketCI"})}),"\n"]})]})}function h(e={}){const{wrapper:n}={...(0,r.R)(),...e.components};return n?(0,o.jsx)(n,{...e,children:(0,o.jsx)(l,{...e})}):l(e)}},53414:(e,n,t)=>{t.d(n,{A:()=>i});const i=t.p+"assets/images/grafana-tekton-dasboard-import-options-80eed39e5e1efe273ec52ac5c710988d.png"},92351:(e,n,t)=>{t.d(n,{A:()=>i});const i=t.p+"assets/images/grafana-tekton-dasboard-import-4af500d3ab1b3d0be3ab7cb86d6f2ca0.png"},97988:(e,n,t)=>{t.d(n,{A:()=>i});const i=t.p+"assets/images/tekton-dashboard-f0599da70118c2cf0ed8a4a788c44740.png"},28453:(e,n,t)=>{t.d(n,{R:()=>s,x:()=>a});var i=t(96540);const o={},r=i.createContext(o);function s(e){const n=i.useContext(r);return i.useMemo((function(){return"function"==typeof e?e(n):{...n,...e}}),[n,e])}function a(e){let n;return n=e.disableParentContext?"function"==typeof e.components?e.components(o):e.components||o:s(e.components),i.createElement(r.Provider,{value:n},e.children)}}}]);