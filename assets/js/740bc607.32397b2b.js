"use strict";(self.webpackChunkkuberocketci_docs=self.webpackChunkkuberocketci_docs||[]).push([[64880],{24344:(e,n,i)=>{i.d(n,{A:()=>t});const t=i.p+"assets/images/repo-discovery-17aed1ed25c40d8ecc7f0f698fbc1d6b.png"},28453:(e,n,i)=>{i.d(n,{R:()=>o,x:()=>c});var t=i(96540);const s={},r=t.createContext(s);function o(e){const n=t.useContext(r);return t.useMemo(function(){return"function"==typeof e?e(n):{...n,...e}},[n,e])}function c(e){let n;return n=e.disableParentContext?"function"==typeof e.components?e.components(s):e.components||s:o(e.components),t.createElement(r.Provider,{value:n},e.children)}},66107:(e,n,i)=>{i.r(n),i.d(n,{assets:()=>a,contentTitle:()=>c,default:()=>h,frontMatter:()=>o,metadata:()=>t,toc:()=>d});const t=JSON.parse('{"id":"operator-guide/extensions/git-discovery","title":"Enable Git Resource Discovery","description":"Configure GitFusion to enable automated discovery and browsing of Git accounts, repositories, branches, and organizational structures within the KubeRocketCI portal.","source":"@site/versioned_docs/version-3.12/operator-guide/extensions/git-discovery.md","sourceDirName":"operator-guide/extensions","slug":"/operator-guide/extensions/git-discovery","permalink":"/docs/operator-guide/extensions/git-discovery","draft":false,"unlisted":false,"editUrl":"https://github.com/KubeRocketCI/docs/edit/main/docs/operator-guide/extensions/git-discovery.md","tags":[],"version":"3.12","lastUpdatedBy":"Oleksandr_Stepanov@epam.com","lastUpdatedAt":1758534643000,"frontMatter":{"title":"Enable Git Resource Discovery","description":"Configure GitFusion to enable automated discovery and browsing of Git accounts, repositories, branches, and organizational structures within the KubeRocketCI portal.","sidebar_label":"GitFusion"},"sidebar":"operatorGuideSidebar","previous":{"title":"KrakenD","permalink":"/docs/operator-guide/extensions/krakend"},"next":{"title":"Uninstall KubeRocketCI","permalink":"/docs/operator-guide/uninstall-kuberocketci"}}');var s=i(74848),r=i(28453);const o={title:"Enable Git Resource Discovery",description:"Configure GitFusion to enable automated discovery and browsing of Git accounts, repositories, branches, and organizational structures within the KubeRocketCI portal.",sidebar_label:"GitFusion"},c="Enable Git Resource Discovery",a={},d=[{value:"Prerequisites",id:"prerequisites",level:2},{value:"Installation",id:"installation",level:2},{value:"Verification",id:"verification",level:2},{value:"Component Discovery",id:"component-discovery",level:3},{value:"Creating Branches",id:"creating-branches",level:3},{value:"Related Articles",id:"related-articles",level:2}];function l(e){const n={a:"a",admonition:"admonition",code:"code",h1:"h1",h2:"h2",h3:"h3",header:"header",img:"img",li:"li",ol:"ol",p:"p",pre:"pre",strong:"strong",ul:"ul",...(0,r.R)(),...e.components},{Head:t}=n;return t||function(e,n){throw new Error("Expected "+(n?"component":"object")+" `"+e+"` to be defined: you likely forgot to import, pass, or provide it.")}("Head",!0),(0,s.jsxs)(s.Fragment,{children:[(0,s.jsx)(n.header,{children:(0,s.jsx)(n.h1,{id:"enable-git-resource-discovery",children:"Enable Git Resource Discovery"})}),"\n",(0,s.jsx)(t,{children:(0,s.jsx)("link",{rel:"canonical",href:"https://docs.kuberocketci.io/docs/operator-guide/extensions/git-discovery"})}),"\n",(0,s.jsxs)(n.p,{children:["This page describes installation of the ",(0,s.jsx)(n.a,{href:"https://github.com/KubeRocketCI/gitfusion",children:"GitFusion"})," component, allowing the portal to access Git-related information without requiring direct access to the Version Control System."]}),"\n",(0,s.jsx)(n.p,{children:"GitFusion enhances the developer experience by facilitating automated discovery of Git repositories, remote branches, and organizational structures across multiple Git providers. The service operates as an intermediary layer, securing communication between the KubeRocketCI portal and Git infrastructure while enabling rich repository browsing capabilities."}),"\n",(0,s.jsx)(n.h2,{id:"prerequisites",children:"Prerequisites"}),"\n",(0,s.jsxs)(n.p,{children:["To install GitFusion, ensure that a ",(0,s.jsx)(n.a,{href:"/docs/operator-guide/extensions/krakend",children:"KrakenD"})," instance is installed and configured using ",(0,s.jsx)(n.a,{href:"https://github.com/epam/edp-cluster-add-ons/tree/main/clusters/core/addons/krakend",children:"edp-cluster-add-ons"}),"."]}),"\n",(0,s.jsx)(n.h2,{id:"installation",children:"Installation"}),"\n",(0,s.jsx)(n.admonition,{type:"warning",children:(0,s.jsxs)(n.p,{children:["When integrating GitFusion with Bitbucket repositories, ensure your Bitbucket app password includes the ",(0,s.jsx)(n.code,{children:"account:read"})," permission scope. Detailed instructions for configuring Bitbucket app passwords with appropriate permissions are available in the ",(0,s.jsx)(n.a,{href:"/docs/user-guide/add-git-server",children:"Add Git Server"})," documentation."]})}),"\n",(0,s.jsx)(n.p,{children:"To enable the GitFusion integration in KubeRocketCI, follow the steps below:"}),"\n",(0,s.jsxs)(n.ol,{children:["\n",(0,s.jsxs)(n.li,{children:["\n",(0,s.jsxs)(n.p,{children:["Activate GitFusion service deployment by modifying the ",(0,s.jsx)(n.a,{href:"https://github.com/epam/edp-cluster-add-ons/blob/main/clusters/core/apps/values.yaml#L87",children:"edp-cluster-add-ons"})," repository. Set the ",(0,s.jsx)(n.code,{children:"gitfusion.enable"})," flag to ",(0,s.jsx)(n.code,{children:"true"})," in the ",(0,s.jsx)(n.code,{children:"values.yaml"})," file:"]}),"\n",(0,s.jsx)(n.pre,{children:(0,s.jsx)(n.code,{className:"language-yaml",metastring:'title="values.yaml"',children:"gitfusion:\n  enable: true\n"})}),"\n"]}),"\n",(0,s.jsxs)(n.li,{children:["\n",(0,s.jsx)(n.p,{children:"Configure the KrakenD API Gateway to expose GitFusion endpoints by modifying its routing configuration."}),"\n",(0,s.jsx)(n.admonition,{type:"note",children:(0,s.jsxs)(n.p,{children:["Reference KrakenD configurations in the ",(0,s.jsx)(n.a,{href:"https://github.com/epam/edp-cluster-add-ons/tree/main/clusters/core/addons/krakend",children:"edp-cluster-add-ons"})," repository.\nFor more information on how to work with edp-cluster-add-ons, please refer to the ",(0,s.jsx)(n.a,{href:"/docs/operator-guide/add-ons-overview",children:"Install via Add-Ons"})," page."]})}),"\n",(0,s.jsxs)(n.ol,{children:["\n",(0,s.jsxs)(n.li,{children:["\n",(0,s.jsxs)(n.p,{children:["Clone your forked copy of the ",(0,s.jsx)(n.a,{href:"https://github.com/epam/edp-cluster-add-ons",children:"edp-cluster-add-ons"})," repository."]}),"\n"]}),"\n",(0,s.jsxs)(n.li,{children:["\n",(0,s.jsx)(n.p,{children:"Verify that KrakenD configuration includes the GitFusion API endpoints. If missing, add them in two steps:"}),"\n",(0,s.jsxs)(n.ol,{children:["\n",(0,s.jsxs)(n.li,{children:["Navigate to the KrakenD configuration directory at ",(0,s.jsx)(n.code,{children:"clusters/<cluster-name>/addons/krakend"}),"."]}),"\n",(0,s.jsxs)(n.li,{children:["Update the ",(0,s.jsx)(n.a,{href:"https://github.com/epam/edp-cluster-add-ons/blob/main/clusters/core/addons/krakend/values.yaml#L202-#L346",children:"values.yaml"})," file to include the necessary GitFusion API endpoint definitions."]}),"\n"]}),"\n"]}),"\n",(0,s.jsxs)(n.li,{children:["\n",(0,s.jsx)(n.p,{children:"Configure the KrakenD secret to include GitFusion service connectivity details."}),"\n",(0,s.jsx)(n.admonition,{type:"note",children:(0,s.jsxs)(n.p,{children:["The ",(0,s.jsx)(n.code,{children:"GITFUSION_URL"})," variable should point to the GitFusion service URL, e.g., ",(0,s.jsx)(n.code,{children:"http://gitfusion.krci:8080"}),"."]})}),"\n",(0,s.jsxs)(n.p,{children:["Modify the ",(0,s.jsx)(n.code,{children:"krakend"})," secret configuration to include the ",(0,s.jsx)(n.code,{children:"GITFUSION_URL"})," environment variable:"]}),"\n",(0,s.jsx)(n.pre,{children:(0,s.jsx)(n.code,{className:"language-yaml",metastring:'title="KrakenD secret"',children:"kind: Secret\napiVersion: v1\nmetadata:\n  name: krakend\n  namespace: krakend\ndata:\n  ...\n  GITFUSION_URL: http://gitfusion.krci:8080\ntype: Opaque\n"})}),"\n",(0,s.jsxs)(n.p,{children:["For environments utilizing External Secrets Operator with AWS Parameter Store, add the ",(0,s.jsx)(n.code,{children:"GITFUSION_URL"})," variable to Parameter Store configuration:"]}),"\n",(0,s.jsx)(n.pre,{children:(0,s.jsx)(n.code,{className:"language-yaml",metastring:'title="AWS Parameter Store"',children:'{\n  "SONARQUBE_URL": "http://sonar.sonar:9000",\n  "SONARQUBE_TOKEN": "<sonarqube-token>",\n  "DEPTRACK_URL": "http://dependency-track-api-server.dependency-track:8080",\n  "DEPTRACK_TOKEN": "<dependency-track-token>",\n  "JWK_URL": "https://keycloak.example.com/realms/<realmName>/protocol/openid-connect/certs",\n  "OPENSEARCH_URL": "https://opensearch-cluster-master.logging:9200",\n  "OPENSEARCH_CREDS": "<opensearch-base64-encoded-credentials>",\n  "GITFUSION_URL": "http://gitfusion.krci:8080"\n}\n'})}),"\n"]}),"\n",(0,s.jsxs)(n.li,{children:["\n",(0,s.jsxs)(n.p,{children:["Save modifications by committing and pushing the updated files to the ",(0,s.jsx)(n.code,{children:"edp-cluster-add-ons"})," repository."]}),"\n"]}),"\n",(0,s.jsxs)(n.li,{children:["\n",(0,s.jsx)(n.p,{children:"Apply the configuration changes by accessing Argo CD and synchronizing the KrakenD application deployment."}),"\n"]}),"\n"]}),"\n"]}),"\n"]}),"\n",(0,s.jsx)(n.h2,{id:"verification",children:"Verification"}),"\n",(0,s.jsx)(n.p,{children:"Once GitFusion deployment is complete, validate the integration functionality through the following testing procedures:"}),"\n",(0,s.jsx)(n.h3,{id:"component-discovery",children:"Component Discovery"}),"\n",(0,s.jsxs)(n.ol,{children:["\n",(0,s.jsxs)(n.li,{children:["\n",(0,s.jsxs)(n.p,{children:["Navigate to ",(0,s.jsx)(n.strong,{children:"KubeRocketCI portal"})," -> ",(0,s.jsx)(n.strong,{children:"Components"}),"."]}),"\n"]}),"\n",(0,s.jsxs)(n.li,{children:["\n",(0,s.jsxs)(n.p,{children:["On the ",(0,s.jsx)(n.strong,{children:"Components"})," page, click ",(0,s.jsx)(n.strong,{children:"+ Create component"})," -> ",(0,s.jsx)(n.strong,{children:"Application"})," -> ",(0,s.jsx)(n.strong,{children:"Import"}),"."]}),"\n"]}),"\n",(0,s.jsxs)(n.li,{children:["\n",(0,s.jsxs)(n.p,{children:["Within the ",(0,s.jsx)(n.strong,{children:"Create Application"})," dialog, use the ",(0,s.jsx)(n.strong,{children:"Owner"})," dropdown to select your Git account (configured during Git Server setup):"]}),"\n",(0,s.jsx)(n.p,{children:(0,s.jsx)(n.img,{alt:"Git account discovery",src:i(86869).A+"",title:"Git account discovery",width:"1922",height:"994"})}),"\n"]}),"\n",(0,s.jsxs)(n.li,{children:["\n",(0,s.jsxs)(n.p,{children:["Browse available repositories using the ",(0,s.jsx)(n.strong,{children:"Repository"})," dropdown to select the desired application for import:"]}),"\n",(0,s.jsx)(n.p,{children:(0,s.jsx)(n.img,{alt:"Git repository discovery",src:i(24344).A+"",title:"Git repository discovery",width:"1922",height:"994"})}),"\n"]}),"\n"]}),"\n",(0,s.jsx)(n.h3,{id:"creating-branches",children:"Creating Branches"}),"\n",(0,s.jsxs)(n.ol,{children:["\n",(0,s.jsxs)(n.li,{children:["\n",(0,s.jsxs)(n.p,{children:["Return to the ",(0,s.jsx)(n.strong,{children:"KubeRocketCI portal"}),", access ",(0,s.jsx)(n.strong,{children:"Components"}),", and select a specific component by clicking its name."]}),"\n"]}),"\n",(0,s.jsxs)(n.li,{children:["\n",(0,s.jsxs)(n.p,{children:["Switch to the ",(0,s.jsx)(n.strong,{children:"Branches"})," tab within the component details view and click ",(0,s.jsx)(n.strong,{children:"+ Create branch"}),"."]}),"\n"]}),"\n",(0,s.jsxs)(n.li,{children:["\n",(0,s.jsxs)(n.p,{children:["In the ",(0,s.jsx)(n.strong,{children:"Create branch"})," dialog, interact with the branch name field to display the list of remotely available branches:"]}),"\n",(0,s.jsx)(n.p,{children:(0,s.jsx)(n.img,{alt:"Git branch discovery",src:i(91324).A+"",title:"Git branch discovery",width:"1922",height:"994"})}),"\n"]}),"\n"]}),"\n",(0,s.jsx)(n.h2,{id:"related-articles",children:"Related Articles"}),"\n",(0,s.jsxs)(n.ul,{children:["\n",(0,s.jsx)(n.li,{children:(0,s.jsx)(n.a,{href:"/docs/user-guide/add-application",children:"Add Application"})}),"\n",(0,s.jsx)(n.li,{children:(0,s.jsx)(n.a,{href:"/docs/user-guide/manage-branches",children:"Manage Branches"})}),"\n",(0,s.jsx)(n.li,{children:(0,s.jsx)(n.a,{href:"/docs/operator-guide/extensions/krakend",children:"KrakenD Integration"})}),"\n"]})]})}function h(e={}){const{wrapper:n}={...(0,r.R)(),...e.components};return n?(0,s.jsx)(n,{...e,children:(0,s.jsx)(l,{...e})}):l(e)}},86869:(e,n,i)=>{i.d(n,{A:()=>t});const t=i.p+"assets/images/account-discovery-c784e755410763ebb4bb4965f74683cf.png"},91324:(e,n,i)=>{i.d(n,{A:()=>t});const t=i.p+"assets/images/branch-discovery-17aed1ed25c40d8ecc7f0f698fbc1d6b.png"}}]);