<!doctype html>
<html lang="en" dir="ltr" class="blog-wrapper blog-post-page plugin-blog plugin-id-default" data-has-hydrated="false">
<head>
<meta charset="UTF-8">
<meta name="generator" content="Docusaurus v3.7.0">
<title data-rh="true">Integrating OIDC Authentication with Microsoft Entra in AWS EKS | KubeRocketCI</title><meta data-rh="true" name="viewport" content="width=device-width,initial-scale=1"><meta data-rh="true" property="og:url" content="https://docs.kuberocketci.io/blog/integrating-oidc-authentication-microsoft-entra-aws-eks/"><meta data-rh="true" property="og:locale" content="en"><meta data-rh="true" name="docusaurus_locale" content="en"><meta data-rh="true" name="docusaurus_tag" content="default"><meta data-rh="true" name="docsearch:language" content="en"><meta data-rh="true" name="docsearch:docusaurus_tag" content="default"><meta data-rh="true" name="author" content="KubeRocketCI Team"><meta data-rh="true" name="og:type" content="website"><meta data-rh="true" name="og:url" content="https://docs.kuberocketci.io"><meta data-rh="true" name="og:title" content="KubeRocketCI Documentation | Comprehensive Guide and Tutorials"><meta data-rh="true" name="og:description" content="Explore KubeRocketCI Documentation for detailed guides, tutorials, and insights into KubeRocketCI CI/CD flow, platform components, and add-ons. Learn how to enhance your DevOps practices with KubeRocketCI."><meta data-rh="true" name="og:image" content="https://docs.kuberocketci.io/img/kuberocketci-social-card.png"><meta data-rh="true" name="twitter:card" content="summary_large_image"><meta data-rh="true" name="twitter:url" content="https://docs.kuberocketci.io"><meta data-rh="true" name="twitter:title" content="KubeRocketCI Documentation | Comprehensive Guide and Tutorials"><meta data-rh="true" name="twitter:description" content="Explore KubeRocketCI Documentation for detailed guides, tutorials, and insights into KubeRocketCI CI/CD flow, platform components, and add-ons. Learn how to enhance your DevOps practices with KubeRocketCI."><meta data-rh="true" property="og:title" content="Integrating OIDC Authentication with Microsoft Entra in AWS EKS | KubeRocketCI"><meta data-rh="true" name="description" content="Learn how to implement Single Sign-On (SSO) using OpenID Connect (OIDC) and Microsoft Entra to enhance security and streamline authentication processes in Amazon Elastic Kubernetes Service (AWS EKS)."><meta data-rh="true" property="og:description" content="Learn how to implement Single Sign-On (SSO) using OpenID Connect (OIDC) and Microsoft Entra to enhance security and streamline authentication processes in Amazon Elastic Kubernetes Service (AWS EKS)."><meta data-rh="true" name="keywords" content="KubeRocketCI,Microsoft Entra,AWS EKS,Kubernetes,AWS,EKS,IAM,OpenID Connect,Single Sign-On,Security,Authentication,Authorization"><meta data-rh="true" property="og:image" content="https://i.imgur.com/mErPwqL.png"><meta data-rh="true" name="twitter:image" content="https://i.imgur.com/mErPwqL.png"><meta data-rh="true" property="og:type" content="article"><meta data-rh="true" property="article:published_time" content="2024-12-03T00:00:00.000Z"><meta data-rh="true" property="article:author" content="https://github.com/daniil-nedostup"><meta data-rh="true" property="article:tag" content="KubeRocketCI,AWS EKS,SSO,Microsoft Entra,OIDC,Kubernetes,Security"><link data-rh="true" rel="icon" href="/img/favicon.ico"><link data-rh="true" rel="canonical" href="https://docs.kuberocketci.io/blog/integrating-oidc-authentication-microsoft-entra-aws-eks/"><link data-rh="true" rel="alternate" href="https://docs.kuberocketci.io/blog/integrating-oidc-authentication-microsoft-entra-aws-eks/" hreflang="en"><link data-rh="true" rel="alternate" href="https://docs.kuberocketci.io/blog/integrating-oidc-authentication-microsoft-entra-aws-eks/" hreflang="x-default"><link data-rh="true" rel="preconnect" href="https://ZYN6QI47ZW-dsn.algolia.net" crossorigin="anonymous"><script data-rh="true" type="application/ld+json">{"@context":"https://schema.org","@type":"BlogPosting","@id":"https://docs.kuberocketci.io/blog/integrating-oidc-authentication-microsoft-entra-aws-eks","mainEntityOfPage":"https://docs.kuberocketci.io/blog/integrating-oidc-authentication-microsoft-entra-aws-eks","url":"https://docs.kuberocketci.io/blog/integrating-oidc-authentication-microsoft-entra-aws-eks","headline":"Integrating OIDC Authentication with Microsoft Entra in AWS EKS","name":"Integrating OIDC Authentication with Microsoft Entra in AWS EKS","description":"Learn how to implement Single Sign-On (SSO) using OpenID Connect (OIDC) and Microsoft Entra to enhance security and streamline authentication processes in Amazon Elastic Kubernetes Service (AWS EKS).","datePublished":"2024-12-03T00:00:00.000Z","author":{"@type":"Person","name":"Daniil Nedostup","description":"Systems Engineer","url":"https://github.com/daniil-nedostup","image":"https://github.com/daniil-nedostup.png"},"image":{"@type":"ImageObject","@id":"https://i.imgur.com/mErPwqL.png","url":"https://i.imgur.com/mErPwqL.png","contentUrl":"https://i.imgur.com/mErPwqL.png","caption":"title image for the blog post: Integrating OIDC Authentication with Microsoft Entra in AWS EKS"},"keywords":["KubeRocketCI","Microsoft Entra","AWS EKS","Kubernetes","AWS","EKS","IAM","OpenID Connect","Single Sign-On","Security","Authentication","Authorization"],"isPartOf":{"@type":"Blog","@id":"https://docs.kuberocketci.io/blog","name":"Blog: CI/CD Insights, DevOps and Kubernetes Guides"}}</script><link rel="alternate" type="application/rss+xml" href="/blog/rss.xml" title="KubeRocketCI RSS Feed">
<link rel="alternate" type="application/atom+xml" href="/blog/atom.xml" title="KubeRocketCI Atom Feed">
<link rel="alternate" type="application/json" href="/blog/feed.json" title="KubeRocketCI JSON Feed">




<link rel="search" type="application/opensearchdescription+xml" title="KubeRocketCI" href="/opensearch.xml">


<script type="application/ld+json">{"@context":"https://schema.org","@graph":[{"@id":"https://docs.kuberocketci.io","@type":"WebSite","url":"https://docs.kuberocketci.io","name":"KubeRocketCI Documentation","description":"Explore KubeRocketCI Documentation for detailed guides, tutorials, and insights into KubeRocketCI CI/CD flow, platform components, and add-ons. Learn how to enhance your DevOps practices with KubeRocketCI.","sameAs":["https://medium.com/epam-delivery-platform","https://hub.docker.com/u/epamedp","https://epam.github.io/edp-install/"],"copyrightHolder":{"@id":"https://docs.kuberocketci.io/docs/about-platform/"},"publisher":{"@id":"https://docs.kuberocketci.io/docs/about-platform/"},"potentialAction":{"@type":"SearchAction","target":{"@type":"EntryPoint","urlTemplate":"https://docs.kuberocketci.io/search?q={search_term_string}"},"query-input":"required name=search_term_string"},"inLanguage":"en-UK"}]}</script>
<link rel="stylesheet" href="/css/cookie-consent.css">
<script src="https://cookie-cdn.cookiepro.com/consent/0194a78c-7932-70b9-abdc-9d8096b5f261/OtAutoBlock.js"></script>
<script src="https://cookie-cdn.cookiepro.com/scripttemplates/otSDKStub.js" charset="UTF-8" data-domain-script="0194a78c-7932-70b9-abdc-9d8096b5f261"></script>
<script>function OptanonWrapper(){}</script>
<link rel="preconnect" href="https://www.googletagmanager.com">
<script src="https://www.googletagmanager.com/gtm.js?id=GTM-527T2HLF" async="true"></script>
<script>window.dataLayer=window.dataLayer||[]</script>
<script>!function(e,t,a,n,g){e[n]=e[n]||[],e[n].push({"gtm.start":(new Date).getTime(),event:"gtm.js"});var m=t.getElementsByTagName(a)[0],r=t.createElement(a);r.async=!0,r.src="https://www.googletagmanager.com/gtm.js?id=GTM-527T2HLF",m.parentNode.insertBefore(r,m)}(window,document,"script","dataLayer")</script><link rel="stylesheet" href="/assets/css/styles.4fa8fdbf.css">
<script src="/assets/js/runtime~main.5ece271c.js" defer="defer"></script>
<script src="/assets/js/main.96013670.js" defer="defer"></script>
</head>
<body class="navigation-with-keyboard">
<script>!function(){function t(t){document.documentElement.setAttribute("data-theme",t)}var e=function(){try{return new URLSearchParams(window.location.search).get("docusaurus-theme")}catch(t){}}()||function(){try{return window.localStorage.getItem("theme")}catch(t){}}();t(null!==e?e:"light")}(),function(){try{const a=new URLSearchParams(window.location.search).entries();for(var[t,e]of a)if(t.startsWith("docusaurus-data-")){var n=t.replace("docusaurus-data-","data-");document.documentElement.setAttribute(n,e)}}catch(t){}}(),document.documentElement.setAttribute("data-announcement-bar-initially-dismissed",function(){try{return"true"===localStorage.getItem("docusaurus.announcement.dismiss")}catch(t){}return!1}())</script><div id="__docusaurus"><script type="application/ld+json">[{"@context":"https://schema.org","@type":"BreadcrumbList","name":"Archive breadcrumb","itemListElement":[{"@type":"ListItem","position":1,"name":"Home","item":"https://docs.kuberocketci.io"},{"@type":"ListItem","position":2,"name":"Archive","item":"https://docs.kuberocketci.io/blog/archive/"},{"@type":"ListItem","position":3,"name":"Integrating OIDC Authentication with Microsoft Entra in AWS EKS"}]},{"@context":"https://schema.org","@type":"BreadcrumbList","name":"Tags KubeRocketCI breadcrumb","itemListElement":[{"@type":"ListItem","position":1,"name":"Home","item":"https://docs.kuberocketci.io"},{"@type":"ListItem","position":2,"name":"Tags","item":"https://docs.kuberocketci.io/blog/tags/"},{"@type":"ListItem","position":3,"name":"KubeRocketCI","item":"https://docs.kuberocketci.io/blog/tags/kube-rocket-ci"},{"@type":"ListItem","position":4,"name":"Integrating OIDC Authentication with Microsoft Entra in AWS EKS"}]},{"@context":"https://schema.org","@type":"BreadcrumbList","name":"Tags AWS EKS breadcrumb","itemListElement":[{"@type":"ListItem","position":1,"name":"Home","item":"https://docs.kuberocketci.io"},{"@type":"ListItem","position":2,"name":"Tags","item":"https://docs.kuberocketci.io/blog/tags/"},{"@type":"ListItem","position":3,"name":"AWS EKS","item":"https://docs.kuberocketci.io/blog/tags/aws-eks"},{"@type":"ListItem","position":4,"name":"Integrating OIDC Authentication with Microsoft Entra in AWS EKS"}]},{"@context":"https://schema.org","@type":"BreadcrumbList","name":"Tags SSO breadcrumb","itemListElement":[{"@type":"ListItem","position":1,"name":"Home","item":"https://docs.kuberocketci.io"},{"@type":"ListItem","position":2,"name":"Tags","item":"https://docs.kuberocketci.io/blog/tags/"},{"@type":"ListItem","position":3,"name":"SSO","item":"https://docs.kuberocketci.io/blog/tags/sso"},{"@type":"ListItem","position":4,"name":"Integrating OIDC Authentication with Microsoft Entra in AWS EKS"}]},{"@context":"https://schema.org","@type":"BreadcrumbList","name":"Tags Microsoft Entra breadcrumb","itemListElement":[{"@type":"ListItem","position":1,"name":"Home","item":"https://docs.kuberocketci.io"},{"@type":"ListItem","position":2,"name":"Tags","item":"https://docs.kuberocketci.io/blog/tags/"},{"@type":"ListItem","position":3,"name":"Microsoft Entra","item":"https://docs.kuberocketci.io/blog/tags/microsoft-entra"},{"@type":"ListItem","position":4,"name":"Integrating OIDC Authentication with Microsoft Entra in AWS EKS"}]},{"@context":"https://schema.org","@type":"BreadcrumbList","name":"Tags OIDC breadcrumb","itemListElement":[{"@type":"ListItem","position":1,"name":"Home","item":"https://docs.kuberocketci.io"},{"@type":"ListItem","position":2,"name":"Tags","item":"https://docs.kuberocketci.io/blog/tags/"},{"@type":"ListItem","position":3,"name":"OIDC","item":"https://docs.kuberocketci.io/blog/tags/oidc"},{"@type":"ListItem","position":4,"name":"Integrating OIDC Authentication with Microsoft Entra in AWS EKS"}]},{"@context":"https://schema.org","@type":"BreadcrumbList","name":"Tags Kubernetes breadcrumb","itemListElement":[{"@type":"ListItem","position":1,"name":"Home","item":"https://docs.kuberocketci.io"},{"@type":"ListItem","position":2,"name":"Tags","item":"https://docs.kuberocketci.io/blog/tags/"},{"@type":"ListItem","position":3,"name":"Kubernetes","item":"https://docs.kuberocketci.io/blog/tags/kubernetes"},{"@type":"ListItem","position":4,"name":"Integrating OIDC Authentication with Microsoft Entra in AWS EKS"}]},{"@context":"https://schema.org","@type":"BreadcrumbList","name":"Tags Security breadcrumb","itemListElement":[{"@type":"ListItem","position":1,"name":"Home","item":"https://docs.kuberocketci.io"},{"@type":"ListItem","position":2,"name":"Tags","item":"https://docs.kuberocketci.io/blog/tags/"},{"@type":"ListItem","position":3,"name":"Security","item":"https://docs.kuberocketci.io/blog/tags/security"},{"@type":"ListItem","position":4,"name":"Integrating OIDC Authentication with Microsoft Entra in AWS EKS"}]}]</script><div role="region" aria-label="Skip to main content"><a class="skipToContent_fXgn" href="#__docusaurus_skipToContent_fallback">Skip to main content</a></div><div class="announcementBar_mb4j" role="banner"><div class="announcementBarPlaceholder_vyr4"></div><div class="content_knG7 announcementBarContent_xLdY">KubeRocketCI Team Supports Ukraine 🇺🇦. In solidarity, we ask that you consider financially supporting the organizations below: <a href="https://epamuafund.pinkaloo.com/causes/159bdd2f71854adf8ed5251fe26d2fe0" target="_blank">EPAM’s Global Partners for the Ukraine Humanitarian Crisis</a></div><button type="button" aria-label="Close" class="clean-btn close closeButton_CVFx announcementBarClose_gvF7"><svg viewBox="0 0 15 15" width="14" height="14"><g stroke="currentColor" stroke-width="3.1"><path d="M.75.75l13.5 13.5M14.25.75L.75 14.25"></path></g></svg></button></div><nav aria-label="Main" class="navbar navbar--fixed-top"><div class="navbar__inner"><div class="navbar__items"><button aria-label="Toggle navigation bar" aria-expanded="false" class="navbar__toggle clean-btn" type="button"><svg width="30" height="30" viewBox="0 0 30 30" aria-hidden="true"><path stroke="currentColor" stroke-linecap="round" stroke-miterlimit="10" stroke-width="2" d="M4 7h22M4 15h22M4 23h22"></path></svg></button><a class="navbar__brand" href="/"><div class="navbar__logo"><img src="/img/logo.svg" alt="KubeRocketCI Logo" class="themedComponent_mlkZ themedComponent--light_NVdE"><img src="/img/logo.svg" alt="KubeRocketCI Logo" class="themedComponent_mlkZ themedComponent--dark_xIcU"></div><b class="navbar__title text--truncate">KubeRocketCI</b></a><a class="navbar__item navbar__link" href="/docs/about-platform/">Getting Started</a><div class="navbar__item dropdown dropdown--hoverable"><a href="#" aria-haspopup="true" aria-expanded="false" role="button" class="navbar__link">Guides</a><ul class="dropdown__menu"><li><a class="dropdown__link" href="/docs/operator-guide/">Operator Guide</a></li><li><a class="dropdown__link" href="/docs/user-guide/">User Guide</a></li><li><a class="dropdown__link" href="/docs/developer-guide/">Developer Guide</a></li></ul></div><a class="navbar__item navbar__link" href="/docs/use-cases/">Use Cases</a><a class="navbar__item navbar__link" href="/faq/artifacts/">FAQ</a><a class="navbar__item navbar__link" href="/pricing/">Pricing</a></div><div class="navbar__items navbar__items--right"><a class="navbar__item navbar__link" href="/docs/api/overview/">API Reference</a><div class="navbar__item dropdown dropdown--hoverable dropdown--right"><a class="navbar__link" aria-haspopup="true" aria-expanded="false" role="button" href="/docs/about-platform/">3.10</a><ul class="dropdown__menu"><li><a class="dropdown__link" href="/docs/next/about-platform/">3.11-dev</a></li><li><a class="dropdown__link" href="/docs/about-platform/">3.10</a></li><li><a class="dropdown__link" href="/docs/3.9/about-platform/">3.9</a></li><li class=""><hr style="margin: 0.1rem"></li><li><a href="https://github.com/epam/edp-install/blob/master/RELEASES.md" target="_blank" rel="noopener noreferrer" class="dropdown__link">Releases<svg width="12" height="12" aria-hidden="true" viewBox="0 0 24 24" class="iconExternalLink_nPIU"><path fill="currentColor" d="M21 13v10h-21v-19h12v2h-10v15h17v-8h2zm3-12h-10.988l4.035 4-6.977 7.07 2.828 2.828 6.977-7.07 4.125 4.172v-11z"></path></svg></a></li></ul></div><a href="https://github.com/kuberocketci/docs" target="_blank" rel="noopener noreferrer" class="navbar__item navbar__link">GitHub<svg width="13.5" height="13.5" aria-hidden="true" viewBox="0 0 24 24" class="iconExternalLink_nPIU"><path fill="currentColor" d="M21 13v10h-21v-19h12v2h-10v15h17v-8h2zm3-12h-10.988l4.035 4-6.977 7.07 2.828 2.828 6.977-7.07 4.125 4.172v-11z"></path></svg></a><div class="toggle_vylO colorModeToggle_DEke"><button class="clean-btn toggleButton_gllP toggleButtonDisabled_aARS" type="button" disabled="" title="Switch between dark and light mode (currently light mode)" aria-label="Switch between dark and light mode (currently light mode)" aria-live="polite" aria-pressed="false"><svg viewBox="0 0 24 24" width="24" height="24" class="lightToggleIcon_pyhR"><path fill="currentColor" d="M12,9c1.65,0,3,1.35,3,3s-1.35,3-3,3s-3-1.35-3-3S10.35,9,12,9 M12,7c-2.76,0-5,2.24-5,5s2.24,5,5,5s5-2.24,5-5 S14.76,7,12,7L12,7z M2,13l2,0c0.55,0,1-0.45,1-1s-0.45-1-1-1l-2,0c-0.55,0-1,0.45-1,1S1.45,13,2,13z M20,13l2,0c0.55,0,1-0.45,1-1 s-0.45-1-1-1l-2,0c-0.55,0-1,0.45-1,1S19.45,13,20,13z M11,2v2c0,0.55,0.45,1,1,1s1-0.45,1-1V2c0-0.55-0.45-1-1-1S11,1.45,11,2z M11,20v2c0,0.55,0.45,1,1,1s1-0.45,1-1v-2c0-0.55-0.45-1-1-1C11.45,19,11,19.45,11,20z M5.99,4.58c-0.39-0.39-1.03-0.39-1.41,0 c-0.39,0.39-0.39,1.03,0,1.41l1.06,1.06c0.39,0.39,1.03,0.39,1.41,0s0.39-1.03,0-1.41L5.99,4.58z M18.36,16.95 c-0.39-0.39-1.03-0.39-1.41,0c-0.39,0.39-0.39,1.03,0,1.41l1.06,1.06c0.39,0.39,1.03,0.39,1.41,0c0.39-0.39,0.39-1.03,0-1.41 L18.36,16.95z M19.42,5.99c0.39-0.39,0.39-1.03,0-1.41c-0.39-0.39-1.03-0.39-1.41,0l-1.06,1.06c-0.39,0.39-0.39,1.03,0,1.41 s1.03,0.39,1.41,0L19.42,5.99z M7.05,18.36c0.39-0.39,0.39-1.03,0-1.41c-0.39-0.39-1.03-0.39-1.41,0l-1.06,1.06 c-0.39,0.39-0.39,1.03,0,1.41s1.03,0.39,1.41,0L7.05,18.36z"></path></svg><svg viewBox="0 0 24 24" width="24" height="24" class="darkToggleIcon_wfgR"><path fill="currentColor" d="M9.37,5.51C9.19,6.15,9.1,6.82,9.1,7.5c0,4.08,3.32,7.4,7.4,7.4c0.68,0,1.35-0.09,1.99-0.27C17.45,17.19,14.93,19,12,19 c-3.86,0-7-3.14-7-7C5,9.07,6.81,6.55,9.37,5.51z M12,3c-4.97,0-9,4.03-9,9s4.03,9,9,9s9-4.03,9-9c0-0.46-0.04-0.92-0.1-1.36 c-0.98,1.37-2.58,2.26-4.4,2.26c-2.98,0-5.4-2.42-5.4-5.4c0-1.81,0.89-3.42,2.26-4.4C12.92,3.04,12.46,3,12,3L12,3z"></path></svg></button></div><div class="navbarSearchContainer_Bca1"><button type="button" class="DocSearch DocSearch-Button" aria-label="Search (Command+K)"><span class="DocSearch-Button-Container"><svg width="20" height="20" class="DocSearch-Search-Icon" viewBox="0 0 20 20" aria-hidden="true"><path d="M14.386 14.386l4.0877 4.0877-4.0877-4.0877c-2.9418 2.9419-7.7115 2.9419-10.6533 0-2.9419-2.9418-2.9419-7.7115 0-10.6533 2.9418-2.9419 7.7115-2.9419 10.6533 0 2.9419 2.9418 2.9419 7.7115 0 10.6533z" stroke="currentColor" fill="none" fill-rule="evenodd" stroke-linecap="round" stroke-linejoin="round"></path></svg><span class="DocSearch-Button-Placeholder">Search</span></span><span class="DocSearch-Button-Keys"></span></button></div></div></div><div role="presentation" class="navbar-sidebar__backdrop"></div></nav><div id="__docusaurus_skipToContent_fallback" class="main-wrapper mainWrapper_z2l0"><div class="container margin-vert--lg"><div class="row"><aside class="col col--3"><nav class="sidebar_re4s thin-scrollbar" aria-label="Blog recent posts navigation"><div class="sidebarItemTitle_pO2u margin-bottom--md">Recent posts</div><div role="group"><h3 class="yearGroupHeading_rMGB">2024</h3><ul class="sidebarItemList_Yudw clean-list"><li class="sidebarItem__DBe"><a aria-current="page" class="sidebarItemLink_mo7H sidebarItemLinkActive_I1ZP" href="/blog/integrating-oidc-authentication-microsoft-entra-aws-eks/">Integrating OIDC Authentication with Microsoft Entra in AWS EKS</a></li><li class="sidebarItem__DBe"><a class="sidebarItemLink_mo7H" href="/blog/advanced-aws-eks-management-oidc-keycloak/">Advanced AWS EKS Management: Implementing SSO via OIDC and Keycloak</a></li></ul></div></nav></aside><main class="col col--7"><article class=""><header><h1 class="title_f1Hy">Integrating OIDC Authentication with Microsoft Entra in AWS EKS</h1><div class="container_mt6G margin-vert--md"><time datetime="2024-12-03T00:00:00.000Z">December 3, 2024</time> · <!-- -->13 min read</div><div class="margin-top--md margin-bottom--sm row"><div class="col col--12 authorCol_Hf19"><div class="avatar margin-bottom--sm"><a class="avatar__photo-link" href="/blog/authors/daniilnedostup/"><img class="avatar__photo authorImage_XqGP" src="https://github.com/daniil-nedostup.png" alt="Daniil Nedostup"></a><div class="avatar__intro authorDetails_lV9A"><div class="avatar__name"><a href="/blog/authors/daniilnedostup/"><span class="authorName_yefp">Daniil Nedostup</span></a></div><small class="authorTitle_nd0D" title="Systems Engineer">Systems Engineer</small><div class="authorSocials_rSDt"><a href="https://www.linkedin.com/in/daniil-nedostup/" target="_blank" rel="noopener noreferrer" class="authorSocialLink_owbf" title="LinkedIn"><svg xmlns="http://www.w3.org/2000/svg" width="1em" height="1em" preserveAspectRatio="xMidYMid" viewBox="0 0 256 256" class="authorSocialLink_owbf"><path d="M218.123 218.127h-37.931v-59.403c0-14.165-.253-32.4-19.728-32.4-19.756 0-22.779 15.434-22.779 31.369v60.43h-37.93V95.967h36.413v16.694h.51a39.907 39.907 0 0 1 35.928-19.733c38.445 0 45.533 25.288 45.533 58.186l-.016 67.013ZM56.955 79.27c-12.157.002-22.014-9.852-22.016-22.009-.002-12.157 9.851-22.014 22.008-22.016 12.157-.003 22.014 9.851 22.016 22.008A22.013 22.013 0 0 1 56.955 79.27m18.966 138.858H37.95V95.967h37.97v122.16ZM237.033.018H18.89C8.58-.098.125 8.161-.001 18.471v219.053c.122 10.315 8.576 18.582 18.89 18.474h218.144c10.336.128 18.823-8.139 18.966-18.474V18.454c-.147-10.33-8.635-18.588-18.966-18.453" fill="#0A66C2"></path></svg></a><a href="https://github.com/daniil-nedostup" target="_blank" rel="noopener noreferrer" class="authorSocialLink_owbf" title="GitHub"><svg xmlns="http://www.w3.org/2000/svg" width="1em" height="1em" viewBox="0 0 256 250" preserveAspectRatio="xMidYMid" style="--dark:#000;--light:#fff" class="authorSocialLink_owbf githubSvg_Uu4N"><path d="M128.001 0C57.317 0 0 57.307 0 128.001c0 56.554 36.676 104.535 87.535 121.46 6.397 1.185 8.746-2.777 8.746-6.158 0-3.052-.12-13.135-.174-23.83-35.61 7.742-43.124-15.103-43.124-15.103-5.823-14.795-14.213-18.73-14.213-18.73-11.613-7.944.876-7.78.876-7.78 12.853.902 19.621 13.19 19.621 13.19 11.417 19.568 29.945 13.911 37.249 10.64 1.149-8.272 4.466-13.92 8.127-17.116-28.431-3.236-58.318-14.212-58.318-63.258 0-13.975 5-25.394 13.188-34.358-1.329-3.224-5.71-16.242 1.24-33.874 0 0 10.749-3.44 35.21 13.121 10.21-2.836 21.16-4.258 32.038-4.307 10.878.049 21.837 1.47 32.066 4.307 24.431-16.56 35.165-13.12 35.165-13.12 6.967 17.63 2.584 30.65 1.255 33.873 8.207 8.964 13.173 20.383 13.173 34.358 0 49.163-29.944 59.988-58.447 63.157 4.591 3.972 8.682 11.762 8.682 23.704 0 17.126-.148 30.91-.148 35.126 0 3.407 2.304 7.398 8.792 6.14C219.37 232.5 256 184.537 256 128.002 256 57.307 198.691 0 128.001 0Zm-80.06 182.34c-.282.636-1.283.827-2.194.39-.929-.417-1.45-1.284-1.15-1.922.276-.655 1.279-.838 2.205-.399.93.418 1.46 1.293 1.139 1.931Zm6.296 5.618c-.61.566-1.804.303-2.614-.591-.837-.892-.994-2.086-.375-2.66.63-.566 1.787-.301 2.626.591.838.903 1 2.088.363 2.66Zm4.32 7.188c-.785.545-2.067.034-2.86-1.104-.784-1.138-.784-2.503.017-3.05.795-.547 2.058-.055 2.861 1.075.782 1.157.782 2.522-.019 3.08Zm7.304 8.325c-.701.774-2.196.566-3.29-.49-1.119-1.032-1.43-2.496-.726-3.27.71-.776 2.213-.558 3.315.49 1.11 1.03 1.45 2.505.701 3.27Zm9.442 2.81c-.31 1.003-1.75 1.459-3.199 1.033-1.448-.439-2.395-1.613-2.103-2.626.301-1.01 1.747-1.484 3.207-1.028 1.446.436 2.396 1.602 2.095 2.622Zm10.744 1.193c.036 1.055-1.193 1.93-2.715 1.95-1.53.034-2.769-.82-2.786-1.86 0-1.065 1.202-1.932 2.733-1.958 1.522-.03 2.768.818 2.768 1.868Zm10.555-.405c.182 1.03-.875 2.088-2.387 2.37-1.485.271-2.861-.365-3.05-1.386-.184-1.056.893-2.114 2.376-2.387 1.514-.263 2.868.356 3.061 1.403Z"></path></svg></a></div></div></div></div></div></header><div id="__blog-post-container" class="markdown"><p>In modern cloud environments, secure and efficient access management is essential, especially for platforms like Amazon EKS. This blog will guide you through integrating OpenID Connect (OIDC) authentication using Microsoft Entra, making it easier to manage access to your EKS clusters and KubeRocketCI Portal. By implementing this approach, you can simplify user authentication while ensuring strong security controls. Whether you&#x27;re improving compliance or streamlining access for your team, this integration is a practical solution to enhance your cloud-native workflows.</p>
<h2 class="anchor anchorWithStickyNavbar_LWe7" id="prerequisites">Prerequisites<a href="#prerequisites" class="hash-link" aria-label="Direct link to Prerequisites" title="Direct link to Prerequisites">​</a></h2>
<p>Before you begin, ensure you have the following:</p>
<ul>
<li>Access to the <a href="https://entra.microsoft.com/?feature.msaljs=true#home" target="_blank" rel="noopener noreferrer">Microsoft Entra Admin Center</a> with administrative privileges.</li>
<li>A running <a href="https://docs.aws.amazon.com/eks/latest/userguide/create-cluster.html" target="_blank" rel="noopener noreferrer">AWS EKS</a> cluster with the necessary permissions for access and management.</li>
<li>The <a href="https://github.com/int128/kubelogin" target="_blank" rel="noopener noreferrer">kubelogin</a> plugin installed for authenticating to the EKS cluster using OIDC.</li>
<li>The <a href="https://kubernetes.io/docs/tasks/tools/#kubectl" target="_blank" rel="noopener noreferrer">kubectl</a> CLI tool installed.</li>
<li>The <a href="https://aws.amazon.com/cli/" target="_blank" rel="noopener noreferrer">aws cli</a> tool installed.</li>
</ul>
<h2 class="anchor anchorWithStickyNavbar_LWe7" id="understanding-sso-oidc-and-microsoft-entra">Understanding SSO, OIDC, and Microsoft Entra<a href="#understanding-sso-oidc-and-microsoft-entra" class="hash-link" aria-label="Direct link to Understanding SSO, OIDC, and Microsoft Entra" title="Direct link to Understanding SSO, OIDC, and Microsoft Entra">​</a></h2>
<p>In the context of enhancing digital security and user experience, we prioritize the integration of three key elements: Single Sign-On (SSO), OpenID Connect (OIDC), and Microsoft Entra. Here’s how they connect:</p>
<ul>
<li>
<p><strong>Single Sign-On (SSO)</strong> serves as the foundation, enabling users to access multiple applications with one set of login credentials, significantly simplifying the authentication process.</p>
</li>
<li>
<p><strong>OpenID Connect (OIDC)</strong> builds on the SSO framework by providing an authentication layer, which uses straightforward identity verification to ensure secure and seamless access across services.</p>
</li>
<li>
<p><strong>Microsoft Entra</strong> (formerly known as <strong>Azure Active Directory</strong>) is Microsoft&#x27;s comprehensive identity and access management solution. It supports the implementation of both Single Sign-On (SSO) and OpenID Connect (OIDC), enabling organizations to securely manage user identities and enforce access controls. With its reliable set of tools, Microsoft Entra simplifies authentication, enhances security, and ensures seamless access to applications and services, making it an essential platform for modern identity management.</p>
</li>
</ul>
<p>Together, these technologies streamline the login process, reinforce security, and enhance the user experience by allowing secure, seamless navigation across our digital ecosystem.</p>
<h3 class="anchor anchorWithStickyNavbar_LWe7" id="microsoft-entra-overview">Microsoft Entra Overview<a href="#microsoft-entra-overview" class="hash-link" aria-label="Direct link to Microsoft Entra Overview" title="Direct link to Microsoft Entra Overview">​</a></h3>
<p>Microsoft Entra, formerly known as Azure Active Directory (Azure AD), is a modern identity and access management solution designed for secure access to applications and services. It provides features like Single Sign-On (SSO), identity federation, and seamless integration with on-premises directories such as LDAP and Active Directory. Microsoft Entra supports industry-standard protocols, including OpenID Connect (OIDC), OAuth 2.0, and Security Assertion Markup Language (SAML) 2.0, making it a versatile solution for managing user identities. By leveraging Microsoft Entra, organizations can enhance security, simplify user access, and avoid the complexities of building identity management features from scratch. For more details, see the <a href="https://learn.microsoft.com/en-gb/entra/identity" target="_blank" rel="noopener noreferrer">Microsoft Entra official documentation</a>.</p>
<h2 class="anchor anchorWithStickyNavbar_LWe7" id="create-a-new-microsoft-entra-tenant">Create a new Microsoft Entra Tenant<a href="#create-a-new-microsoft-entra-tenant" class="hash-link" aria-label="Direct link to Create a new Microsoft Entra Tenant" title="Direct link to Create a new Microsoft Entra Tenant">​</a></h2>
<p>To get started with Microsoft Entra, you need to create a new tenant in the Microsoft Entra Admin Center. Follow these steps:</p>
<ol>
<li>
<p>Log in to the <a href="https://entra.microsoft.com/?feature.msaljs=true#home" target="_blank" rel="noopener noreferrer">Microsoft Entra Admin Center</a> using your Microsoft account.</p>
<p><img decoding="async" loading="lazy" alt="Microsoft Entra Admin Center" src="/assets/images/microsoft-entra-admin-center-8a597425e8e1e33a8867e316ee37be41.png" width="3364" height="1648" class="img_ev3q"></p>
</li>
<li>
<p>In the left sidebar menu, select <strong>Overview</strong> section and then navigate to <strong>Manage tenants</strong> tab.</p>
<p><img decoding="async" loading="lazy" alt="Manage Tenants" src="/assets/images/manage-tenants-c260f4975163bf0c5cb83eeb99217660.png" width="3364" height="1648" class="img_ev3q"></p>
</li>
<li>
<p>Click on <strong>Create</strong> button to create a new tenant.</p>
<p><img decoding="async" loading="lazy" alt="Create Tenant" src="/assets/images/create-tenant-ea455de07150c662e89cc2896be821ff.png" width="3364" height="1648" class="img_ev3q"></p>
</li>
<li>
<p>Select the configuration type <strong>Workforce</strong>.</p>
<p><img decoding="async" loading="lazy" alt="Configuration Type" src="/assets/images/configuration-type-31ef85a58475500f22b83a05c93b4276.png" width="3364" height="1648" class="img_ev3q"></p>
</li>
<li>
<p>Fill in the fields for <strong>Tenant Name</strong>, <strong>Domain Name</strong>, and <strong>Location</strong>.</p>
<div class="theme-admonition theme-admonition-note admonition_xJq3 alert alert--secondary"><div class="admonitionHeading_Gvgb"><span class="admonitionIcon_Rf37"><svg viewBox="0 0 14 16"><path fill-rule="evenodd" d="M6.3 5.69a.942.942 0 0 1-.28-.7c0-.28.09-.52.28-.7.19-.18.42-.28.7-.28.28 0 .52.09.7.28.18.19.28.42.28.7 0 .28-.09.52-.28.7a1 1 0 0 1-.7.3c-.28 0-.52-.11-.7-.3zM8 7.99c-.02-.25-.11-.48-.31-.69-.2-.19-.42-.3-.69-.31H6c-.27.02-.48.13-.69.31-.2.2-.3.44-.31.69h1v3c.02.27.11.5.31.69.2.2.42.31.69.31h1c.27 0 .48-.11.69-.31.2-.19.3-.42.31-.69H8V7.98v.01zM7 2.3c-3.14 0-5.7 2.54-5.7 5.68 0 3.14 2.56 5.7 5.7 5.7s5.7-2.55 5.7-5.7c0-3.15-2.56-5.69-5.7-5.69v.01zM7 .98c3.86 0 7 3.14 7 7s-3.14 7-7 7-7-3.12-7-7 3.14-7 7-7z"></path></svg></span>note</div><div class="admonitionContent_BuS1"><p>The <strong>Tenant Name</strong> and <strong>Domain Name</strong> <code>kuberocketci</code> are used as a demonstration examples. In your case, it is recommended to choose names that align with your organization&#x27;s specific needs and naming conventions.</p></div></div>
<p><img decoding="async" loading="lazy" alt="Tenant Details" src="/assets/images/tenant-details-6753dbbdbe872963be3e49632442654b.png" width="3364" height="1648" class="img_ev3q"></p>
</li>
<li>
<p>The new tenant will be created, and you can start configuring it for OIDC integration. Ensure you have switched to the new tenant.</p>
</li>
</ol>
<h2 class="anchor anchorWithStickyNavbar_LWe7" id="creating-and-configuring-oidc-application-in-microsoft-entra">Creating and Configuring OIDC Application in Microsoft Entra<a href="#creating-and-configuring-oidc-application-in-microsoft-entra" class="hash-link" aria-label="Direct link to Creating and Configuring OIDC Application in Microsoft Entra" title="Direct link to Creating and Configuring OIDC Application in Microsoft Entra">​</a></h2>
<p>After creating the tenant, you need to set up an OIDC Application in Microsoft Entra. Here&#x27;s how you can do it:</p>
<ol>
<li>
<p>In the Microsoft Entra Admin Center, in the left sidebar menu, select <strong>Applications</strong> and then click on <strong>App registrations</strong>.</p>
<p><img decoding="async" loading="lazy" alt="App Registrations" src="/assets/images/app-registrations-c04b119572cc459069182f6aeab95995.png" width="3364" height="1648" class="img_ev3q"></p>
</li>
<li>
<p>Click on the <strong>New registration</strong> button to create a new application.</p>
<p><img decoding="async" loading="lazy" alt="New Registration" src="/assets/images/new-registration-63846c96d5ff493abbc9903c638fb6cf.png" width="3364" height="1648" class="img_ev3q"></p>
</li>
<li>
<p>Fill in the details for the application, such as <strong>Name</strong>, <strong>Supported account types</strong>, and <strong>Redirect URI</strong> (<code>http://localhost:8000/</code>).</p>
<div class="theme-admonition theme-admonition-note admonition_xJq3 alert alert--secondary"><div class="admonitionHeading_Gvgb"><span class="admonitionIcon_Rf37"><svg viewBox="0 0 14 16"><path fill-rule="evenodd" d="M6.3 5.69a.942.942 0 0 1-.28-.7c0-.28.09-.52.28-.7.19-.18.42-.28.7-.28.28 0 .52.09.7.28.18.19.28.42.28.7 0 .28-.09.52-.28.7a1 1 0 0 1-.7.3c-.28 0-.52-.11-.7-.3zM8 7.99c-.02-.25-.11-.48-.31-.69-.2-.19-.42-.3-.69-.31H6c-.27.02-.48.13-.69.31-.2.2-.3.44-.31.69h1v3c.02.27.11.5.31.69.2.2.42.31.69.31h1c.27 0 .48-.11.69-.31.2-.19.3-.42.31-.69H8V7.98v.01zM7 2.3c-3.14 0-5.7 2.54-5.7 5.68 0 3.14 2.56 5.7 5.7 5.7s5.7-2.55 5.7-5.7c0-3.15-2.56-5.69-5.7-5.69v.01zM7 .98c3.86 0 7 3.14 7 7s-3.14 7-7 7-7-3.12-7-7 3.14-7 7-7z"></path></svg></span>note</div><div class="admonitionContent_BuS1"><p>The <strong>Name</strong> <code>kuberocketci</code> is used as a demonstration example. In your case, it is recommended to choose a name that aligns with your application&#x27;s specific needs and naming conventions (e.g. your AWS EKS cluster name).</p></div></div>
<p><img decoding="async" loading="lazy" alt="Application Details" src="/assets/images/application-details-b0691226247a0b3f611936922040e4b6.png" width="3364" height="1648" class="img_ev3q"></p>
</li>
<li>
<p>In the created application, navigate to the <strong>Authentication</strong> section from the left sidebar menu. In the <strong>Implicit grant and hybrid flows</strong> section, select <strong>ID tokens</strong> for the token type. In the <strong>Allow public client flows</strong> section, set the value to <strong>No</strong>.</p>
<p><img decoding="async" loading="lazy" alt="Authentication Settings" src="/assets/images/authentication-settings-b3ad780dbc75b519a96e4138242666dd.png" width="3364" height="1647" class="img_ev3q"></p>
</li>
<li>
<p>Navigate to the <strong>Certificates &amp; secrets</strong> section from the left sidebar menu. In the <strong>Client secrets</strong> tab, click on the <strong>New client secret</strong> button to create a new secret.</p>
<p><img decoding="async" loading="lazy" alt="Client Secret" src="/assets/images/client-secret-2adb6894937ed5c8e84c077423b51fbb.png" width="3364" height="1647" class="img_ev3q"></p>
</li>
<li>
<p>Copy the generated client secret value and store it securely.</p>
<p><img decoding="async" loading="lazy" alt="Client Secret Value" src="/assets/images/client-secret-value-26326b1338acafd94f8e5a647f6407f4.png" width="3364" height="1647" class="img_ev3q"></p>
</li>
<li>
<p>Navigate to the <strong>Token configuration</strong> section and click on <strong>Add group claim</strong> button. Choose the group type as <strong>Security Groups</strong> and for the ID token type, select <strong>Group ID</strong>.</p>
<p><img decoding="async" loading="lazy" alt="Token Configuration" src="/assets/images/token-configuration-0fa9c3f0e471ac1b1ffcf11f69bee22c.png" width="3364" height="1647" class="img_ev3q"></p>
</li>
<li>
<p>(Optional) Additionally, add an optional <strong>upn</strong> claim in the <strong>Token configuration</strong> section.</p>
<div class="theme-admonition theme-admonition-note admonition_xJq3 alert alert--secondary"><div class="admonitionHeading_Gvgb"><span class="admonitionIcon_Rf37"><svg viewBox="0 0 14 16"><path fill-rule="evenodd" d="M6.3 5.69a.942.942 0 0 1-.28-.7c0-.28.09-.52.28-.7.19-.18.42-.28.7-.28.28 0 .52.09.7.28.18.19.28.42.28.7 0 .28-.09.52-.28.7a1 1 0 0 1-.7.3c-.28 0-.52-.11-.7-.3zM8 7.99c-.02-.25-.11-.48-.31-.69-.2-.19-.42-.3-.69-.31H6c-.27.02-.48.13-.69.31-.2.2-.3.44-.31.69h1v3c.02.27.11.5.31.69.2.2.42.31.69.31h1c.27 0 .48-.11.69-.31.2-.19.3-.42.31-.69H8V7.98v.01zM7 2.3c-3.14 0-5.7 2.54-5.7 5.68 0 3.14 2.56 5.7 5.7 5.7s5.7-2.55 5.7-5.7c0-3.15-2.56-5.69-5.7-5.69v.01zM7 .98c3.86 0 7 3.14 7 7s-3.14 7-7 7-7-3.12-7-7 3.14-7 7-7z"></path></svg></span>note</div><div class="admonitionContent_BuS1"><p>This step is optional and should only be performed if external users (i.e., users with <strong>User type: Guest</strong>) will be added to the Microsoft Entra Tenant and require access to the Application.</p></div></div>
<p><img decoding="async" loading="lazy" alt="upn Claim" src="/assets/images/upn-claim-0ae2415ae51d8eab1bfce10492cbf021.png" width="3362" height="1660" class="img_ev3q"></p>
</li>
<li>
<p>(Optional) After adding the <strong>upn</strong> claim, click on the three dots next to it, select <strong>Edit</strong>, and turn on the <strong>Externally authenticated</strong> toggle to <strong>Yes</strong> value.</p>
<div class="theme-admonition theme-admonition-note admonition_xJq3 alert alert--secondary"><div class="admonitionHeading_Gvgb"><span class="admonitionIcon_Rf37"><svg viewBox="0 0 14 16"><path fill-rule="evenodd" d="M6.3 5.69a.942.942 0 0 1-.28-.7c0-.28.09-.52.28-.7.19-.18.42-.28.7-.28.28 0 .52.09.7.28.18.19.28.42.28.7 0 .28-.09.52-.28.7a1 1 0 0 1-.7.3c-.28 0-.52-.11-.7-.3zM8 7.99c-.02-.25-.11-.48-.31-.69-.2-.19-.42-.3-.69-.31H6c-.27.02-.48.13-.69.31-.2.2-.3.44-.31.69h1v3c.02.27.11.5.31.69.2.2.42.31.69.31h1c.27 0 .48-.11.69-.31.2-.19.3-.42.31-.69H8V7.98v.01zM7 2.3c-3.14 0-5.7 2.54-5.7 5.68 0 3.14 2.56 5.7 5.7 5.7s5.7-2.55 5.7-5.7c0-3.15-2.56-5.69-5.7-5.69v.01zM7 .98c3.86 0 7 3.14 7 7s-3.14 7-7 7-7-3.12-7-7 3.14-7 7-7z"></path></svg></span>note</div><div class="admonitionContent_BuS1"><p>This step is optional and should only be performed if external users (i.e., users with <strong>User type: Guest</strong>) will be added to the Microsoft Entra Tenant and require access to the Application.</p></div></div>
<p><img decoding="async" loading="lazy" alt="Externally Authenticated" src="/assets/images/externally-authenticated-1bfd6efbb519c1633eb00d846fd99dc6.png" width="3362" height="1660" class="img_ev3q"></p>
</li>
<li>
<p>Navigate to the <strong>API permissions</strong> section. Ensure that the <strong>User.Read</strong> permission is added under the <strong>Microsoft Graph</strong> API. If not, click on the <strong>Add a permission</strong> button, select <strong>Microsoft Graph</strong>, and add the <strong>User.Read</strong> permission. After adding the permission, click on the <strong>Grant admin consent for &#x27;Tenant name&#x27;</strong> button to grant the required permissions.</p>
<p><img decoding="async" loading="lazy" alt="API Permissions" src="/assets/images/api-permissions-ec305b38ce662e114e3e614ceabca58a.png" width="3364" height="1647" class="img_ev3q"></p>
</li>
<li>
<p>(Optional) Additionally, for <strong>Microsoft Graph</strong> API, add the <strong>OpenId</strong> permissions, such as <strong>openid</strong>, <strong>email</strong>, and <strong>profile</strong>.</p>
<div class="theme-admonition theme-admonition-note admonition_xJq3 alert alert--secondary"><div class="admonitionHeading_Gvgb"><span class="admonitionIcon_Rf37"><svg viewBox="0 0 14 16"><path fill-rule="evenodd" d="M6.3 5.69a.942.942 0 0 1-.28-.7c0-.28.09-.52.28-.7.19-.18.42-.28.7-.28.28 0 .52.09.7.28.18.19.28.42.28.7 0 .28-.09.52-.28.7a1 1 0 0 1-.7.3c-.28 0-.52-.11-.7-.3zM8 7.99c-.02-.25-.11-.48-.31-.69-.2-.19-.42-.3-.69-.31H6c-.27.02-.48.13-.69.31-.2.2-.3.44-.31.69h1v3c.02.27.11.5.31.69.2.2.42.31.69.31h1c.27 0 .48-.11.69-.31.2-.19.3-.42.31-.69H8V7.98v.01zM7 2.3c-3.14 0-5.7 2.54-5.7 5.68 0 3.14 2.56 5.7 5.7 5.7s5.7-2.55 5.7-5.7c0-3.15-2.56-5.69-5.7-5.69v.01zM7 .98c3.86 0 7 3.14 7 7s-3.14 7-7 7-7-3.12-7-7 3.14-7 7-7z"></path></svg></span>note</div><div class="admonitionContent_BuS1"><p>This step is optional and should only be performed if external users (i.e., users with <strong>User type: Guest</strong>) will be added to the Microsoft Entra Tenant and require access to the Application.</p></div></div>
<p><img decoding="async" loading="lazy" alt="OpenID Permissions" src="/assets/images/openid-permissions-f130d9bd007be3509b7f33b48e6e488d.png" width="3362" height="1660" class="img_ev3q"></p>
</li>
<li>
<p>The OIDC Application in Microsoft Entra is now configured and ready for integration with AWS EKS.</p>
</li>
</ol>
<h2 class="anchor anchorWithStickyNavbar_LWe7" id="creating-users-and-groups-in-microsoft-entra">Creating Users and Groups in Microsoft Entra<a href="#creating-users-and-groups-in-microsoft-entra" class="hash-link" aria-label="Direct link to Creating Users and Groups in Microsoft Entra" title="Direct link to Creating Users and Groups in Microsoft Entra">​</a></h2>
<div class="theme-admonition theme-admonition-note admonition_xJq3 alert alert--secondary"><div class="admonitionHeading_Gvgb"><span class="admonitionIcon_Rf37"><svg viewBox="0 0 14 16"><path fill-rule="evenodd" d="M6.3 5.69a.942.942 0 0 1-.28-.7c0-.28.09-.52.28-.7.19-.18.42-.28.7-.28.28 0 .52.09.7.28.18.19.28.42.28.7 0 .28-.09.52-.28.7a1 1 0 0 1-.7.3c-.28 0-.52-.11-.7-.3zM8 7.99c-.02-.25-.11-.48-.31-.69-.2-.19-.42-.3-.69-.31H6c-.27.02-.48.13-.69.31-.2.2-.3.44-.31.69h1v3c.02.27.11.5.31.69.2.2.42.31.69.31h1c.27 0 .48-.11.69-.31.2-.19.3-.42.31-.69H8V7.98v.01zM7 2.3c-3.14 0-5.7 2.54-5.7 5.68 0 3.14 2.56 5.7 5.7 5.7s5.7-2.55 5.7-5.7c0-3.15-2.56-5.69-5.7-5.69v.01zM7 .98c3.86 0 7 3.14 7 7s-3.14 7-7 7-7-3.12-7-7 3.14-7 7-7z"></path></svg></span>note</div><div class="admonitionContent_BuS1"><p>Only users who are part of the groups configured in the Microsoft Entra Admin Center will be able to authenticate to the AWS EKS cluster using OIDC.</p></div></div>
<p>To create users and groups in Microsoft Entra, follow these steps:</p>
<h3 class="anchor anchorWithStickyNavbar_LWe7" id="creating-a-group">Creating a Group<a href="#creating-a-group" class="hash-link" aria-label="Direct link to Creating a Group" title="Direct link to Creating a Group">​</a></h3>
<ol>
<li>
<p>In the Microsoft Entra Admin Center, in the left sidebar menu, select <strong>Groups</strong> and then <strong>All groups</strong>. Click on <strong>New group</strong> button to create a new group(s) for users who will have access to the AWS EKS cluster.</p>
<p><img decoding="async" loading="lazy" alt="New Group" src="/assets/images/new-group-057769fdc60e88276e453cfe1d13520a.png" width="3364" height="1647" class="img_ev3q"></p>
</li>
<li>
<p>Fill in the details for the group, such as <strong>Group type</strong> and <strong>Group name</strong>. Click on the <strong>Create</strong> button to create the group.</p>
<p><img decoding="async" loading="lazy" alt="Group Details" src="/assets/images/group-details-f699a47eca753f3e4f7fed9bd27ac86d.png" width="3364" height="1647" class="img_ev3q"></p>
</li>
<li>
<p>The group will be created, and you can start adding users to it.</p>
</li>
</ol>
<h3 class="anchor anchorWithStickyNavbar_LWe7" id="adding-users-to-the-group">Adding Users to the Group<a href="#adding-users-to-the-group" class="hash-link" aria-label="Direct link to Adding Users to the Group" title="Direct link to Adding Users to the Group">​</a></h3>
<ol>
<li>
<p>In the Microsoft Entra Admin Center, in the left sidebar menu, select <strong>Users</strong> and then click on <strong>All users</strong>. In the <strong>New user</strong> tab, click on the <strong>Create new user</strong> button to create a new user.</p>
<p><img decoding="async" loading="lazy" alt="New User" src="/assets/images/new-user-8d00fa515a4025b42a98f013a37d9a8f.png" width="3364" height="1648" class="img_ev3q"></p>
</li>
<li>
<p>Fill in the details for the user, such as <strong>User principal name</strong>, <strong>Mail nickname</strong>, <strong>Display name</strong>, and temporary password. In the <strong>Properties</strong> tab you can set the <strong>First name</strong>, <strong>Last name</strong>, and other details.</p>
<p><img decoding="async" loading="lazy" alt="User Details" src="/assets/images/user-details-b5f580cd6fe8db3a519fd95a7d42fdc5.png" width="3364" height="1647" class="img_ev3q"></p>
</li>
<li>
<p>In the <strong>Assignment</strong> tab, click on the <strong>Add group</strong> button. In the <strong>Select Group</strong> window, choose the group(s) you created earlier (e.g., <code>oidc-cluster-admins</code>) and click on the <strong>Select</strong> button.</p>
<p><img decoding="async" loading="lazy" alt="Add Group" src="/assets/images/add-group-ad90704de9b5399c8ce85605ca530a7d.png" width="3364" height="1647" class="img_ev3q"></p>
</li>
<li>
<p>Click on the <strong>Review + create</strong> button to create the user. The user will be created and added to the group(s) you selected.</p>
</li>
</ol>
<h2 class="anchor anchorWithStickyNavbar_LWe7" id="configuring-microsoft-entra-as-an-identity-provider-in-aws-eks">Configuring Microsoft Entra as an Identity Provider in AWS EKS<a href="#configuring-microsoft-entra-as-an-identity-provider-in-aws-eks" class="hash-link" aria-label="Direct link to Configuring Microsoft Entra as an Identity Provider in AWS EKS" title="Direct link to Configuring Microsoft Entra as an Identity Provider in AWS EKS">​</a></h2>
<p>There are two methods to configure Microsoft Entra as an Identity Provider in AWS EKS: through the AWS Management Console and using Terraform.</p>
<div class="theme-admonition theme-admonition-note admonition_xJq3 alert alert--secondary"><div class="admonitionHeading_Gvgb"><span class="admonitionIcon_Rf37"><svg viewBox="0 0 14 16"><path fill-rule="evenodd" d="M6.3 5.69a.942.942 0 0 1-.28-.7c0-.28.09-.52.28-.7.19-.18.42-.28.7-.28.28 0 .52.09.7.28.18.19.28.42.28.7 0 .28-.09.52-.28.7a1 1 0 0 1-.7.3c-.28 0-.52-.11-.7-.3zM8 7.99c-.02-.25-.11-.48-.31-.69-.2-.19-.42-.3-.69-.31H6c-.27.02-.48.13-.69.31-.2.2-.3.44-.31.69h1v3c.02.27.11.5.31.69.2.2.42.31.69.31h1c.27 0 .48-.11.69-.31.2-.19.3-.42.31-.69H8V7.98v.01zM7 2.3c-3.14 0-5.7 2.54-5.7 5.68 0 3.14 2.56 5.7 5.7 5.7s5.7-2.55 5.7-5.7c0-3.15-2.56-5.69-5.7-5.69v.01zM7 .98c3.86 0 7 3.14 7 7s-3.14 7-7 7-7-3.12-7-7 3.14-7 7-7z"></path></svg></span>note</div><div class="admonitionContent_BuS1"><p>The Application data, such as <strong>Directory (tenant) ID</strong>, <strong>Application (client) ID</strong>, and <strong>Issuer URL</strong>, can be found in the <strong>Overview</strong> section of the OIDC Application in the Microsoft Entra Admin Center.
<img decoding="async" loading="lazy" alt="Application Data" src="/assets/images/application-data-79ef843fc1e677bbbc0597ce1b9c2f50.png" width="1306" height="664" class="img_ev3q"></p></div></div>
<h3 class="anchor anchorWithStickyNavbar_LWe7" id="method-1-using-the-aws-management-console">Method 1: Using the AWS Management Console<a href="#method-1-using-the-aws-management-console" class="hash-link" aria-label="Direct link to Method 1: Using the AWS Management Console" title="Direct link to Method 1: Using the AWS Management Console">​</a></h3>
<ol>
<li>
<p>Log in to the <a href="https://aws.amazon.com/console/" target="_blank" rel="noopener noreferrer">AWS Management Console</a> and navigate to the <a href="https://console.aws.amazon.com/eks/" target="_blank" rel="noopener noreferrer">Amazon EKS console</a>. Select the EKS cluster you want to configure and click on the <strong>Access</strong> tab.</p>
<p><img decoding="async" loading="lazy" alt="EKS Cluster Access Tab" src="/assets/images/eks-cluster-access-tab-707d67886863028877f32b1630411b4e.png" width="3356" height="1180" class="img_ev3q"></p>
</li>
<li>
<p>In the <strong>OIDC identity providers</strong> section, click on the <strong>Associate identity provider</strong> button.</p>
<p><img decoding="async" loading="lazy" alt="Associate Identity Provider" src="/assets/images/associate-identity-provider-8d81c9b345b76eb0bf49961342edde54.png" width="3356" height="1642" class="img_ev3q"></p>
</li>
<li>
<p>Fill in the following details:</p>
<ul>
<li>
<p><strong>Name</strong>: <code>Entra</code></p>
</li>
<li>
<p><strong>Issuer URL</strong>: <code>https://login.microsoftonline.com/&lt;Tenant-ID&gt;/</code>, where <code>&lt;Tenant-ID&gt;</code> is the <strong>Directory</strong> (tenant) <strong>ID</strong>. Ensure that the URL ends with <code>/</code>.</p>
</li>
<li>
<p><strong>Client ID</strong>: <code>&lt;Application (client) ID&gt;</code>, which corresponds to the <strong>Application</strong> (client) <strong>ID</strong> of the OIDC Application.</p>
</li>
<li>
<p><strong>Username Claim</strong>: <code>upn</code>.</p>
</li>
<li>
<p><strong>Groups Claim</strong>: <code>groups</code>.</p>
<p><img decoding="async" loading="lazy" alt="Identity Provider Details" src="/assets/images/identity-provider-details-43942f4911d1c02742267b8b19d106cb.png" width="1506" height="1022" class="img_ev3q"></p>
</li>
</ul>
</li>
<li>
<p>The process of applying the changes may take a few minutes. Once completed, the Microsoft Entra OIDC identity provider will be associated with the AWS EKS cluster.</p>
</li>
</ol>
<h3 class="anchor anchorWithStickyNavbar_LWe7" id="method-2-using-terraform">Method 2: Using Terraform<a href="#method-2-using-terraform" class="hash-link" aria-label="Direct link to Method 2: Using Terraform" title="Direct link to Method 2: Using Terraform">​</a></h3>
<p>To configure Microsoft Entra as an Identity Provider in AWS EKS using Terraform, you can use <a href="https://registry.terraform.io/modules/terraform-aws-modules/eks/aws/20.30.1" target="_blank" rel="noopener noreferrer">AWS EKS Terraform module</a>. Here&#x27;s an example of how you can do it:</p>
<ul>
<li><strong>variables.tf</strong>:</li>
</ul>
<div class="language-hcl codeBlockContainer_Ckt0 theme-code-block" style="--prism-color:#393A34;--prism-background-color:#f6f8fa"><div class="codeBlockContent_biex"><pre tabindex="0" class="prism-code language-hcl codeBlock_bY9V thin-scrollbar" style="color:#393A34;background-color:#f6f8fa"><code class="codeBlockLines_e6Vv"><span class="token-line" style="color:#393A34"><span class="token keyword" style="color:#00009f">variable</span><span class="token keyword type variable" style="color:#36acaa"> &quot;cluster_identity_providers&quot; </span><span class="token punctuation" style="color:#393A34">{</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">  </span><span class="token property" style="color:#36acaa">description</span><span class="token plain"> </span><span class="token punctuation" style="color:#393A34">=</span><span class="token plain"> </span><span class="token string" style="color:#e3116c">&quot;Configuration for OIDC identity provider&quot;</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">  </span><span class="token property" style="color:#36acaa">type</span><span class="token plain">        </span><span class="token punctuation" style="color:#393A34">=</span><span class="token plain"> any</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">  </span><span class="token property" style="color:#36acaa">default</span><span class="token plain">     </span><span class="token punctuation" style="color:#393A34">=</span><span class="token plain"> </span><span class="token punctuation" style="color:#393A34">{</span><span class="token punctuation" style="color:#393A34">}</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain"></span><span class="token punctuation" style="color:#393A34">}</span><br></span></code></pre><div class="buttonGroup__atx"><button type="button" aria-label="Copy code to clipboard" title="Copy" class="clean-btn"><span class="copyButtonIcons_eSgA" aria-hidden="true"><svg viewBox="0 0 24 24" class="copyButtonIcon_y97N"><path fill="currentColor" d="M19,21H8V7H19M19,5H8A2,2 0 0,0 6,7V21A2,2 0 0,0 8,23H19A2,2 0 0,0 21,21V7A2,2 0 0,0 19,5M16,1H4A2,2 0 0,0 2,3V17H4V3H16V1Z"></path></svg><svg viewBox="0 0 24 24" class="copyButtonSuccessIcon_LjdS"><path fill="currentColor" d="M21,7L9,19L3.5,13.5L4.91,12.09L9,16.17L19.59,5.59L21,7Z"></path></svg></span></button></div></div></div>
<ul>
<li><strong>terraform.tfvars</strong>:</li>
</ul>
<div class="language-hcl codeBlockContainer_Ckt0 theme-code-block" style="--prism-color:#393A34;--prism-background-color:#f6f8fa"><div class="codeBlockContent_biex"><pre tabindex="0" class="prism-code language-hcl codeBlock_bY9V thin-scrollbar" style="color:#393A34;background-color:#f6f8fa"><code class="codeBlockLines_e6Vv"><span class="token-line" style="color:#393A34"><span class="token property" style="color:#36acaa">cluster_identity_providers</span><span class="token plain"> </span><span class="token punctuation" style="color:#393A34">=</span><span class="token plain"> </span><span class="token punctuation" style="color:#393A34">{</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">  </span><span class="token property" style="color:#36acaa">entra</span><span class="token plain"> </span><span class="token punctuation" style="color:#393A34">=</span><span class="token plain"> </span><span class="token punctuation" style="color:#393A34">{</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    </span><span class="token property" style="color:#36acaa">client_id</span><span class="token plain">    </span><span class="token punctuation" style="color:#393A34">=</span><span class="token plain"> </span><span class="token string" style="color:#e3116c">&quot;&lt;Application (client) ID&gt;&quot;</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    </span><span class="token property" style="color:#36acaa">issuer_url</span><span class="token plain">   </span><span class="token punctuation" style="color:#393A34">=</span><span class="token plain"> </span><span class="token string" style="color:#e3116c">&quot;https://sts.windows.net/&lt;Tenant ID&gt;/&quot;</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    </span><span class="token property" style="color:#36acaa">groups_claim</span><span class="token plain"> </span><span class="token punctuation" style="color:#393A34">=</span><span class="token plain"> </span><span class="token string" style="color:#e3116c">&quot;groups&quot;</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    </span><span class="token property" style="color:#36acaa">username_claim</span><span class="token plain">  </span><span class="token punctuation" style="color:#393A34">=</span><span class="token plain"> </span><span class="token string" style="color:#e3116c">&quot;upn&quot;</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">  </span><span class="token punctuation" style="color:#393A34">}</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain"></span><span class="token punctuation" style="color:#393A34">}</span><br></span></code></pre><div class="buttonGroup__atx"><button type="button" aria-label="Copy code to clipboard" title="Copy" class="clean-btn"><span class="copyButtonIcons_eSgA" aria-hidden="true"><svg viewBox="0 0 24 24" class="copyButtonIcon_y97N"><path fill="currentColor" d="M19,21H8V7H19M19,5H8A2,2 0 0,0 6,7V21A2,2 0 0,0 8,23H19A2,2 0 0,0 21,21V7A2,2 0 0,0 19,5M16,1H4A2,2 0 0,0 2,3V17H4V3H16V1Z"></path></svg><svg viewBox="0 0 24 24" class="copyButtonSuccessIcon_LjdS"><path fill="currentColor" d="M21,7L9,19L3.5,13.5L4.91,12.09L9,16.17L19.59,5.59L21,7Z"></path></svg></span></button></div></div></div>
<ul>
<li><strong>main.tf</strong>:</li>
</ul>
<div class="language-hcl codeBlockContainer_Ckt0 theme-code-block" style="--prism-color:#393A34;--prism-background-color:#f6f8fa"><div class="codeBlockContent_biex"><pre tabindex="0" class="prism-code language-hcl codeBlock_bY9V thin-scrollbar" style="color:#393A34;background-color:#f6f8fa"><code class="codeBlockLines_e6Vv"><span class="token-line" style="color:#393A34"><span class="token keyword" style="color:#00009f">module</span><span class="token keyword type variable" style="color:#36acaa"> &quot;eks&quot; </span><span class="token punctuation" style="color:#393A34">{</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">  </span><span class="token property" style="color:#36acaa">source</span><span class="token plain">  </span><span class="token punctuation" style="color:#393A34">=</span><span class="token plain"> </span><span class="token string" style="color:#e3116c">&quot;terraform-aws-modules/eks/aws&quot;</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">  </span><span class="token property" style="color:#36acaa">version</span><span class="token plain"> </span><span class="token punctuation" style="color:#393A34">=</span><span class="token plain"> </span><span class="token string" style="color:#e3116c">&quot;20.14.0&quot;</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">  ...</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">  </span><span class="token comment" style="color:#999988;font-style:italic"># OIDC Identity provider</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">  </span><span class="token property" style="color:#36acaa">cluster_identity_providers</span><span class="token plain"> </span><span class="token punctuation" style="color:#393A34">=</span><span class="token plain"> var.cluster_identity_providers</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain"></span><span class="token punctuation" style="color:#393A34">}</span><br></span></code></pre><div class="buttonGroup__atx"><button type="button" aria-label="Copy code to clipboard" title="Copy" class="clean-btn"><span class="copyButtonIcons_eSgA" aria-hidden="true"><svg viewBox="0 0 24 24" class="copyButtonIcon_y97N"><path fill="currentColor" d="M19,21H8V7H19M19,5H8A2,2 0 0,0 6,7V21A2,2 0 0,0 8,23H19A2,2 0 0,0 21,21V7A2,2 0 0,0 19,5M16,1H4A2,2 0 0,0 2,3V17H4V3H16V1Z"></path></svg><svg viewBox="0 0 24 24" class="copyButtonSuccessIcon_LjdS"><path fill="currentColor" d="M21,7L9,19L3.5,13.5L4.91,12.09L9,16.17L19.59,5.59L21,7Z"></path></svg></span></button></div></div></div>
<p>After applying the Terraform configuration, the Microsoft Entra OIDC identity provider will be associated with the AWS EKS cluster.</p>
<h2 class="anchor anchorWithStickyNavbar_LWe7" id="configuring-rbac-resources-in-aws-eks-cluster-for-microsoft-entra-user-groups">Configuring RBAC Resources in AWS EKS cluster for Microsoft Entra User Groups<a href="#configuring-rbac-resources-in-aws-eks-cluster-for-microsoft-entra-user-groups" class="hash-link" aria-label="Direct link to Configuring RBAC Resources in AWS EKS cluster for Microsoft Entra User Groups" title="Direct link to Configuring RBAC Resources in AWS EKS cluster for Microsoft Entra User Groups">​</a></h2>
<p>In this section, user authorization will be configured using Kubernetes Role-Based Access Control (RBAC). Microsoft Entra groups will be linked to Kubernetes ClusterRoles through ClusterRoleBinding resources, enabling precise control over resource access within the EKS cluster. Additionally, Roles and RoleBindings can be used for more granular access control within specific namespaces.</p>
<div class="theme-admonition theme-admonition-note admonition_xJq3 alert alert--secondary"><div class="admonitionHeading_Gvgb"><span class="admonitionIcon_Rf37"><svg viewBox="0 0 14 16"><path fill-rule="evenodd" d="M6.3 5.69a.942.942 0 0 1-.28-.7c0-.28.09-.52.28-.7.19-.18.42-.28.7-.28.28 0 .52.09.7.28.18.19.28.42.28.7 0 .28-.09.52-.28.7a1 1 0 0 1-.7.3c-.28 0-.52-.11-.7-.3zM8 7.99c-.02-.25-.11-.48-.31-.69-.2-.19-.42-.3-.69-.31H6c-.27.02-.48.13-.69.31-.2.2-.3.44-.31.69h1v3c.02.27.11.5.31.69.2.2.42.31.69.31h1c.27 0 .48-.11.69-.31.2-.19.3-.42.31-.69H8V7.98v.01zM7 2.3c-3.14 0-5.7 2.54-5.7 5.68 0 3.14 2.56 5.7 5.7 5.7s5.7-2.55 5.7-5.7c0-3.15-2.56-5.69-5.7-5.69v.01zM7 .98c3.86 0 7 3.14 7 7s-3.14 7-7 7-7-3.12-7-7 3.14-7 7-7z"></path></svg></span>note</div><div class="admonitionContent_BuS1"><p>The <strong>Object ID</strong> of the Microsoft Entra group can be found in the <strong>Overview</strong> section of the group in the Microsoft Entra Admin Center.
<img decoding="async" loading="lazy" alt="Group Object ID" src="/assets/images/group-object-id-074d9c1a6ef1ebdd351442b25e07f37d.png" width="1504" height="1090" class="img_ev3q"></p></div></div>
<ol>
<li>
<p>Log in to the AWS EKS cluster and create the following <strong>ClusterRoleBinding</strong> resource, which associates the Microsoft Entra group <code>oidc-cluster-admins</code> with the <code>cluster-admin</code> Kubernetes Cluster Role. Replace <code>&lt;your-microsoft-entra-admin-group-object-id&gt;</code> with the Object ID of the <code>oidc-cluster-admins</code> group, which can be found on the <code>Group</code> overview page in the Microsoft Entra admin center.</p>
<div class="language-yaml codeBlockContainer_Ckt0 theme-code-block" style="--prism-color:#393A34;--prism-background-color:#f6f8fa"><div class="codeBlockContent_biex"><pre tabindex="0" class="prism-code language-yaml codeBlock_bY9V thin-scrollbar" style="color:#393A34;background-color:#f6f8fa"><code class="codeBlockLines_e6Vv"><span class="token-line" style="color:#393A34"><span class="token key atrule" style="color:#00a4db">apiVersion</span><span class="token punctuation" style="color:#393A34">:</span><span class="token plain"> rbac.authorization.k8s.io/v1</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain"></span><span class="token key atrule" style="color:#00a4db">kind</span><span class="token punctuation" style="color:#393A34">:</span><span class="token plain"> ClusterRoleBinding</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain"></span><span class="token key atrule" style="color:#00a4db">metadata</span><span class="token punctuation" style="color:#393A34">:</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">  </span><span class="token key atrule" style="color:#00a4db">name</span><span class="token punctuation" style="color:#393A34">:</span><span class="token plain"> oidc</span><span class="token punctuation" style="color:#393A34">-</span><span class="token plain">cluster</span><span class="token punctuation" style="color:#393A34">-</span><span class="token plain">admins</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain"></span><span class="token key atrule" style="color:#00a4db">roleRef</span><span class="token punctuation" style="color:#393A34">:</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">  </span><span class="token key atrule" style="color:#00a4db">apiGroup</span><span class="token punctuation" style="color:#393A34">:</span><span class="token plain"> rbac.authorization.k8s.io</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">  </span><span class="token key atrule" style="color:#00a4db">kind</span><span class="token punctuation" style="color:#393A34">:</span><span class="token plain"> ClusterRole</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">  </span><span class="token key atrule" style="color:#00a4db">name</span><span class="token punctuation" style="color:#393A34">:</span><span class="token plain"> cluster</span><span class="token punctuation" style="color:#393A34">-</span><span class="token plain">admin</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain"></span><span class="token key atrule" style="color:#00a4db">subjects</span><span class="token punctuation" style="color:#393A34">:</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">  </span><span class="token punctuation" style="color:#393A34">-</span><span class="token plain"> </span><span class="token key atrule" style="color:#00a4db">kind</span><span class="token punctuation" style="color:#393A34">:</span><span class="token plain"> Group</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    </span><span class="token key atrule" style="color:#00a4db">name</span><span class="token punctuation" style="color:#393A34">:</span><span class="token plain"> &lt;your</span><span class="token punctuation" style="color:#393A34">-</span><span class="token plain">microsoft</span><span class="token punctuation" style="color:#393A34">-</span><span class="token plain">entra</span><span class="token punctuation" style="color:#393A34">-</span><span class="token plain">admin</span><span class="token punctuation" style="color:#393A34">-</span><span class="token plain">group</span><span class="token punctuation" style="color:#393A34">-</span><span class="token plain">object</span><span class="token punctuation" style="color:#393A34">-</span><span class="token plain">id</span><span class="token punctuation" style="color:#393A34">&gt;</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    </span><span class="token key atrule" style="color:#00a4db">apiGroup</span><span class="token punctuation" style="color:#393A34">:</span><span class="token plain"> rbac.authorization.k8s.io</span><br></span></code></pre><div class="buttonGroup__atx"><button type="button" aria-label="Copy code to clipboard" title="Copy" class="clean-btn"><span class="copyButtonIcons_eSgA" aria-hidden="true"><svg viewBox="0 0 24 24" class="copyButtonIcon_y97N"><path fill="currentColor" d="M19,21H8V7H19M19,5H8A2,2 0 0,0 6,7V21A2,2 0 0,0 8,23H19A2,2 0 0,0 21,21V7A2,2 0 0,0 19,5M16,1H4A2,2 0 0,0 2,3V17H4V3H16V1Z"></path></svg><svg viewBox="0 0 24 24" class="copyButtonSuccessIcon_LjdS"><path fill="currentColor" d="M21,7L9,19L3.5,13.5L4.91,12.09L9,16.17L19.59,5.59L21,7Z"></path></svg></span></button></div></div></div>
<p>Save the above YAML to a file, for example, <code>clusterrolebinding.yaml</code>, and apply it to the EKS cluster using the following command:</p>
<div class="language-bash codeBlockContainer_Ckt0 theme-code-block" style="--prism-color:#393A34;--prism-background-color:#f6f8fa"><div class="codeBlockContent_biex"><pre tabindex="0" class="prism-code language-bash codeBlock_bY9V thin-scrollbar" style="color:#393A34;background-color:#f6f8fa"><code class="codeBlockLines_e6Vv"><span class="token-line" style="color:#393A34"><span class="token plain">kubectl apply </span><span class="token parameter variable" style="color:#36acaa">-f</span><span class="token plain"> clusterrolebinding.yaml</span><br></span></code></pre><div class="buttonGroup__atx"><button type="button" aria-label="Copy code to clipboard" title="Copy" class="clean-btn"><span class="copyButtonIcons_eSgA" aria-hidden="true"><svg viewBox="0 0 24 24" class="copyButtonIcon_y97N"><path fill="currentColor" d="M19,21H8V7H19M19,5H8A2,2 0 0,0 6,7V21A2,2 0 0,0 8,23H19A2,2 0 0,0 21,21V7A2,2 0 0,0 19,5M16,1H4A2,2 0 0,0 2,3V17H4V3H16V1Z"></path></svg><svg viewBox="0 0 24 24" class="copyButtonSuccessIcon_LjdS"><path fill="currentColor" d="M21,7L9,19L3.5,13.5L4.91,12.09L9,16.17L19.59,5.59L21,7Z"></path></svg></span></button></div></div></div>
<p>The <code>oidc-cluster-admins</code> group will now have <code>cluster-admin</code> permissions within the EKS cluster.</p>
</li>
</ol>
<h2 class="anchor anchorWithStickyNavbar_LWe7" id="authenticating-to-aws-eks-using-microsoft-entra-with-kubectl">Authenticating to AWS EKS using Microsoft Entra with kubectl<a href="#authenticating-to-aws-eks-using-microsoft-entra-with-kubectl" class="hash-link" aria-label="Direct link to Authenticating to AWS EKS using Microsoft Entra with kubectl" title="Direct link to Authenticating to AWS EKS using Microsoft Entra with kubectl">​</a></h2>
<p>To authenticate to the AWS EKS cluster using Microsoft Entra, you can use the <code>kubectl</code> CLI tool with the <code>kubelogin</code> plugin. The <code>kubelogin</code> plugin simplifies the OIDC authentication process by handling the token exchange and session management. Here&#x27;s how you can authenticate to the EKS cluster:</p>
<ol>
<li>
<p>Create or update the kubeconfig file with the OIDC configuration. Replace <code>&lt;cluster-name&gt;</code> with the name of your EKS cluster and <code>&lt;region-code&gt;</code> with the AWS region code where the cluster is located.</p>
<div class="language-bash codeBlockContainer_Ckt0 theme-code-block" style="--prism-color:#393A34;--prism-background-color:#f6f8fa"><div class="codeBlockContent_biex"><pre tabindex="0" class="prism-code language-bash codeBlock_bY9V thin-scrollbar" style="color:#393A34;background-color:#f6f8fa"><code class="codeBlockLines_e6Vv"><span class="token-line" style="color:#393A34"><span class="token plain">aws eks update-kubeconfig </span><span class="token parameter variable" style="color:#36acaa">--region</span><span class="token plain"> </span><span class="token operator" style="color:#393A34">&lt;</span><span class="token plain">region-code</span><span class="token operator" style="color:#393A34">&gt;</span><span class="token plain"> </span><span class="token parameter variable" style="color:#36acaa">--name</span><span class="token plain"> </span><span class="token operator" style="color:#393A34">&lt;</span><span class="token plain">cluster-name</span><span class="token operator" style="color:#393A34">&gt;</span><br></span></code></pre><div class="buttonGroup__atx"><button type="button" aria-label="Copy code to clipboard" title="Copy" class="clean-btn"><span class="copyButtonIcons_eSgA" aria-hidden="true"><svg viewBox="0 0 24 24" class="copyButtonIcon_y97N"><path fill="currentColor" d="M19,21H8V7H19M19,5H8A2,2 0 0,0 6,7V21A2,2 0 0,0 8,23H19A2,2 0 0,0 21,21V7A2,2 0 0,0 19,5M16,1H4A2,2 0 0,0 2,3V17H4V3H16V1Z"></path></svg><svg viewBox="0 0 24 24" class="copyButtonSuccessIcon_LjdS"><path fill="currentColor" d="M21,7L9,19L3.5,13.5L4.91,12.09L9,16.17L19.59,5.59L21,7Z"></path></svg></span></button></div></div></div>
</li>
<li>
<p>Execute the following command to create a new kubeconfig context using the <code>kubelogin</code> plugin. Replace <code>&lt;cluster-name&gt;</code> with the name of your EKS cluster.</p>
<div class="language-bash codeBlockContainer_Ckt0 theme-code-block" style="--prism-color:#393A34;--prism-background-color:#f6f8fa"><div class="codeBlockContent_biex"><pre tabindex="0" class="prism-code language-bash codeBlock_bY9V thin-scrollbar" style="color:#393A34;background-color:#f6f8fa"><code class="codeBlockLines_e6Vv"><span class="token-line" style="color:#393A34"><span class="token plain">kubectl config set-credentials </span><span class="token string" style="color:#e3116c">&quot;eks&quot;</span><span class="token plain"> </span><span class="token punctuation" style="color:#393A34">\</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">  --exec-api-version</span><span class="token operator" style="color:#393A34">=</span><span class="token plain">client.authentication.k8s.io/v1beta1 </span><span class="token punctuation" style="color:#393A34">\</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">  --exec-command</span><span class="token operator" style="color:#393A34">=</span><span class="token plain">kubelogin </span><span class="token punctuation" style="color:#393A34">\</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">  --exec-arg</span><span class="token operator" style="color:#393A34">=</span><span class="token plain">get-token </span><span class="token punctuation" style="color:#393A34">\</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">  --exec-arg</span><span class="token operator" style="color:#393A34">=</span><span class="token plain">--oidc-issuer-url </span><span class="token punctuation" style="color:#393A34">\</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">  --exec-arg</span><span class="token operator" style="color:#393A34">=</span><span class="token plain">https://sts.windows.net/</span><span class="token operator" style="color:#393A34">&lt;</span><span class="token plain">Tenant ID</span><span class="token operator" style="color:#393A34">&gt;</span><span class="token plain">/ </span><span class="token punctuation" style="color:#393A34">\</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">  --exec-arg</span><span class="token operator" style="color:#393A34">=</span><span class="token plain">--oidc-client-id </span><span class="token punctuation" style="color:#393A34">\</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">  --exec-arg</span><span class="token operator" style="color:#393A34">=</span><span class="token operator" style="color:#393A34">&lt;</span><span class="token plain">Application </span><span class="token punctuation" style="color:#393A34">(</span><span class="token plain">client</span><span class="token punctuation" style="color:#393A34">)</span><span class="token plain"> ID</span><span class="token operator" style="color:#393A34">&gt;</span><span class="token plain"> </span><span class="token punctuation" style="color:#393A34">\</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">  --exec-arg</span><span class="token operator" style="color:#393A34">=</span><span class="token plain">--oidc-client-secret </span><span class="token punctuation" style="color:#393A34">\</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">  --exec-arg</span><span class="token operator" style="color:#393A34">=</span><span class="token operator" style="color:#393A34">&lt;</span><span class="token plain">Application </span><span class="token punctuation" style="color:#393A34">(</span><span class="token plain">client</span><span class="token punctuation" style="color:#393A34">)</span><span class="token plain"> Secret</span><span class="token operator" style="color:#393A34">&gt;</span><br></span></code></pre><div class="buttonGroup__atx"><button type="button" aria-label="Copy code to clipboard" title="Copy" class="clean-btn"><span class="copyButtonIcons_eSgA" aria-hidden="true"><svg viewBox="0 0 24 24" class="copyButtonIcon_y97N"><path fill="currentColor" d="M19,21H8V7H19M19,5H8A2,2 0 0,0 6,7V21A2,2 0 0,0 8,23H19A2,2 0 0,0 21,21V7A2,2 0 0,0 19,5M16,1H4A2,2 0 0,0 2,3V17H4V3H16V1Z"></path></svg><svg viewBox="0 0 24 24" class="copyButtonSuccessIcon_LjdS"><path fill="currentColor" d="M21,7L9,19L3.5,13.5L4.91,12.09L9,16.17L19.59,5.59L21,7Z"></path></svg></span></button></div></div></div>
<p>Replace <code>&lt;Tenant ID&gt;</code>, <code>&lt;Application (client) ID&gt;</code>, and <code>&lt;Application (client) Secret&gt;</code> with the corresponding values from the OIDC Application in the Microsoft Entra Admin Center.</p>
<div class="theme-admonition theme-admonition-note admonition_xJq3 alert alert--secondary"><div class="admonitionHeading_Gvgb"><span class="admonitionIcon_Rf37"><svg viewBox="0 0 14 16"><path fill-rule="evenodd" d="M6.3 5.69a.942.942 0 0 1-.28-.7c0-.28.09-.52.28-.7.19-.18.42-.28.7-.28.28 0 .52.09.7.28.18.19.28.42.28.7 0 .28-.09.52-.28.7a1 1 0 0 1-.7.3c-.28 0-.52-.11-.7-.3zM8 7.99c-.02-.25-.11-.48-.31-.69-.2-.19-.42-.3-.69-.31H6c-.27.02-.48.13-.69.31-.2.2-.3.44-.31.69h1v3c.02.27.11.5.31.69.2.2.42.31.69.31h1c.27 0 .48-.11.69-.31.2-.19.3-.42.31-.69H8V7.98v.01zM7 2.3c-3.14 0-5.7 2.54-5.7 5.68 0 3.14 2.56 5.7 5.7 5.7s5.7-2.55 5.7-5.7c0-3.15-2.56-5.69-5.7-5.69v.01zM7 .98c3.86 0 7 3.14 7 7s-3.14 7-7 7-7-3.12-7-7 3.14-7 7-7z"></path></svg></span>note</div><div class="admonitionContent_BuS1"><p>You can test the authentication to the EKS cluster immediately by running the following command:</p><div class="language-bash codeBlockContainer_Ckt0 theme-code-block" style="--prism-color:#393A34;--prism-background-color:#f6f8fa"><div class="codeBlockContent_biex"><pre tabindex="0" class="prism-code language-bash codeBlock_bY9V thin-scrollbar" style="color:#393A34;background-color:#f6f8fa"><code class="codeBlockLines_e6Vv"><span class="token-line" style="color:#393A34"><span class="token plain">kubectl </span><span class="token parameter variable" style="color:#36acaa">--user</span><span class="token operator" style="color:#393A34">=</span><span class="token plain">eks get nodes</span><br></span></code></pre><div class="buttonGroup__atx"><button type="button" aria-label="Copy code to clipboard" title="Copy" class="clean-btn"><span class="copyButtonIcons_eSgA" aria-hidden="true"><svg viewBox="0 0 24 24" class="copyButtonIcon_y97N"><path fill="currentColor" d="M19,21H8V7H19M19,5H8A2,2 0 0,0 6,7V21A2,2 0 0,0 8,23H19A2,2 0 0,0 21,21V7A2,2 0 0,0 19,5M16,1H4A2,2 0 0,0 2,3V17H4V3H16V1Z"></path></svg><svg viewBox="0 0 24 24" class="copyButtonSuccessIcon_LjdS"><path fill="currentColor" d="M21,7L9,19L3.5,13.5L4.91,12.09L9,16.17L19.59,5.59L21,7Z"></path></svg></span></button></div></div></div></div></div>
</li>
<li>
<p>Set the context for the kubeconfig file to use the <code>eks</code> user and the OIDC configuration. Replace <code>&lt;cluster-name&gt;</code> with the name of your EKS cluster.</p>
<div class="language-bash codeBlockContainer_Ckt0 theme-code-block" style="--prism-color:#393A34;--prism-background-color:#f6f8fa"><div class="codeBlockContent_biex"><pre tabindex="0" class="prism-code language-bash codeBlock_bY9V thin-scrollbar" style="color:#393A34;background-color:#f6f8fa"><code class="codeBlockLines_e6Vv"><span class="token-line" style="color:#393A34"><span class="token plain">kubectl config set-context eks </span><span class="token parameter variable" style="color:#36acaa">--user</span><span class="token operator" style="color:#393A34">=</span><span class="token plain">eks </span><span class="token parameter variable" style="color:#36acaa">--cluster</span><span class="token operator" style="color:#393A34">=</span><span class="token operator" style="color:#393A34">&lt;</span><span class="token plain">cluster-name</span><span class="token operator" style="color:#393A34">&gt;</span><br></span></code></pre><div class="buttonGroup__atx"><button type="button" aria-label="Copy code to clipboard" title="Copy" class="clean-btn"><span class="copyButtonIcons_eSgA" aria-hidden="true"><svg viewBox="0 0 24 24" class="copyButtonIcon_y97N"><path fill="currentColor" d="M19,21H8V7H19M19,5H8A2,2 0 0,0 6,7V21A2,2 0 0,0 8,23H19A2,2 0 0,0 21,21V7A2,2 0 0,0 19,5M16,1H4A2,2 0 0,0 2,3V17H4V3H16V1Z"></path></svg><svg viewBox="0 0 24 24" class="copyButtonSuccessIcon_LjdS"><path fill="currentColor" d="M21,7L9,19L3.5,13.5L4.91,12.09L9,16.17L19.59,5.59L21,7Z"></path></svg></span></button></div></div></div>
<p>To switch to the <code>eks</code> context, execute the following command:</p>
<div class="language-bash codeBlockContainer_Ckt0 theme-code-block" style="--prism-color:#393A34;--prism-background-color:#f6f8fa"><div class="codeBlockContent_biex"><pre tabindex="0" class="prism-code language-bash codeBlock_bY9V thin-scrollbar" style="color:#393A34;background-color:#f6f8fa"><code class="codeBlockLines_e6Vv"><span class="token-line" style="color:#393A34"><span class="token plain">kubectl config use-context eks</span><br></span></code></pre><div class="buttonGroup__atx"><button type="button" aria-label="Copy code to clipboard" title="Copy" class="clean-btn"><span class="copyButtonIcons_eSgA" aria-hidden="true"><svg viewBox="0 0 24 24" class="copyButtonIcon_y97N"><path fill="currentColor" d="M19,21H8V7H19M19,5H8A2,2 0 0,0 6,7V21A2,2 0 0,0 8,23H19A2,2 0 0,0 21,21V7A2,2 0 0,0 19,5M16,1H4A2,2 0 0,0 2,3V17H4V3H16V1Z"></path></svg><svg viewBox="0 0 24 24" class="copyButtonSuccessIcon_LjdS"><path fill="currentColor" d="M21,7L9,19L3.5,13.5L4.91,12.09L9,16.17L19.59,5.59L21,7Z"></path></svg></span></button></div></div></div>
<p>Test the authentication by running the following command:</p>
<div class="language-bash codeBlockContainer_Ckt0 theme-code-block" style="--prism-color:#393A34;--prism-background-color:#f6f8fa"><div class="codeBlockContent_biex"><pre tabindex="0" class="prism-code language-bash codeBlock_bY9V thin-scrollbar" style="color:#393A34;background-color:#f6f8fa"><code class="codeBlockLines_e6Vv"><span class="token-line" style="color:#393A34"><span class="token plain">kubectl get nodes</span><br></span></code></pre><div class="buttonGroup__atx"><button type="button" aria-label="Copy code to clipboard" title="Copy" class="clean-btn"><span class="copyButtonIcons_eSgA" aria-hidden="true"><svg viewBox="0 0 24 24" class="copyButtonIcon_y97N"><path fill="currentColor" d="M19,21H8V7H19M19,5H8A2,2 0 0,0 6,7V21A2,2 0 0,0 8,23H19A2,2 0 0,0 21,21V7A2,2 0 0,0 19,5M16,1H4A2,2 0 0,0 2,3V17H4V3H16V1Z"></path></svg><svg viewBox="0 0 24 24" class="copyButtonSuccessIcon_LjdS"><path fill="currentColor" d="M21,7L9,19L3.5,13.5L4.91,12.09L9,16.17L19.59,5.59L21,7Z"></path></svg></span></button></div></div></div>
</li>
</ol>
<h2 class="anchor anchorWithStickyNavbar_LWe7" id="configuring-kuberocketci-portal-with-microsoft-entra-oidc-authentication">Configuring KubeRocketCI Portal with Microsoft Entra OIDC Authentication<a href="#configuring-kuberocketci-portal-with-microsoft-entra-oidc-authentication" class="hash-link" aria-label="Direct link to Configuring KubeRocketCI Portal with Microsoft Entra OIDC Authentication" title="Direct link to Configuring KubeRocketCI Portal with Microsoft Entra OIDC Authentication">​</a></h2>
<ol>
<li>
<p>Starting from version 3.10, KubeRocketCI platform supports Microsoft Entra as an Identity Provider for OIDC authentication in the Portal UI. To configure Microsoft Entra OIDC authentication, navigate to the <a href="https://github.com/epam/edp-install" target="_blank" rel="noopener noreferrer">edp-install</a> Helm chart repository and set the following values in the <code>values.yaml</code> file:</p>
<div class="language-yaml codeBlockContainer_Ckt0 theme-code-block" style="--prism-color:#393A34;--prism-background-color:#f6f8fa"><div class="codeBlockContent_biex"><pre tabindex="0" class="prism-code language-yaml codeBlock_bY9V thin-scrollbar" style="color:#393A34;background-color:#f6f8fa"><code class="codeBlockLines_e6Vv"><span class="token-line" style="color:#393A34"><span class="token punctuation" style="color:#393A34">...</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain"></span><span class="token key atrule" style="color:#00a4db">edp-headlamp</span><span class="token punctuation" style="color:#393A34">:</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">  </span><span class="token key atrule" style="color:#00a4db">enabled</span><span class="token punctuation" style="color:#393A34">:</span><span class="token plain"> </span><span class="token boolean important" style="color:#36acaa">true</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">  </span><span class="token key atrule" style="color:#00a4db">config</span><span class="token punctuation" style="color:#393A34">:</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    </span><span class="token key atrule" style="color:#00a4db">oidc</span><span class="token punctuation" style="color:#393A34">:</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">      </span><span class="token key atrule" style="color:#00a4db">enabled</span><span class="token punctuation" style="color:#393A34">:</span><span class="token plain"> </span><span class="token boolean important" style="color:#36acaa">true</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">      </span><span class="token key atrule" style="color:#00a4db">issuerUrl</span><span class="token punctuation" style="color:#393A34">:</span><span class="token plain"> </span><span class="token string" style="color:#e3116c">&quot;https://sts.windows.net/&lt;Tenant ID&gt;/&quot;</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">      </span><span class="token key atrule" style="color:#00a4db">clientID</span><span class="token punctuation" style="color:#393A34">:</span><span class="token plain"> </span><span class="token string" style="color:#e3116c">&quot;&lt;Application (client) ID&gt;&quot;</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">      </span><span class="token key atrule" style="color:#00a4db">clientSecretName</span><span class="token punctuation" style="color:#393A34">:</span><span class="token plain"> </span><span class="token string" style="color:#e3116c">&quot;&lt;name of the secret containing the client-secret value&gt;&quot;</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">      </span><span class="token key atrule" style="color:#00a4db">clientSecretKey</span><span class="token punctuation" style="color:#393A34">:</span><span class="token plain"> </span><span class="token string" style="color:#e3116c">&quot;clientSecret&quot;</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain"></span><span class="token punctuation" style="color:#393A34">...</span><br></span></code></pre><div class="buttonGroup__atx"><button type="button" aria-label="Copy code to clipboard" title="Copy" class="clean-btn"><span class="copyButtonIcons_eSgA" aria-hidden="true"><svg viewBox="0 0 24 24" class="copyButtonIcon_y97N"><path fill="currentColor" d="M19,21H8V7H19M19,5H8A2,2 0 0,0 6,7V21A2,2 0 0,0 8,23H19A2,2 0 0,0 21,21V7A2,2 0 0,0 19,5M16,1H4A2,2 0 0,0 2,3V17H4V3H16V1Z"></path></svg><svg viewBox="0 0 24 24" class="copyButtonSuccessIcon_LjdS"><path fill="currentColor" d="M21,7L9,19L3.5,13.5L4.91,12.09L9,16.17L19.59,5.59L21,7Z"></path></svg></span></button></div></div></div>
<p>Replace <code>&lt;Tenant ID&gt;</code> and <code>&lt;Application (client) ID&gt;</code> with the corresponding values from the OIDC Application in the Microsoft Entra Admin Center. Also, specify the name of the Kubernetes Secret containing the Application <strong>Client secret</strong> value in the <code>clientSecretName</code> field.</p>
</li>
<li>
<p>In the Microsoft Entra Admin Center, navigate to the created OIDC Application and select the <strong>Authentication</strong> section. In the <strong>Redirect URIs</strong> field, add the URL of the KubeRocketCI Portal, for example, <code>https://portal-&lt;krci-namespace&gt;.&lt;dns-wildcard&gt;/oidc-callback</code>.</p>
<p><img decoding="async" loading="lazy" alt="Redirect URIs" src="/assets/images/redirect-uris-7fdaed8d83ca7e79234435a232fce0ec.png" width="3364" height="1660" class="img_ev3q"></p>
</li>
<li>
<p>After applying the changes, the KubeRocketCI Portal will be configured to use Microsoft Entra OIDC authentication. Users will be able to log in to the Portal using <strong>Sign In</strong> option.</p>
<p><img decoding="async" loading="lazy" alt="Sign In" src="/assets/images/sign-in-fc29d9aa4a004d68c4b951366b54cba9.png" width="3364" height="1660" class="img_ev3q"></p>
</li>
</ol>
<h2 class="anchor anchorWithStickyNavbar_LWe7" id="conclusion">Conclusion<a href="#conclusion" class="hash-link" aria-label="Direct link to Conclusion" title="Direct link to Conclusion">​</a></h2>
<p>Integrating OpenID Connect (OIDC) authentication with Microsoft Entra in AWS EKS is a powerful way to enhance security and streamline user access management. By leveraging the capabilities of SSO, OIDC, and Microsoft Entra, organizations can simplify authentication processes, enforce access controls, and ensure secure navigation across cloud-native environments. Whether you&#x27;re managing user identities, enhancing compliance, or improving user experience, this integration provides a robust solution to meet your identity and access management needs. By following the steps outlined in this guide, you can configure Microsoft Entra as an Identity Provider in AWS EKS, authenticate users using OIDC, and secure access to your EKS clusters and KubeRocketCI Portal effectively.</p></div><footer class="docusaurus-mt-lg"><div class="row margin-top--sm theme-blog-footer-edit-meta-row"><div class="col"><b>Tags:</b><ul class="tags_jXut padding--none margin-left--sm"><li class="tag_QGVx"><a class="tag_zVej tagRegular_sFm0" href="/blog/tags/kube-rocket-ci/">KubeRocketCI</a></li><li class="tag_QGVx"><a class="tag_zVej tagRegular_sFm0" href="/blog/tags/aws-eks/">AWS EKS</a></li><li class="tag_QGVx"><a class="tag_zVej tagRegular_sFm0" href="/blog/tags/sso/">SSO</a></li><li class="tag_QGVx"><a class="tag_zVej tagRegular_sFm0" href="/blog/tags/microsoft-entra/">Microsoft Entra</a></li><li class="tag_QGVx"><a class="tag_zVej tagRegular_sFm0" href="/blog/tags/oidc/">OIDC</a></li><li class="tag_QGVx"><a class="tag_zVej tagRegular_sFm0" href="/blog/tags/kubernetes/">Kubernetes</a></li><li class="tag_QGVx"><a class="tag_zVej tagRegular_sFm0" href="/blog/tags/security/">Security</a></li></ul></div></div></footer></article><nav class="pagination-nav docusaurus-mt-lg" aria-label="Blog post page navigation"><a class="pagination-nav__link pagination-nav__link--next" href="/blog/advanced-aws-eks-management-oidc-keycloak/"><div class="pagination-nav__sublabel">Older post</div><div class="pagination-nav__label">Advanced AWS EKS Management: Implementing SSO via OIDC and Keycloak</div></a></nav></main><div class="col col--2"><div class="tableOfContents_bqdL thin-scrollbar"><ul class="table-of-contents table-of-contents__left-border"><li><a href="#prerequisites" class="table-of-contents__link toc-highlight">Prerequisites</a></li><li><a href="#understanding-sso-oidc-and-microsoft-entra" class="table-of-contents__link toc-highlight">Understanding SSO, OIDC, and Microsoft Entra</a><ul><li><a href="#microsoft-entra-overview" class="table-of-contents__link toc-highlight">Microsoft Entra Overview</a></li></ul></li><li><a href="#create-a-new-microsoft-entra-tenant" class="table-of-contents__link toc-highlight">Create a new Microsoft Entra Tenant</a></li><li><a href="#creating-and-configuring-oidc-application-in-microsoft-entra" class="table-of-contents__link toc-highlight">Creating and Configuring OIDC Application in Microsoft Entra</a></li><li><a href="#creating-users-and-groups-in-microsoft-entra" class="table-of-contents__link toc-highlight">Creating Users and Groups in Microsoft Entra</a><ul><li><a href="#creating-a-group" class="table-of-contents__link toc-highlight">Creating a Group</a></li><li><a href="#adding-users-to-the-group" class="table-of-contents__link toc-highlight">Adding Users to the Group</a></li></ul></li><li><a href="#configuring-microsoft-entra-as-an-identity-provider-in-aws-eks" class="table-of-contents__link toc-highlight">Configuring Microsoft Entra as an Identity Provider in AWS EKS</a><ul><li><a href="#method-1-using-the-aws-management-console" class="table-of-contents__link toc-highlight">Method 1: Using the AWS Management Console</a></li><li><a href="#method-2-using-terraform" class="table-of-contents__link toc-highlight">Method 2: Using Terraform</a></li></ul></li><li><a href="#configuring-rbac-resources-in-aws-eks-cluster-for-microsoft-entra-user-groups" class="table-of-contents__link toc-highlight">Configuring RBAC Resources in AWS EKS cluster for Microsoft Entra User Groups</a></li><li><a href="#authenticating-to-aws-eks-using-microsoft-entra-with-kubectl" class="table-of-contents__link toc-highlight">Authenticating to AWS EKS using Microsoft Entra with kubectl</a></li><li><a href="#configuring-kuberocketci-portal-with-microsoft-entra-oidc-authentication" class="table-of-contents__link toc-highlight">Configuring KubeRocketCI Portal with Microsoft Entra OIDC Authentication</a></li><li><a href="#conclusion" class="table-of-contents__link toc-highlight">Conclusion</a></li></ul></div></div></div></div></div><footer class="footer footer--dark"><div class="container container-fluid"><div class="row footer__links"><div class="col footer__col"><div class="footer__title">Readings</div><ul class="footer__items clean-list"><li class="footer__item"><a class="footer__link-item" href="/docs/about-platform/">What is KubeRocketCI</a></li><li class="footer__item"><a class="footer__link-item" href="/blog/">Blogs: Interesting Facts From The DevSecOps Life</a></li><li class="footer__item"><a class="footer__link-item" href="/docs/user-guide/">User Guide: How To Use KubeRocketCI</a></li><li class="footer__item"><a class="footer__link-item" href="/docs/developer-guide/">Developer Guide: How We Build KubeRocketCI</a></li><li class="footer__item"><a class="footer__link-item" href="/docs/api/overview/">API Reference: Use KubeRocketCI To Build Your Solutions</a></li></ul></div><div class="col footer__col"><div class="footer__title">Our Community</div><ul class="footer__items clean-list"><li class="footer__item"><a href="https://www.youtube.com/@theplatformteam" target="_blank" rel="noopener noreferrer" class="footer__link-item">YouTube<svg width="13.5" height="13.5" aria-hidden="true" viewBox="0 0 24 24" class="iconExternalLink_nPIU"><path fill="currentColor" d="M21 13v10h-21v-19h12v2h-10v15h17v-8h2zm3-12h-10.988l4.035 4-6.977 7.07 2.828 2.828 6.977-7.07 4.125 4.172v-11z"></path></svg></a></li><li class="footer__item"><a href="https://medium.com/kuberocketci" target="_blank" rel="noopener noreferrer" class="footer__link-item">Medium<svg width="13.5" height="13.5" aria-hidden="true" viewBox="0 0 24 24" class="iconExternalLink_nPIU"><path fill="currentColor" d="M21 13v10h-21v-19h12v2h-10v15h17v-8h2zm3-12h-10.988l4.035 4-6.977 7.07 2.828 2.828 6.977-7.07 4.125 4.172v-11z"></path></svg></a></li></ul></div><div class="col footer__col"><div class="footer__title">Learn More</div><ul class="footer__items clean-list"><li class="footer__item"><a href="https://github.com/kuberocketci/docs" target="_blank" rel="noopener noreferrer" class="footer__link-item">KubeRocketCI on the GitHub<svg width="13.5" height="13.5" aria-hidden="true" viewBox="0 0 24 24" class="iconExternalLink_nPIU"><path fill="currentColor" d="M21 13v10h-21v-19h12v2h-10v15h17v-8h2zm3-12h-10.988l4.035 4-6.977 7.07 2.828 2.828 6.977-7.07 4.125 4.172v-11z"></path></svg></a></li><li class="footer__item"><a href="https://artifacthub.io/packages/search?repo=epmdedp" target="_blank" rel="noopener noreferrer" class="footer__link-item">KubeRocketCI on the ArtifactHub<svg width="13.5" height="13.5" aria-hidden="true" viewBox="0 0 24 24" class="iconExternalLink_nPIU"><path fill="currentColor" d="M21 13v10h-21v-19h12v2h-10v15h17v-8h2zm3-12h-10.988l4.035 4-6.977 7.07 2.828 2.828 6.977-7.07 4.125 4.172v-11z"></path></svg></a></li><li class="footer__item"><a href="https://operatorhub.io/?keyword=edp" target="_blank" rel="noopener noreferrer" class="footer__link-item">KubeRocketCI on the OperatorHub<svg width="13.5" height="13.5" aria-hidden="true" viewBox="0 0 24 24" class="iconExternalLink_nPIU"><path fill="currentColor" d="M21 13v10h-21v-19h12v2h-10v15h17v-8h2zm3-12h-10.988l4.035 4-6.977 7.07 2.828 2.828 6.977-7.07 4.125 4.172v-11z"></path></svg></a></li><li class="footer__item"><a href="https://hub.docker.com/u/epamedp" target="_blank" rel="noopener noreferrer" class="footer__link-item">Docker Hub<svg width="13.5" height="13.5" aria-hidden="true" viewBox="0 0 24 24" class="iconExternalLink_nPIU"><path fill="currentColor" d="M21 13v10h-21v-19h12v2h-10v15h17v-8h2zm3-12h-10.988l4.035 4-6.977 7.07 2.828 2.828 6.977-7.07 4.125 4.172v-11z"></path></svg></a></li><li class="footer__item"><a class="footer__link-item" href="/blog/tags/">Blog categories</a></li><li class="footer__item"><a href="https://docs.kuberocketci.io/blog/rss.xml" target="_blank" rel="noopener noreferrer" class="footer__link-item">RSS feed<svg width="13.5" height="13.5" aria-hidden="true" viewBox="0 0 24 24" class="iconExternalLink_nPIU"><path fill="currentColor" d="M21 13v10h-21v-19h12v2h-10v15h17v-8h2zm3-12h-10.988l4.035 4-6.977 7.07 2.828 2.828 6.977-7.07 4.125 4.172v-11z"></path></svg></a></li><li class="footer__item"><a href="https://docs.kuberocketci.io/blog/atom.xml" target="_blank" rel="noopener noreferrer" class="footer__link-item">Atom feed<svg width="13.5" height="13.5" aria-hidden="true" viewBox="0 0 24 24" class="iconExternalLink_nPIU"><path fill="currentColor" d="M21 13v10h-21v-19h12v2h-10v15h17v-8h2zm3-12h-10.988l4.035 4-6.977 7.07 2.828 2.828 6.977-7.07 4.125 4.172v-11z"></path></svg></a></li></ul></div></div><div class="footer__bottom text--center"><div class="footer__copyright">Copyright © 2025 KubeRocketCI. Built with Docusaurus.</div></div></div></footer></div>
</body>
</html>