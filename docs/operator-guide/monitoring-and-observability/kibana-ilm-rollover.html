<!doctype html>
<html lang="en" dir="ltr" class="docs-wrapper plugin-docs plugin-id-default docs-version-3.10 docs-doc-page docs-doc-id-operator-guide/monitoring-and-observability/kibana-ilm-rollover" data-has-hydrated="false">
<head>
<meta charset="UTF-8">
<meta name="generator" content="Docusaurus v3.7.0">
<title data-rh="true">Configuring Fluent Bit for Elasticsearch ILM Rollover | KubeRocketCI</title><meta data-rh="true" name="viewport" content="width=device-width,initial-scale=1"><meta data-rh="true" property="og:url" content="https://docs.kuberocketci.io/docs/operator-guide/monitoring-and-observability/kibana-ilm-rollover"><meta data-rh="true" property="og:locale" content="en"><meta data-rh="true" name="docusaurus_locale" content="en"><meta data-rh="true" name="docsearch:language" content="en"><meta data-rh="true" name="keywords" content="KubeRocketCI, CI/CD, DevOps, Kubernetes, Tekton, Helm Charts, AWS, Argo CD, Add-Ons, Installation Guide, User Guide, Developer Guide, Operator Guide"><meta data-rh="true" name="author" content="KubeRocketCI Team"><meta data-rh="true" name="og:type" content="website"><meta data-rh="true" name="og:url" content="https://docs.kuberocketci.io"><meta data-rh="true" name="og:title" content="KubeRocketCI Documentation | Comprehensive Guide and Tutorials"><meta data-rh="true" name="og:description" content="Explore KubeRocketCI Documentation for detailed guides, tutorials, and insights into KubeRocketCI CI/CD flow, platform components, and add-ons. Learn how to enhance your DevOps practices with KubeRocketCI."><meta data-rh="true" name="og:image" content="https://docs.kuberocketci.io/img/kuberocketci-social-card.png"><meta data-rh="true" name="twitter:card" content="summary_large_image"><meta data-rh="true" name="twitter:url" content="https://docs.kuberocketci.io"><meta data-rh="true" name="twitter:title" content="KubeRocketCI Documentation | Comprehensive Guide and Tutorials"><meta data-rh="true" name="twitter:description" content="Explore KubeRocketCI Documentation for detailed guides, tutorials, and insights into KubeRocketCI CI/CD flow, platform components, and add-ons. Learn how to enhance your DevOps practices with KubeRocketCI."><meta data-rh="true" name="twitter:image" content="https://docs.kuberocketci.io/img/kuberocketci-social-card.png"><meta data-rh="true" name="docusaurus_version" content="3.10"><meta data-rh="true" name="docusaurus_tag" content="docs-default-3.10"><meta data-rh="true" name="docsearch:version" content="3.10"><meta data-rh="true" name="docsearch:docusaurus_tag" content="docs-default-3.10"><meta data-rh="true" property="og:title" content="Configuring Fluent Bit for Elasticsearch ILM Rollover | KubeRocketCI"><meta data-rh="true" name="description" content="Learn how to configure Fluent Bit for Elasticsearch ILM Rollover with Microsoft Entra as the Identity Provider, enhancing log management in KubeRocketCI."><meta data-rh="true" property="og:description" content="Learn how to configure Fluent Bit for Elasticsearch ILM Rollover with Microsoft Entra as the Identity Provider, enhancing log management in KubeRocketCI."><link data-rh="true" rel="icon" href="/img/favicon.ico"><link data-rh="true" rel="alternate" href="https://docs.kuberocketci.io/docs/operator-guide/monitoring-and-observability/kibana-ilm-rollover" hreflang="en"><link data-rh="true" rel="alternate" href="https://docs.kuberocketci.io/docs/operator-guide/monitoring-and-observability/kibana-ilm-rollover" hreflang="x-default"><link data-rh="true" rel="preconnect" href="https://ZYN6QI47ZW-dsn.algolia.net" crossorigin="anonymous"><link data-rh="true" rel="canonical" href="https://docs.kuberocketci.io/docs/operator-guide/monitoring-and-observability/kibana-ilm-rollover"><link rel="alternate" type="application/rss+xml" href="/blog/rss.xml" title="KubeRocketCI RSS Feed">
<link rel="alternate" type="application/atom+xml" href="/blog/atom.xml" title="KubeRocketCI Atom Feed">
<link rel="alternate" type="application/json" href="/blog/feed.json" title="KubeRocketCI JSON Feed">




<link rel="search" type="application/opensearchdescription+xml" title="KubeRocketCI" href="/opensearch.xml">


<script type="application/ld+json">{"@context":"https://schema.org","@graph":[{"@id":"https://docs.kuberocketci.io","@type":"WebSite","url":"https://docs.kuberocketci.io","name":"KubeRocketCI Documentation","description":"Explore KubeRocketCI Documentation for detailed guides, tutorials, and insights into KubeRocketCI CI/CD flow, platform components, and add-ons. Learn how to enhance your DevOps practices with KubeRocketCI.","sameAs":["https://medium.com/kuberocketci","https://hub.docker.com/u/epamedp","https://epam.github.io/edp-install/"],"copyrightHolder":{"@id":"https://docs.kuberocketci.io/docs/about-platform/"},"publisher":{"@id":"https://docs.kuberocketci.io/docs/about-platform/"},"potentialAction":{"@type":"SearchAction","target":{"@type":"EntryPoint","urlTemplate":"https://docs.kuberocketci.io/search?q={search_term_string}"},"query-input":"required name=search_term_string"},"inLanguage":"en-UK"}]}</script>
<link rel="stylesheet" href="/css/cookie-consent.css">
<script src="https://cookie-cdn.cookiepro.com/consent/0194a78c-7932-70b9-abdc-9d8096b5f261/OtAutoBlock.js"></script>
<script src="https://cookie-cdn.cookiepro.com/scripttemplates/otSDKStub.js" charset="UTF-8" data-domain-script="0194a78c-7932-70b9-abdc-9d8096b5f261"></script>
<script>function OptanonWrapper(){}</script>
<link rel="preconnect" href="https://www.googletagmanager.com">
<script src="https://www.googletagmanager.com/gtm.js?id=GTM-527T2HLF" async="true"></script>
<script>window.dataLayer=window.dataLayer||[]</script>
<script>!function(e,t,a,n,g){e[n]=e[n]||[],e[n].push({"gtm.start":(new Date).getTime(),event:"gtm.js"});var m=t.getElementsByTagName(a)[0],r=t.createElement(a);r.async=!0,r.src="https://www.googletagmanager.com/gtm.js?id=GTM-527T2HLF",m.parentNode.insertBefore(r,m)}(window,document,"script","dataLayer")</script><link rel="stylesheet" href="/assets/css/styles.4fa8fdbf.css">
<script src="/assets/js/runtime~main.4bec8160.js" defer="defer"></script>
<script src="/assets/js/main.fc34de49.js" defer="defer"></script>
</head>
<body class="navigation-with-keyboard">
<script>!function(){function t(t){document.documentElement.setAttribute("data-theme",t)}var e=function(){try{return new URLSearchParams(window.location.search).get("docusaurus-theme")}catch(t){}}()||function(){try{return window.localStorage.getItem("theme")}catch(t){}}();t(null!==e?e:"light")}(),function(){try{const a=new URLSearchParams(window.location.search).entries();for(var[t,e]of a)if(t.startsWith("docusaurus-data-")){var n=t.replace("docusaurus-data-","data-");document.documentElement.setAttribute(n,e)}}catch(t){}}(),document.documentElement.setAttribute("data-announcement-bar-initially-dismissed",function(){try{return"true"===localStorage.getItem("docusaurus.announcement.dismiss")}catch(t){}return!1}())</script><div id="__docusaurus"><div role="region" aria-label="Skip to main content"><a class="skipToContent_fXgn" href="#__docusaurus_skipToContent_fallback">Skip to main content</a></div><div class="announcementBar_mb4j" role="banner"><div class="announcementBarPlaceholder_vyr4"></div><div class="content_knG7 announcementBarContent_xLdY">KubeRocketCI Team Supports Ukraine ðŸ‡ºðŸ‡¦. In solidarity, we ask that you consider financially supporting the organizations below: <a href="https://epamuafund.rengiving.com/causes/159bdd2f71854adf8ed5251fe26d2fe0" target="_blank">EPAMâ€™s Global Partners for the Ukraine Humanitarian Crisis</a></div><button type="button" aria-label="Close" class="clean-btn close closeButton_CVFx announcementBarClose_gvF7"><svg viewBox="0 0 15 15" width="14" height="14"><g stroke="currentColor" stroke-width="3.1"><path d="M.75.75l13.5 13.5M14.25.75L.75 14.25"></path></g></svg></button></div><nav aria-label="Main" class="navbar navbar--fixed-top"><div class="navbar__inner"><div class="navbar__items"><button aria-label="Toggle navigation bar" aria-expanded="false" class="navbar__toggle clean-btn" type="button"><svg width="30" height="30" viewBox="0 0 30 30" aria-hidden="true"><path stroke="currentColor" stroke-linecap="round" stroke-miterlimit="10" stroke-width="2" d="M4 7h22M4 15h22M4 23h22"></path></svg></button><a class="navbar__brand" href="/"><div class="navbar__logo"><img src="/img/logo.svg" alt="KubeRocketCI Logo" class="themedComponent_mlkZ themedComponent--light_NVdE"><img src="/img/logo.svg" alt="KubeRocketCI Logo" class="themedComponent_mlkZ themedComponent--dark_xIcU"></div><b class="navbar__title text--truncate">KubeRocketCI</b></a><a class="navbar__item navbar__link" href="/docs/about-platform">Getting Started</a><div class="navbar__item dropdown dropdown--hoverable"><a href="#" aria-haspopup="true" aria-expanded="false" role="button" class="navbar__link">Guides</a><ul class="dropdown__menu"><li><a aria-current="page" class="dropdown__link dropdown__link--active" href="/docs/operator-guide">Operator Guide</a></li><li><a class="dropdown__link" href="/docs/user-guide">User Guide</a></li><li><a class="dropdown__link" href="/docs/developer-guide">Developer Guide</a></li></ul></div><a class="navbar__item navbar__link" href="/docs/use-cases">Use Cases</a><a class="navbar__item navbar__link" href="/faq/general-questions">FAQ</a><a class="navbar__item navbar__link" href="/pricing">Pricing</a></div><div class="navbar__items navbar__items--right"><a class="navbar__item navbar__link" href="/docs/api/overview">API Reference</a><div class="navbar__item dropdown dropdown--hoverable dropdown--right"><a class="navbar__link" aria-haspopup="true" aria-expanded="false" role="button" href="/docs/operator-guide/monitoring-and-observability/kibana-ilm-rollover">3.10</a><ul class="dropdown__menu"><li><a class="dropdown__link" href="/docs/next/operator-guide/monitoring-and-observability/kibana-ilm-rollover">3.11-dev</a></li><li><a aria-current="page" class="dropdown__link dropdown__link--active" href="/docs/operator-guide/monitoring-and-observability/kibana-ilm-rollover">3.10</a></li><li><a class="dropdown__link" href="/docs/3.9/operator-guide/monitoring-and-observability/kibana-ilm-rollover">3.9</a></li><li class=""><hr style="margin: 0.1rem"></li><li><a href="https://github.com/epam/edp-install/blob/master/RELEASES.md" target="_blank" rel="noopener noreferrer" class="dropdown__link">Releases<svg width="12" height="12" aria-hidden="true" viewBox="0 0 24 24" class="iconExternalLink_nPIU"><path fill="currentColor" d="M21 13v10h-21v-19h12v2h-10v15h17v-8h2zm3-12h-10.988l4.035 4-6.977 7.07 2.828 2.828 6.977-7.07 4.125 4.172v-11z"></path></svg></a></li></ul></div><a href="https://github.com/kuberocketci/docs" target="_blank" rel="noopener noreferrer" class="navbar__item navbar__link">GitHub<svg width="13.5" height="13.5" aria-hidden="true" viewBox="0 0 24 24" class="iconExternalLink_nPIU"><path fill="currentColor" d="M21 13v10h-21v-19h12v2h-10v15h17v-8h2zm3-12h-10.988l4.035 4-6.977 7.07 2.828 2.828 6.977-7.07 4.125 4.172v-11z"></path></svg></a><div class="toggle_vylO colorModeToggle_DEke"><button class="clean-btn toggleButton_gllP toggleButtonDisabled_aARS" type="button" disabled="" title="Switch between dark and light mode (currently light mode)" aria-label="Switch between dark and light mode (currently light mode)" aria-live="polite" aria-pressed="false"><svg viewBox="0 0 24 24" width="24" height="24" class="lightToggleIcon_pyhR"><path fill="currentColor" d="M12,9c1.65,0,3,1.35,3,3s-1.35,3-3,3s-3-1.35-3-3S10.35,9,12,9 M12,7c-2.76,0-5,2.24-5,5s2.24,5,5,5s5-2.24,5-5 S14.76,7,12,7L12,7z M2,13l2,0c0.55,0,1-0.45,1-1s-0.45-1-1-1l-2,0c-0.55,0-1,0.45-1,1S1.45,13,2,13z M20,13l2,0c0.55,0,1-0.45,1-1 s-0.45-1-1-1l-2,0c-0.55,0-1,0.45-1,1S19.45,13,20,13z M11,2v2c0,0.55,0.45,1,1,1s1-0.45,1-1V2c0-0.55-0.45-1-1-1S11,1.45,11,2z M11,20v2c0,0.55,0.45,1,1,1s1-0.45,1-1v-2c0-0.55-0.45-1-1-1C11.45,19,11,19.45,11,20z M5.99,4.58c-0.39-0.39-1.03-0.39-1.41,0 c-0.39,0.39-0.39,1.03,0,1.41l1.06,1.06c0.39,0.39,1.03,0.39,1.41,0s0.39-1.03,0-1.41L5.99,4.58z M18.36,16.95 c-0.39-0.39-1.03-0.39-1.41,0c-0.39,0.39-0.39,1.03,0,1.41l1.06,1.06c0.39,0.39,1.03,0.39,1.41,0c0.39-0.39,0.39-1.03,0-1.41 L18.36,16.95z M19.42,5.99c0.39-0.39,0.39-1.03,0-1.41c-0.39-0.39-1.03-0.39-1.41,0l-1.06,1.06c-0.39,0.39-0.39,1.03,0,1.41 s1.03,0.39,1.41,0L19.42,5.99z M7.05,18.36c0.39-0.39,0.39-1.03,0-1.41c-0.39-0.39-1.03-0.39-1.41,0l-1.06,1.06 c-0.39,0.39-0.39,1.03,0,1.41s1.03,0.39,1.41,0L7.05,18.36z"></path></svg><svg viewBox="0 0 24 24" width="24" height="24" class="darkToggleIcon_wfgR"><path fill="currentColor" d="M9.37,5.51C9.19,6.15,9.1,6.82,9.1,7.5c0,4.08,3.32,7.4,7.4,7.4c0.68,0,1.35-0.09,1.99-0.27C17.45,17.19,14.93,19,12,19 c-3.86,0-7-3.14-7-7C5,9.07,6.81,6.55,9.37,5.51z M12,3c-4.97,0-9,4.03-9,9s4.03,9,9,9s9-4.03,9-9c0-0.46-0.04-0.92-0.1-1.36 c-0.98,1.37-2.58,2.26-4.4,2.26c-2.98,0-5.4-2.42-5.4-5.4c0-1.81,0.89-3.42,2.26-4.4C12.92,3.04,12.46,3,12,3L12,3z"></path></svg></button></div><div class="navbarSearchContainer_Bca1"><button type="button" class="DocSearch DocSearch-Button" aria-label="Search (Command+K)"><span class="DocSearch-Button-Container"><svg width="20" height="20" class="DocSearch-Search-Icon" viewBox="0 0 20 20" aria-hidden="true"><path d="M14.386 14.386l4.0877 4.0877-4.0877-4.0877c-2.9418 2.9419-7.7115 2.9419-10.6533 0-2.9419-2.9418-2.9419-7.7115 0-10.6533 2.9418-2.9419 7.7115-2.9419 10.6533 0 2.9419 2.9418 2.9419 7.7115 0 10.6533z" stroke="currentColor" fill="none" fill-rule="evenodd" stroke-linecap="round" stroke-linejoin="round"></path></svg><span class="DocSearch-Button-Placeholder">Search</span></span><span class="DocSearch-Button-Keys"></span></button></div></div></div><div role="presentation" class="navbar-sidebar__backdrop"></div></nav><div id="__docusaurus_skipToContent_fallback" class="main-wrapper mainWrapper_z2l0"><div class="docsWrapper_hBAB"><button aria-label="Scroll back to top" class="clean-btn theme-back-to-top-button backToTopButton_sjWU" type="button"></button><div class="docRoot_UBD9"><aside class="theme-doc-sidebar-container docSidebarContainer_YfHR"><div class="sidebarViewport_aRkj"><div class="sidebar_njMd"><nav aria-label="Docs sidebar" class="menu thin-scrollbar menu_SIkG menuWithAnnouncementBar_GW3s"><ul class="theme-doc-sidebar-menu menu__list"><li class="theme-doc-sidebar-item-category theme-doc-sidebar-item-category-level-1 menu__list-item"><div class="menu__list-item-collapsible"><a class="menu__link menu__link--active">Operator Guide</a></div><ul style="display:block;overflow:visible;height:auto" class="menu__list"><li class="theme-doc-sidebar-item-link theme-doc-sidebar-item-link-level-2 menu__list-item"><a class="menu__link" tabindex="0" href="/docs/operator-guide">Overview</a></li><li class="theme-doc-sidebar-item-category theme-doc-sidebar-item-category-level-2 menu__list-item menu__list-item--collapsed"><div class="menu__list-item-collapsible"><a class="menu__link menu__link--sublist menu__link--sublist-caret" role="button" aria-expanded="false" tabindex="0" href="/docs/operator-guide/installation-overview">Installation</a></div></li><li class="theme-doc-sidebar-item-category theme-doc-sidebar-item-category-level-2 menu__list-item menu__list-item--collapsed"><div class="menu__list-item-collapsible"><a class="menu__link menu__link--sublist menu__link--sublist-caret" role="button" aria-expanded="false" tabindex="0" href="/docs/operator-guide/auth/platform-auth-model">Authentication and Authorization</a></div></li><li class="theme-doc-sidebar-item-category theme-doc-sidebar-item-category-level-2 menu__list-item menu__list-item--collapsed"><div class="menu__list-item-collapsible"><a class="menu__link menu__link--sublist menu__link--sublist-caret" role="button" aria-expanded="false" tabindex="0" href="/docs/operator-guide/artifacts-management/nexus-sonatype">Artifacts Management</a></div></li><li class="theme-doc-sidebar-item-category theme-doc-sidebar-item-category-level-2 menu__list-item menu__list-item--collapsed"><div class="menu__list-item-collapsible"><a class="menu__link menu__link--sublist menu__link--sublist-caret" role="button" aria-expanded="false" tabindex="0" href="/docs/operator-guide/code-quality/sonarqube">Code Quality</a></div></li><li class="theme-doc-sidebar-item-category theme-doc-sidebar-item-category-level-2 menu__list-item menu__list-item--collapsed"><div class="menu__list-item-collapsible"><a class="menu__link menu__link--sublist menu__link--sublist-caret" role="button" aria-expanded="false" tabindex="0" href="/docs/operator-guide/project-management-and-reporting/jira-integration">Project Management and Reporting</a></div></li><li class="theme-doc-sidebar-item-category theme-doc-sidebar-item-category-level-2 menu__list-item menu__list-item--collapsed"><div class="menu__list-item-collapsible"><a class="menu__link menu__link--sublist menu__link--sublist-caret" role="button" aria-expanded="false" tabindex="0" href="/docs/operator-guide/kubernetes-cluster-scaling/overview">Kubernetes Cluster Scaling</a></div></li><li class="theme-doc-sidebar-item-category theme-doc-sidebar-item-category-level-2 menu__list-item menu__list-item--collapsed"><div class="menu__list-item-collapsible"><a class="menu__link menu__link--sublist menu__link--sublist-caret" role="button" aria-expanded="false" tabindex="0" href="/docs/operator-guide/secrets-management/install-external-secrets-operator">Secrets Management</a></div></li><li class="theme-doc-sidebar-item-category theme-doc-sidebar-item-category-level-2 menu__list-item menu__list-item--collapsed"><div class="menu__list-item-collapsible"><a class="menu__link menu__link--sublist menu__link--sublist-caret" role="button" aria-expanded="false" tabindex="0" href="/docs/operator-guide/devsecops/overview">Security and Compliance</a></div></li><li class="theme-doc-sidebar-item-category theme-doc-sidebar-item-category-level-2 menu__list-item"><div class="menu__list-item-collapsible"><a class="menu__link menu__link--sublist menu__link--sublist-caret menu__link--active" role="button" aria-expanded="true" tabindex="0" href="/docs/operator-guide/monitoring-and-observability/install-loki">Monitoring and Observability</a></div><ul style="display:block;overflow:visible;height:auto" class="menu__list"><li class="theme-doc-sidebar-item-category theme-doc-sidebar-item-category-level-3 menu__list-item menu__list-item--collapsed"><div class="menu__list-item-collapsible"><a class="menu__link menu__link--sublist menu__link--sublist-caret" role="button" aria-expanded="false" tabindex="0" href="/docs/operator-guide/monitoring-and-observability/install-loki">Grafana Loki Stack</a></div></li><li class="theme-doc-sidebar-item-category theme-doc-sidebar-item-category-level-3 menu__list-item"><div class="menu__list-item-collapsible"><a class="menu__link menu__link--sublist menu__link--sublist-caret menu__link--active" role="button" aria-expanded="true" tabindex="0" href="/docs/operator-guide/monitoring-and-observability/kibana-ilm-rollover">Elasticsearch Stack</a></div><ul style="display:block;overflow:visible;height:auto" class="menu__list"><li class="theme-doc-sidebar-item-link theme-doc-sidebar-item-link-level-4 menu__list-item"><a class="menu__link menu__link--active" aria-current="page" tabindex="0" href="/docs/operator-guide/monitoring-and-observability/kibana-ilm-rollover">Fluent Bit Elasticsearch ILM</a></li></ul></li></ul></li><li class="theme-doc-sidebar-item-category theme-doc-sidebar-item-category-level-2 menu__list-item menu__list-item--collapsed"><div class="menu__list-item-collapsible"><a class="menu__link menu__link--sublist menu__link--sublist-caret" role="button" aria-expanded="false" tabindex="0" href="/docs/operator-guide/ci/tekton-overview">Continuous Integration (CI)</a></div></li><li class="theme-doc-sidebar-item-category theme-doc-sidebar-item-category-level-2 menu__list-item menu__list-item--collapsed"><div class="menu__list-item-collapsible"><a class="menu__link menu__link--sublist menu__link--sublist-caret" role="button" aria-expanded="false" tabindex="0" href="/docs/operator-guide/cd/customize-deploy-pipeline">Continuous Delivery and Deployment (CD)</a></div></li><li class="theme-doc-sidebar-item-category theme-doc-sidebar-item-category-level-2 menu__list-item menu__list-item--collapsed"><div class="menu__list-item-collapsible"><a class="menu__link menu__link--sublist menu__link--sublist-caret" role="button" aria-expanded="false" tabindex="0" href="/docs/operator-guide/infrastructure-providers/overview">Infrastructure Providers</a></div></li><li class="theme-doc-sidebar-item-category theme-doc-sidebar-item-category-level-2 menu__list-item menu__list-item--collapsed"><div class="menu__list-item-collapsible"><a class="menu__link menu__link--sublist menu__link--sublist-caret" role="button" aria-expanded="false" tabindex="0" href="/docs/operator-guide/disaster-recovery/install-velero">Disaster Recovery</a></div></li><li class="theme-doc-sidebar-item-category theme-doc-sidebar-item-category-level-2 menu__list-item menu__list-item--collapsed"><div class="menu__list-item-collapsible"><a class="menu__link menu__link--sublist menu__link--sublist-caret" role="button" aria-expanded="false" tabindex="0" href="/docs/operator-guide/upgrade/upgrade-edp-3.10">Upgrade</a></div></li><li class="theme-doc-sidebar-item-category theme-doc-sidebar-item-category-level-2 menu__list-item menu__list-item--collapsed"><div class="menu__list-item-collapsible"><a class="menu__link menu__link--sublist menu__link--sublist-caret" role="button" aria-expanded="false" tabindex="0" href="/docs/operator-guide/troubleshooting/overview">Troubleshooting</a></div></li></ul></li></ul></nav></div></div></aside><main class="docMainContainer_TBSr"><div class="container padding-top--md padding-bottom--lg"><div class="row"><div class="col docItemCol_VOVn"><div class="docItemContainer_Djhp"><article><nav class="theme-doc-breadcrumbs breadcrumbsContainer_Z_bl" aria-label="Breadcrumbs"><ul class="breadcrumbs" itemscope="" itemtype="https://schema.org/BreadcrumbList"><li class="breadcrumbs__item"><a aria-label="Home page" class="breadcrumbs__link" href="/"><svg viewBox="0 0 24 24" class="breadcrumbHomeIcon_YNFT"><path d="M10 19v-5h4v5c0 .55.45 1 1 1h3c.55 0 1-.45 1-1v-7h1.7c.46 0 .68-.57.33-.87L12.67 3.6c-.38-.34-.96-.34-1.34 0l-8.36 7.53c-.34.3-.13.87.33.87H5v7c0 .55.45 1 1 1h3c.55 0 1-.45 1-1z" fill="currentColor"></path></svg></a></li><li class="breadcrumbs__item"><span class="breadcrumbs__link">Operator Guide</span><meta itemprop="position" content="1"></li><li class="breadcrumbs__item"><span class="breadcrumbs__link">Monitoring and Observability</span><meta itemprop="position" content="2"></li><li class="breadcrumbs__item"><span class="breadcrumbs__link">Elasticsearch Stack</span><meta itemprop="position" content="3"></li><li itemscope="" itemprop="itemListElement" itemtype="https://schema.org/ListItem" class="breadcrumbs__item breadcrumbs__item--active"><span class="breadcrumbs__link" itemprop="name">Fluent Bit Elasticsearch ILM</span><meta itemprop="position" content="4"></li></ul></nav><span class="theme-doc-version-badge badge badge--secondary">Version: 3.10</span><div class="tocCollapsible_ETCw theme-doc-toc-mobile tocMobile_ITEo"><button type="button" class="clean-btn tocCollapsibleButton_TO0P">On this page</button></div><div class="theme-doc-markdown markdown"><header><h1>Configuring Fluent Bit for Elasticsearch ILM Rollover</h1></header>
<!-- -->
<p>This guide delves into the benefits of adopting the EFK stack over the conventional ELK stack, highlighting the significant enhancements it brings to KubeRocketCI. It provides a comprehensive walkthrough on configuring the EFK stack, enabling the integration of a sophisticated logging system with your applications.</p>
<h2 class="anchor anchorWithStickyNavbar_LWe7" id="overview-of-the-elk-stack">Overview of the ELK Stack<a href="#overview-of-the-elk-stack" class="hash-link" aria-label="Direct link to Overview of the ELK Stack" title="Direct link to Overview of the ELK Stack">â€‹</a></h2>
<p>The <strong>ELK</strong> (Elasticsearch, Logstash, and Kibana) stack is renowned for its capability to consolidate logs from various systems and applications. It facilitates the analysis of these logs and the creation of visualizations for monitoring applications and infrastructure, expediting troubleshooting, enhancing security analytics, and more.</p>
<p>Below is an overview of the default components within the ELK stack:</p>
<ul>
<li><strong>Beats family</strong> - A suite of log shippers that transport logs from their sources to the stack, including Filebeat, Metricbeat, Packetbeat, among others. Beats can either replace Logstash or complement it.</li>
<li><strong>Logstash</strong> - A robust log processing framework that collects, processes, stores, and searches logs.</li>
<li><strong>Elasticsearch</strong> - A highly scalable search and analytics engine built on the <a href="https://lucene.apache.org/" target="_blank" rel="noopener noreferrer">Lucene</a> Java library.</li>
<li><strong>Kibana</strong> - A powerful visualization tool that queries data from Elasticsearch, enabling insightful data analysis.</li>
</ul>
<p><img decoding="async" loading="lazy" alt="Overview of ELK Stack Components" src="data:image/png;base64,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" title="ELK Stack" width="945" height="351" class="img_ev3q"></p>
<h3 class="anchor anchorWithStickyNavbar_LWe7" id="efk-stack-overview">EFK Stack Overview<a href="#efk-stack-overview" class="hash-link" aria-label="Direct link to EFK Stack Overview" title="Direct link to EFK Stack Overview">â€‹</a></h3>
<p>We use <strong>FEK (also called EFK)</strong> (Fluent Bit, Elasticsearch, Kibana) stack in Kubernetes instead of <strong>ELK</strong> because this stack provides us with the support for <a href="https://logsight.ai/#/" target="_blank" rel="noopener noreferrer">Logsight</a> for Stage Verification and Incident Detection. In addition to it, <strong>Fluent Bit</strong> has a smaller memory fingerprint than Logstash.
<strong>Fluent Bit</strong> has the Inputs, Parsers, Filters and Outputs plugins similarly to Logstash.</p>
<p><img decoding="async" loading="lazy" alt="Default components of FEK Stack" src="data:image/png;base64,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" title="FEK Stack" width="699" height="306" class="img_ev3q"></p>
<h3 class="anchor anchorWithStickyNavbar_LWe7" id="automate-elasticsearch-index-rollover-with-ilm">Automate Elasticsearch Index Rollover With ILM<a href="#automate-elasticsearch-index-rollover-with-ilm" class="hash-link" aria-label="Direct link to Automate Elasticsearch Index Rollover With ILM" title="Direct link to Automate Elasticsearch Index Rollover With ILM">â€‹</a></h3>
<p>In this guide, index rollover with the Index Lifecycle Management <a href="https://www.elastic.co/guide/en/elasticsearch/reference/current/getting-started-index-lifecycle-management.html" target="_blank" rel="noopener noreferrer">ILM</a> is automated in the FEK stack.</p>
<p>The resources can be created via API using curl, Postman, Kibana Dev Tools console or via GUI.
They are going to be created them using Kibana Dev Tools.</p>
<ol>
<li>
<p>Go to <strong>Management</strong> -&gt; <strong>Dev Tools</strong> in the Kibana dashboard:</p>
<p><img decoding="async" loading="lazy" alt="Index Pattern" src="/assets/images/dev-tools-55dbf76b15ebed1d3dea8f2b001bca62.png" title="Dev Tools" width="1714" height="903" class="img_ev3q"></p>
</li>
<li>
<p>Create index lifecycle policy with the index <a href="https://www.elastic.co/guide/en/elasticsearch/reference/8.6/ilm-rollover.html" target="_blank" rel="noopener noreferrer">rollover</a>:</p>
<div class="theme-admonition theme-admonition-note admonition_xJq3 alert alert--secondary"><div class="admonitionHeading_Gvgb"><span class="admonitionIcon_Rf37"><svg viewBox="0 0 14 16"><path fill-rule="evenodd" d="M6.3 5.69a.942.942 0 0 1-.28-.7c0-.28.09-.52.28-.7.19-.18.42-.28.7-.28.28 0 .52.09.7.28.18.19.28.42.28.7 0 .28-.09.52-.28.7a1 1 0 0 1-.7.3c-.28 0-.52-.11-.7-.3zM8 7.99c-.02-.25-.11-.48-.31-.69-.2-.19-.42-.3-.69-.31H6c-.27.02-.48.13-.69.31-.2.2-.3.44-.31.69h1v3c.02.27.11.5.31.69.2.2.42.31.69.31h1c.27 0 .48-.11.69-.31.2-.19.3-.42.31-.69H8V7.98v.01zM7 2.3c-3.14 0-5.7 2.54-5.7 5.68 0 3.14 2.56 5.7 5.7 5.7s5.7-2.55 5.7-5.7c0-3.15-2.56-5.69-5.7-5.69v.01zM7 .98c3.86 0 7 3.14 7 7s-3.14 7-7 7-7-3.12-7-7 3.14-7 7-7z"></path></svg></span>note</div><div class="admonitionContent_BuS1"><p>This policy can also be created in GUI in <strong>Management</strong> -&gt; <strong>Stack Management</strong> -&gt; <strong>Index Lifecycle Policies</strong></p></div></div>
<p><a href="https://www.elastic.co/guide/en/elasticsearch/reference/current/ilm-index-lifecycle.html" target="_blank" rel="noopener noreferrer">Index Lifecycle</a> has several phases: Hot, Warm, Cold, Frozen, Delete. Indices also have different <a href="https://www.elastic.co/guide/en/elasticsearch/reference/current/ilm-set-priority.html" target="_blank" rel="noopener noreferrer">priorities</a> in each phase. The warmer the phase, the higher the priority is supposed to be, e.g., 100 for the hot phase, 50 for the warm phase, and 0 for the cold phase.</p>
<p>In this Use Case, only the Hot and Delete phases are configured. So an index will be created, rolled over to a new index when 1gb in size or 1day in time and deleted in 7 days.
The rollover may not happen exactly at 1GB because it depends on how often Kibana checks the index size. Kibana usually checks the index size every 10 minutes but this can be changed by setting the <a href="https://www.elastic.co/guide/en/elasticsearch/reference/current/ilm-settings.html" target="_blank" rel="noopener noreferrer">indices.lifecycle.poll_interval</a> monitoring timer.</p>
<p>The index lifecycle policy example:</p>
<details class="details_lb9f alert alert--info details_b_Ee" data-collapsed="true"><summary><b>Index Lifecycle Policy</b></summary><div><div class="collapsibleContent_i85q"><div class="language-bash codeBlockContainer_Ckt0 theme-code-block" style="--prism-color:#393A34;--prism-background-color:#f6f8fa"><div class="codeBlockContent_biex"><pre tabindex="0" class="prism-code language-bash codeBlock_bY9V thin-scrollbar" style="color:#393A34;background-color:#f6f8fa"><code class="codeBlockLines_e6Vv"><span class="token-line" style="color:#393A34"><span class="token plain">PUT _ilm/policy/fluent-bit-policy</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain"></span><span class="token punctuation" style="color:#393A34">{</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">  </span><span class="token string" style="color:#e3116c">&quot;policy&quot;</span><span class="token builtin class-name">:</span><span class="token plain"> </span><span class="token punctuation" style="color:#393A34">{</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    </span><span class="token string" style="color:#e3116c">&quot;phases&quot;</span><span class="token builtin class-name">:</span><span class="token plain"> </span><span class="token punctuation" style="color:#393A34">{</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">      </span><span class="token string" style="color:#e3116c">&quot;hot&quot;</span><span class="token builtin class-name">:</span><span class="token plain"> </span><span class="token punctuation" style="color:#393A34">{</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">        </span><span class="token string" style="color:#e3116c">&quot;min_age&quot;</span><span class="token builtin class-name">:</span><span class="token plain"> </span><span class="token string" style="color:#e3116c">&quot;0ms&quot;</span><span class="token plain">,</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">        </span><span class="token string" style="color:#e3116c">&quot;actions&quot;</span><span class="token builtin class-name">:</span><span class="token plain"> </span><span class="token punctuation" style="color:#393A34">{</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">          </span><span class="token string" style="color:#e3116c">&quot;set_priority&quot;</span><span class="token builtin class-name">:</span><span class="token plain"> </span><span class="token punctuation" style="color:#393A34">{</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">            </span><span class="token string" style="color:#e3116c">&quot;priority&quot;</span><span class="token builtin class-name">:</span><span class="token plain"> </span><span class="token number" style="color:#36acaa">100</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">          </span><span class="token punctuation" style="color:#393A34">}</span><span class="token plain">,</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">          </span><span class="token string" style="color:#e3116c">&quot;rollover&quot;</span><span class="token builtin class-name">:</span><span class="token plain"> </span><span class="token punctuation" style="color:#393A34">{</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">            </span><span class="token string" style="color:#e3116c">&quot;max_size&quot;</span><span class="token builtin class-name">:</span><span class="token plain"> </span><span class="token string" style="color:#e3116c">&quot;1gb&quot;</span><span class="token plain">,</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">            </span><span class="token string" style="color:#e3116c">&quot;max_primary_shard_size&quot;</span><span class="token builtin class-name">:</span><span class="token plain"> </span><span class="token string" style="color:#e3116c">&quot;1gb&quot;</span><span class="token plain">,</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">            </span><span class="token string" style="color:#e3116c">&quot;max_age&quot;</span><span class="token builtin class-name">:</span><span class="token plain"> </span><span class="token string" style="color:#e3116c">&quot;1d&quot;</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">          </span><span class="token punctuation" style="color:#393A34">}</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">        </span><span class="token punctuation" style="color:#393A34">}</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">      </span><span class="token punctuation" style="color:#393A34">}</span><span class="token plain">,</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">      </span><span class="token string" style="color:#e3116c">&quot;delete&quot;</span><span class="token builtin class-name">:</span><span class="token plain"> </span><span class="token punctuation" style="color:#393A34">{</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">        </span><span class="token string" style="color:#e3116c">&quot;min_age&quot;</span><span class="token builtin class-name">:</span><span class="token plain"> </span><span class="token string" style="color:#e3116c">&quot;7d&quot;</span><span class="token plain">,</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">        </span><span class="token string" style="color:#e3116c">&quot;actions&quot;</span><span class="token builtin class-name">:</span><span class="token plain"> </span><span class="token punctuation" style="color:#393A34">{</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">          </span><span class="token string" style="color:#e3116c">&quot;delete&quot;</span><span class="token builtin class-name">:</span><span class="token plain"> </span><span class="token punctuation" style="color:#393A34">{</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">            </span><span class="token string" style="color:#e3116c">&quot;delete_searchable_snapshot&quot;</span><span class="token builtin class-name">:</span><span class="token plain"> </span><span class="token boolean" style="color:#36acaa">true</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">          </span><span class="token punctuation" style="color:#393A34">}</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">        </span><span class="token punctuation" style="color:#393A34">}</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">      </span><span class="token punctuation" style="color:#393A34">}</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    </span><span class="token punctuation" style="color:#393A34">}</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">  </span><span class="token punctuation" style="color:#393A34">}</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain"></span><span class="token punctuation" style="color:#393A34">}</span><br></span></code></pre><div class="buttonGroup__atx"><button type="button" aria-label="Copy code to clipboard" title="Copy" class="clean-btn"><span class="copyButtonIcons_eSgA" aria-hidden="true"><svg viewBox="0 0 24 24" class="copyButtonIcon_y97N"><path fill="currentColor" d="M19,21H8V7H19M19,5H8A2,2 0 0,0 6,7V21A2,2 0 0,0 8,23H19A2,2 0 0,0 21,21V7A2,2 0 0,0 19,5M16,1H4A2,2 0 0,0 2,3V17H4V3H16V1Z"></path></svg><svg viewBox="0 0 24 24" class="copyButtonSuccessIcon_LjdS"><path fill="currentColor" d="M21,7L9,19L3.5,13.5L4.91,12.09L9,16.17L19.59,5.59L21,7Z"></path></svg></span></button></div></div></div></div></div></details>
<p>Insert the code above into the <code>Dev Tools</code> and click the arrow to send the <code>PUT</code> request.</p>
</li>
<li>
<p>Create an <a href="https://www.elastic.co/guide/en/elasticsearch/reference/current/index-templates.html" target="_blank" rel="noopener noreferrer">index template</a> so that a new index is created according to this template after the rollover:</p>
<div class="theme-admonition theme-admonition-note admonition_xJq3 alert alert--secondary"><div class="admonitionHeading_Gvgb"><span class="admonitionIcon_Rf37"><svg viewBox="0 0 14 16"><path fill-rule="evenodd" d="M6.3 5.69a.942.942 0 0 1-.28-.7c0-.28.09-.52.28-.7.19-.18.42-.28.7-.28.28 0 .52.09.7.28.18.19.28.42.28.7 0 .28-.09.52-.28.7a1 1 0 0 1-.7.3c-.28 0-.52-.11-.7-.3zM8 7.99c-.02-.25-.11-.48-.31-.69-.2-.19-.42-.3-.69-.31H6c-.27.02-.48.13-.69.31-.2.2-.3.44-.31.69h1v3c.02.27.11.5.31.69.2.2.42.31.69.31h1c.27 0 .48-.11.69-.31.2-.19.3-.42.31-.69H8V7.98v.01zM7 2.3c-3.14 0-5.7 2.54-5.7 5.68 0 3.14 2.56 5.7 5.7 5.7s5.7-2.55 5.7-5.7c0-3.15-2.56-5.69-5.7-5.69v.01zM7 .98c3.86 0 7 3.14 7 7s-3.14 7-7 7-7-3.12-7-7 3.14-7 7-7z"></path></svg></span>note</div><div class="admonitionContent_BuS1"><p>This policy can also be created in GUI in <code>Management</code> -&gt; <code>Stack Management</code> -&gt; <code>Index Management</code> -&gt; <code>Index Templates</code>.</p></div></div>
<p>Expand the menu below to see the index template example:</p>
<details class="details_lb9f alert alert--info details_b_Ee" data-collapsed="true"><summary><b>Index Template</b></summary><div><div class="collapsibleContent_i85q"><div class="language-bash codeBlockContainer_Ckt0 theme-code-block" style="--prism-color:#393A34;--prism-background-color:#f6f8fa"><div class="codeBlockContent_biex"><pre tabindex="0" class="prism-code language-bash codeBlock_bY9V thin-scrollbar" style="color:#393A34;background-color:#f6f8fa"><code class="codeBlockLines_e6Vv"><span class="token-line" style="color:#393A34"><span class="token plain">PUT /_index_template/fluent-bit</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain"></span><span class="token punctuation" style="color:#393A34">{</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">  </span><span class="token string" style="color:#e3116c">&quot;index_patterns&quot;</span><span class="token builtin class-name">:</span><span class="token plain"> </span><span class="token punctuation" style="color:#393A34">[</span><span class="token string" style="color:#e3116c">&quot;fluent-bit-kube-*&quot;</span><span class="token punctuation" style="color:#393A34">]</span><span class="token plain">,</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">  </span><span class="token string" style="color:#e3116c">&quot;template&quot;</span><span class="token builtin class-name">:</span><span class="token plain"> </span><span class="token punctuation" style="color:#393A34">{</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    </span><span class="token string" style="color:#e3116c">&quot;settings&quot;</span><span class="token builtin class-name">:</span><span class="token plain"> </span><span class="token punctuation" style="color:#393A34">{</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">      </span><span class="token string" style="color:#e3116c">&quot;index&quot;</span><span class="token builtin class-name">:</span><span class="token plain"> </span><span class="token punctuation" style="color:#393A34">{</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">        </span><span class="token string" style="color:#e3116c">&quot;lifecycle&quot;</span><span class="token builtin class-name">:</span><span class="token plain"> </span><span class="token punctuation" style="color:#393A34">{</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">          </span><span class="token string" style="color:#e3116c">&quot;name&quot;</span><span class="token builtin class-name">:</span><span class="token plain"> </span><span class="token string" style="color:#e3116c">&quot;fluent-bit-policy&quot;</span><span class="token plain">,</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">          </span><span class="token string" style="color:#e3116c">&quot;rollover_alias&quot;</span><span class="token builtin class-name">:</span><span class="token plain"> </span><span class="token string" style="color:#e3116c">&quot;fluent-bit-kube&quot;</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">        </span><span class="token punctuation" style="color:#393A34">}</span><span class="token plain">,</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">        </span><span class="token string" style="color:#e3116c">&quot;number_of_shards&quot;</span><span class="token builtin class-name">:</span><span class="token plain"> </span><span class="token string" style="color:#e3116c">&quot;1&quot;</span><span class="token plain">,</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">        </span><span class="token string" style="color:#e3116c">&quot;number_of_replicas&quot;</span><span class="token builtin class-name">:</span><span class="token plain"> </span><span class="token string" style="color:#e3116c">&quot;0&quot;</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">      </span><span class="token punctuation" style="color:#393A34">}</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    </span><span class="token punctuation" style="color:#393A34">}</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">  </span><span class="token punctuation" style="color:#393A34">}</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain"></span><span class="token punctuation" style="color:#393A34">}</span><br></span></code></pre><div class="buttonGroup__atx"><button type="button" aria-label="Copy code to clipboard" title="Copy" class="clean-btn"><span class="copyButtonIcons_eSgA" aria-hidden="true"><svg viewBox="0 0 24 24" class="copyButtonIcon_y97N"><path fill="currentColor" d="M19,21H8V7H19M19,5H8A2,2 0 0,0 6,7V21A2,2 0 0,0 8,23H19A2,2 0 0,0 21,21V7A2,2 0 0,0 19,5M16,1H4A2,2 0 0,0 2,3V17H4V3H16V1Z"></path></svg><svg viewBox="0 0 24 24" class="copyButtonSuccessIcon_LjdS"><path fill="currentColor" d="M21,7L9,19L3.5,13.5L4.91,12.09L9,16.17L19.59,5.59L21,7Z"></path></svg></span></button></div></div></div></div></div></details>
<div class="theme-admonition theme-admonition-note admonition_xJq3 alert alert--secondary"><div class="admonitionHeading_Gvgb"><span class="admonitionIcon_Rf37"><svg viewBox="0 0 14 16"><path fill-rule="evenodd" d="M6.3 5.69a.942.942 0 0 1-.28-.7c0-.28.09-.52.28-.7.19-.18.42-.28.7-.28.28 0 .52.09.7.28.18.19.28.42.28.7 0 .28-.09.52-.28.7a1 1 0 0 1-.7.3c-.28 0-.52-.11-.7-.3zM8 7.99c-.02-.25-.11-.48-.31-.69-.2-.19-.42-.3-.69-.31H6c-.27.02-.48.13-.69.31-.2.2-.3.44-.31.69h1v3c.02.27.11.5.31.69.2.2.42.31.69.31h1c.27 0 .48-.11.69-.31.2-.19.3-.42.31-.69H8V7.98v.01zM7 2.3c-3.14 0-5.7 2.54-5.7 5.68 0 3.14 2.56 5.7 5.7 5.7s5.7-2.55 5.7-5.7c0-3.15-2.56-5.69-5.7-5.69v.01zM7 .98c3.86 0 7 3.14 7 7s-3.14 7-7 7-7-3.12-7-7 3.14-7 7-7z"></path></svg></span>note</div><div class="admonitionContent_BuS1"><ul>
<li>
<p><code>index.lifecycle.rollover_alias</code> is required when using a policy containing the rollover action and specifies which alias to rollover on behalf of this index. The intention here is that the rollover <a href="https://www.elastic.co/guide/en/elasticsearch/reference/8.6/aliases.html" target="_blank" rel="noopener noreferrer">alias</a> is also defined on the index.</p>
</li>
<li>
<p><code>number_of_shards</code> is the quantity of the primary shards. Elasticsearch index is really just a logical grouping of one or more physical shards, where each shard is actually a self-contained index. By distributing the documents in an index across multiple shards and distributing those shards across multiple nodes, Elasticsearch can ensure redundancy, which both protects against hardware failures and increases query capacity as nodes are added to a cluster. As the cluster grows (or shrinks), Elasticsearch automatically migrates shards to re-balance the cluster. Please refer to the official documentation <a href="https://www.elastic.co/guide/en/elasticsearch/reference/current/scalability.html" target="_blank" rel="noopener noreferrer">here</a>.</p>
</li>
<li>
<p><code>number_of_replicas</code> is the number of replica shards. A replica shard is a copy of a primary shard. Elasticsearch will never assign a replica to the same node as the primary shard, so make sure you have more than one node in your Elasticsearch cluster if you need to use replica shards. The Elasticsearch cluster details and the quantity of nodes can be checked with:</p>
<div class="language-bash codeBlockContainer_Ckt0 theme-code-block" style="--prism-color:#393A34;--prism-background-color:#f6f8fa"><div class="codeBlockContent_biex"><pre tabindex="0" class="prism-code language-bash codeBlock_bY9V thin-scrollbar" style="color:#393A34;background-color:#f6f8fa"><code class="codeBlockLines_e6Vv"><span class="token-line" style="color:#393A34"><span class="token plain">GET _cluster/health</span><br></span></code></pre><div class="buttonGroup__atx"><button type="button" aria-label="Copy code to clipboard" title="Copy" class="clean-btn"><span class="copyButtonIcons_eSgA" aria-hidden="true"><svg viewBox="0 0 24 24" class="copyButtonIcon_y97N"><path fill="currentColor" d="M19,21H8V7H19M19,5H8A2,2 0 0,0 6,7V21A2,2 0 0,0 8,23H19A2,2 0 0,0 21,21V7A2,2 0 0,0 19,5M16,1H4A2,2 0 0,0 2,3V17H4V3H16V1Z"></path></svg><svg viewBox="0 0 24 24" class="copyButtonSuccessIcon_LjdS"><path fill="currentColor" d="M21,7L9,19L3.5,13.5L4.91,12.09L9,16.17L19.59,5.59L21,7Z"></path></svg></span></button></div></div></div>
</li>
</ul><p>Since we use one node, the number_of_shards  is 1 and number_of_replicas is 0. If you put more replicas within one node, your index will get yellow status in Kibana, yet still be working.</p></div></div>
</li>
<li>
<p>Create an empty <a href="https://www.elastic.co/guide/en/elasticsearch/reference/current/indices-create-index.html" target="_blank" rel="noopener noreferrer">index</a> with write permissions:</p>
<div class="theme-admonition theme-admonition-note admonition_xJq3 alert alert--secondary"><div class="admonitionHeading_Gvgb"><span class="admonitionIcon_Rf37"><svg viewBox="0 0 14 16"><path fill-rule="evenodd" d="M6.3 5.69a.942.942 0 0 1-.28-.7c0-.28.09-.52.28-.7.19-.18.42-.28.7-.28.28 0 .52.09.7.28.18.19.28.42.28.7 0 .28-.09.52-.28.7a1 1 0 0 1-.7.3c-.28 0-.52-.11-.7-.3zM8 7.99c-.02-.25-.11-.48-.31-.69-.2-.19-.42-.3-.69-.31H6c-.27.02-.48.13-.69.31-.2.2-.3.44-.31.69h1v3c.02.27.11.5.31.69.2.2.42.31.69.31h1c.27 0 .48-.11.69-.31.2-.19.3-.42.31-.69H8V7.98v.01zM7 2.3c-3.14 0-5.7 2.54-5.7 5.68 0 3.14 2.56 5.7 5.7 5.7s5.7-2.55 5.7-5.7c0-3.15-2.56-5.69-5.7-5.69v.01zM7 .98c3.86 0 7 3.14 7 7s-3.14 7-7 7-7-3.12-7-7 3.14-7 7-7z"></path></svg></span>note</div><div class="admonitionContent_BuS1"><p>This index can also be created in GUI in <code>Management</code> -&gt; <code>Stack Management</code> -&gt; <code>Index Management</code> -&gt; <code>Indices</code>.</p></div></div>
<p>Index example with the <a href="https://www.elastic.co/guide/en/elasticsearch/reference/current/api-conventions.html" target="_blank" rel="noopener noreferrer">date math</a> format:</p>
<details class="details_lb9f alert alert--info details_b_Ee" data-collapsed="true"><summary><b>Index</b></summary><div><div class="collapsibleContent_i85q"><div class="language-bash codeBlockContainer_Ckt0 theme-code-block" style="--prism-color:#393A34;--prism-background-color:#f6f8fa"><div class="codeBlockContent_biex"><pre tabindex="0" class="prism-code language-bash codeBlock_bY9V thin-scrollbar" style="color:#393A34;background-color:#f6f8fa"><code class="codeBlockLines_e6Vv"><span class="token-line" style="color:#393A34"><span class="token comment" style="color:#999988;font-style:italic"># URI encoded /&lt;fluent-bit-kube-{now/d}-000001&gt;</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">PUT /%3Cfluent-bit-kube-%7Bnow%2Fd%7D-000001%3E</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain"></span><span class="token punctuation" style="color:#393A34">{</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">  </span><span class="token string" style="color:#e3116c">&quot;aliases&quot;</span><span class="token builtin class-name">:</span><span class="token plain"> </span><span class="token punctuation" style="color:#393A34">{</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    </span><span class="token string" style="color:#e3116c">&quot;fluent-bit-kube&quot;</span><span class="token builtin class-name">:</span><span class="token plain"> </span><span class="token punctuation" style="color:#393A34">{</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">      </span><span class="token string" style="color:#e3116c">&quot;is_write_index&quot;</span><span class="token builtin class-name">:</span><span class="token plain"> </span><span class="token boolean" style="color:#36acaa">true</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    </span><span class="token punctuation" style="color:#393A34">}</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">  </span><span class="token punctuation" style="color:#393A34">}</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain"></span><span class="token punctuation" style="color:#393A34">}</span><br></span></code></pre><div class="buttonGroup__atx"><button type="button" aria-label="Copy code to clipboard" title="Copy" class="clean-btn"><span class="copyButtonIcons_eSgA" aria-hidden="true"><svg viewBox="0 0 24 24" class="copyButtonIcon_y97N"><path fill="currentColor" d="M19,21H8V7H19M19,5H8A2,2 0 0,0 6,7V21A2,2 0 0,0 8,23H19A2,2 0 0,0 21,21V7A2,2 0 0,0 19,5M16,1H4A2,2 0 0,0 2,3V17H4V3H16V1Z"></path></svg><svg viewBox="0 0 24 24" class="copyButtonSuccessIcon_LjdS"><path fill="currentColor" d="M21,7L9,19L3.5,13.5L4.91,12.09L9,16.17L19.59,5.59L21,7Z"></path></svg></span></button></div></div></div></div></div></details>
<p>The code above will create an index in the<code>{index_name}-{current_date}-{rollover_index_increment}</code> format. For example: <code>fluent-bit-kube-2023.03.17-000001</code>.</p>
<p>Please refer to the official documentation on the index rollover with Date Math <a href="https://www.elastic.co/guide/en/elasticsearch/reference/master/indices-rollover-index.html#_using_date_math_with_the_rollover_api" target="_blank" rel="noopener noreferrer">here</a>.</p>
<div class="theme-admonition theme-admonition-note admonition_xJq3 alert alert--secondary"><div class="admonitionHeading_Gvgb"><span class="admonitionIcon_Rf37"><svg viewBox="0 0 14 16"><path fill-rule="evenodd" d="M6.3 5.69a.942.942 0 0 1-.28-.7c0-.28.09-.52.28-.7.19-.18.42-.28.7-.28.28 0 .52.09.7.28.18.19.28.42.28.7 0 .28-.09.52-.28.7a1 1 0 0 1-.7.3c-.28 0-.52-.11-.7-.3zM8 7.99c-.02-.25-.11-.48-.31-.69-.2-.19-.42-.3-.69-.31H6c-.27.02-.48.13-.69.31-.2.2-.3.44-.31.69h1v3c.02.27.11.5.31.69.2.2.42.31.69.31h1c.27 0 .48-.11.69-.31.2-.19.3-.42.31-.69H8V7.98v.01zM7 2.3c-3.14 0-5.7 2.54-5.7 5.68 0 3.14 2.56 5.7 5.7 5.7s5.7-2.55 5.7-5.7c0-3.15-2.56-5.69-5.7-5.69v.01zM7 .98c3.86 0 7 3.14 7 7s-3.14 7-7 7-7-3.12-7-7 3.14-7 7-7z"></path></svg></span>note</div><div class="admonitionContent_BuS1"><p>It is also possible to use index pattern below if the date math format does not seem applicable:</p><details class="details_lb9f alert alert--info details_b_Ee" data-collapsed="true"><summary><b>Index</b></summary><div><div class="collapsibleContent_i85q"><div class="language-bash codeBlockContainer_Ckt0 theme-code-block" style="--prism-color:#393A34;--prism-background-color:#f6f8fa"><div class="codeBlockContent_biex"><pre tabindex="0" class="prism-code language-bash codeBlock_bY9V thin-scrollbar" style="color:#393A34;background-color:#f6f8fa"><code class="codeBlockLines_e6Vv"><span class="token-line" style="color:#393A34"><span class="token plain">PUT fluent-bit-kube-000001</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain"></span><span class="token punctuation" style="color:#393A34">{</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">  </span><span class="token string" style="color:#e3116c">&quot;aliases&quot;</span><span class="token builtin class-name">:</span><span class="token plain"> </span><span class="token punctuation" style="color:#393A34">{</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    </span><span class="token string" style="color:#e3116c">&quot;fluent-bit-kube&quot;</span><span class="token builtin class-name">:</span><span class="token plain"> </span><span class="token punctuation" style="color:#393A34">{</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">      </span><span class="token string" style="color:#e3116c">&quot;is_write_index&quot;</span><span class="token builtin class-name">:</span><span class="token plain"> </span><span class="token boolean" style="color:#36acaa">true</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    </span><span class="token punctuation" style="color:#393A34">}</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">  </span><span class="token punctuation" style="color:#393A34">}</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain"></span><span class="token punctuation" style="color:#393A34">}</span><br></span></code></pre><div class="buttonGroup__atx"><button type="button" aria-label="Copy code to clipboard" title="Copy" class="clean-btn"><span class="copyButtonIcons_eSgA" aria-hidden="true"><svg viewBox="0 0 24 24" class="copyButtonIcon_y97N"><path fill="currentColor" d="M19,21H8V7H19M19,5H8A2,2 0 0,0 6,7V21A2,2 0 0,0 8,23H19A2,2 0 0,0 21,21V7A2,2 0 0,0 19,5M16,1H4A2,2 0 0,0 2,3V17H4V3H16V1Z"></path></svg><svg viewBox="0 0 24 24" class="copyButtonSuccessIcon_LjdS"><path fill="currentColor" d="M21,7L9,19L3.5,13.5L4.91,12.09L9,16.17L19.59,5.59L21,7Z"></path></svg></span></button></div></div></div></div></div></details><p>Check the status of the created index:</p><div class="language-bash codeBlockContainer_Ckt0 theme-code-block" style="--prism-color:#393A34;--prism-background-color:#f6f8fa"><div class="codeBlockContent_biex"><pre tabindex="0" class="prism-code language-bash codeBlock_bY9V thin-scrollbar" style="color:#393A34;background-color:#f6f8fa"><code class="codeBlockLines_e6Vv"><span class="token-line" style="color:#393A34"><span class="token plain">GET fluent-bit-kube*-000001/_ilm/explain</span><br></span></code></pre><div class="buttonGroup__atx"><button type="button" aria-label="Copy code to clipboard" title="Copy" class="clean-btn"><span class="copyButtonIcons_eSgA" aria-hidden="true"><svg viewBox="0 0 24 24" class="copyButtonIcon_y97N"><path fill="currentColor" d="M19,21H8V7H19M19,5H8A2,2 0 0,0 6,7V21A2,2 0 0,0 8,23H19A2,2 0 0,0 21,21V7A2,2 0 0,0 19,5M16,1H4A2,2 0 0,0 2,3V17H4V3H16V1Z"></path></svg><svg viewBox="0 0 24 24" class="copyButtonSuccessIcon_LjdS"><path fill="currentColor" d="M21,7L9,19L3.5,13.5L4.91,12.09L9,16.17L19.59,5.59L21,7Z"></path></svg></span></button></div></div></div></div></div>
</li>
<li>
<p>Configure Fluent Bit. Play attention to the <a href="https://docs.fluentbit.io/manual/pipeline/outputs/elasticsearch" target="_blank" rel="noopener noreferrer">Elasticsearch Output</a> plugin configuration.</p>
<p>The important fields in the <code>[OUTPUT]</code> section are <code>Index fluent-bit-kube</code> since we should use the index with the same name as Rollover Alias in Kibana and <code>Logstash_Format Off</code> as we use the Rollover index pattern in Kibana that increments by 1.</p>
<p>ConfigMap example with <a href="https://docs.fluentbit.io/manual/v/1.0/configuration/variables" target="_blank" rel="noopener noreferrer">Configuration Variables</a> for <code>HTTP_User</code> and <code>HTTP_Passwd</code>:</p>
<details class="details_lb9f alert alert--info details_b_Ee" data-collapsed="true"><summary><b>ConfigMap fluent-bit</b></summary><div><div class="collapsibleContent_i85q"><div class="language-yaml codeBlockContainer_Ckt0 theme-code-block" style="--prism-color:#393A34;--prism-background-color:#f6f8fa"><div class="codeBlockContent_biex"><pre tabindex="0" class="prism-code language-yaml codeBlock_bY9V thin-scrollbar" style="color:#393A34;background-color:#f6f8fa"><code class="codeBlockLines_e6Vv"><span class="token-line" style="color:#393A34"><span class="token key atrule" style="color:#00a4db">data</span><span class="token punctuation" style="color:#393A34">:</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">  </span><span class="token key atrule" style="color:#00a4db">fluent-bit.conf</span><span class="token punctuation" style="color:#393A34">:</span><span class="token plain"> </span><span class="token punctuation" style="color:#393A34">|</span><span class="token scalar string" style="color:#e3116c"></span><br></span><span class="token-line" style="color:#393A34"><span class="token scalar string" style="color:#e3116c">    [SERVICE]</span><br></span><span class="token-line" style="color:#393A34"><span class="token scalar string" style="color:#e3116c">        Daemon Off</span><br></span><span class="token-line" style="color:#393A34"><span class="token scalar string" style="color:#e3116c">        Flush 10</span><br></span><span class="token-line" style="color:#393A34"><span class="token scalar string" style="color:#e3116c">        Log_Level info</span><br></span><span class="token-line" style="color:#393A34"><span class="token scalar string" style="color:#e3116c">        Parsers_File parsers.conf</span><br></span><span class="token-line" style="color:#393A34"><span class="token scalar string" style="color:#e3116c">        Parsers_File custom_parsers.conf</span><br></span><span class="token-line" style="color:#393A34"><span class="token scalar string" style="color:#e3116c">        HTTP_Server On</span><br></span><span class="token-line" style="color:#393A34"><span class="token scalar string" style="color:#e3116c">        HTTP_Listen 0.0.0.0</span><br></span><span class="token-line" style="color:#393A34"><span class="token scalar string" style="color:#e3116c">        HTTP_Port 2020</span><br></span><span class="token-line" style="color:#393A34"><span class="token scalar string" style="color:#e3116c">        Health_Check On</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    </span><span class="token punctuation" style="color:#393A34">[</span><span class="token plain">INPUT</span><span class="token punctuation" style="color:#393A34">]</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">        Name tail</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">        Tag kube.*</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">        Path /var/log/containers/</span><span class="token important">*.log</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">        Parser docker</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">        Mem_Buf_Limit 5MB</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">        Skip_Long_Lines Off</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">        Refresh_Interval 10</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    </span><span class="token punctuation" style="color:#393A34">[</span><span class="token plain">INPUT</span><span class="token punctuation" style="color:#393A34">]</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">        Name systemd</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">        Tag host.*</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">        Systemd_Filter _SYSTEMD_UNIT=kubelet.service</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">        Read_From_Tail On</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">        Strip_Underscores On</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    </span><span class="token punctuation" style="color:#393A34">[</span><span class="token plain">FILTER</span><span class="token punctuation" style="color:#393A34">]</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">        Name                kubernetes</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">        Match               kube.*</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">        Kube_Tag_Prefix     kube.var.log.containers.</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">        Kube_URL            https</span><span class="token punctuation" style="color:#393A34">:</span><span class="token plain">//kubernetes.default.svc</span><span class="token punctuation" style="color:#393A34">:</span><span class="token number" style="color:#36acaa">443</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">        Kube_CA_File        /var/run/secrets/kubernetes.io/serviceaccount/ca.crt</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">        Kube_Token_File     /var/run/secrets/kubernetes.io/serviceaccount/token</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">        Merge_Log           Off</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">        Merge_Log_Key       log_processed</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">        K8S</span><span class="token punctuation" style="color:#393A34">-</span><span class="token plain">Logging.Parser  On</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">        K8S</span><span class="token punctuation" style="color:#393A34">-</span><span class="token plain">Logging.Exclude On</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    </span><span class="token punctuation" style="color:#393A34">[</span><span class="token plain">FILTER</span><span class="token punctuation" style="color:#393A34">]</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">        Name nest</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">        Match kube.*</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">        Operation lift</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">        Nested_under kubernetes</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">        Add_prefix kubernetes.</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    </span><span class="token punctuation" style="color:#393A34">[</span><span class="token plain">FILTER</span><span class="token punctuation" style="color:#393A34">]</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">        Name modify</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">        Match kube.*</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">        Copy kubernetes.container_name tags.container</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">        Copy log message</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">        Copy kubernetes.container_image tags.image</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">        Copy kubernetes.namespace_name tags.namespace</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    </span><span class="token punctuation" style="color:#393A34">[</span><span class="token plain">FILTER</span><span class="token punctuation" style="color:#393A34">]</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">        Name nest</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">        Match kube.*</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">        Operation nest</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">        Wildcard tags.*</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">        Nested_under tags</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">        Remove_prefix tags.</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    </span><span class="token punctuation" style="color:#393A34">[</span><span class="token plain">OUTPUT</span><span class="token punctuation" style="color:#393A34">]</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">        Name            es</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">        Match           kube.*</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">        Index           fluent</span><span class="token punctuation" style="color:#393A34">-</span><span class="token plain">bit</span><span class="token punctuation" style="color:#393A34">-</span><span class="token plain">kube</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">        Host            elasticsearch</span><span class="token punctuation" style="color:#393A34">-</span><span class="token plain">master</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">        Port            9200</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">        HTTP_User       $</span><span class="token punctuation" style="color:#393A34">{</span><span class="token plain">ES_USER</span><span class="token punctuation" style="color:#393A34">}</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">        HTTP_Passwd     $</span><span class="token punctuation" style="color:#393A34">{</span><span class="token plain">ES_PASSWORD</span><span class="token punctuation" style="color:#393A34">}</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">        Logstash_Format Off</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">        Time_Key       @timestamp</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">        Type            flb_type</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">        Replace_Dots    On</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">        Retry_Limit     False</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">        Trace_Error     Off</span><br></span></code></pre><div class="buttonGroup__atx"><button type="button" aria-label="Copy code to clipboard" title="Copy" class="clean-btn"><span class="copyButtonIcons_eSgA" aria-hidden="true"><svg viewBox="0 0 24 24" class="copyButtonIcon_y97N"><path fill="currentColor" d="M19,21H8V7H19M19,5H8A2,2 0 0,0 6,7V21A2,2 0 0,0 8,23H19A2,2 0 0,0 21,21V7A2,2 0 0,0 19,5M16,1H4A2,2 0 0,0 2,3V17H4V3H16V1Z"></path></svg><svg viewBox="0 0 24 24" class="copyButtonSuccessIcon_LjdS"><path fill="currentColor" d="M21,7L9,19L3.5,13.5L4.91,12.09L9,16.17L19.59,5.59L21,7Z"></path></svg></span></button></div></div></div></div></div></details>
</li>
<li>
<p>Create index pattern (Data View starting from Kibana v8.0):</p>
<p>Go to <strong>Management</strong> -&gt; <strong>Stack Management</strong> -&gt; <strong>Kibana</strong> -&gt; <strong>Index patterns</strong> and create an index with the <code>fluent-bit-kube-*</code> pattern:</p>
<p><img decoding="async" loading="lazy" alt="Index Pattern" src="/assets/images/elk-stack01-f1112174a679f45bcbb967f9497b9274.png" title="Index Pattern" width="1435" height="784" class="img_ev3q"></p>
</li>
<li>
<p>Check logs in Kibana. Navigate to <strong>Analytics</strong> -&gt; <strong>Discover</strong>:</p>
<p><img decoding="async" loading="lazy" alt="Logs in Kibana" src="/assets/images/elk-stack02-d7c9ce2c0cb18b55c972f0fcff0a13ca.png" title="Logs in Kibana" width="1919" height="898" class="img_ev3q"></p>
<div class="theme-admonition theme-admonition-note admonition_xJq3 alert alert--secondary"><div class="admonitionHeading_Gvgb"><span class="admonitionIcon_Rf37"><svg viewBox="0 0 14 16"><path fill-rule="evenodd" d="M6.3 5.69a.942.942 0 0 1-.28-.7c0-.28.09-.52.28-.7.19-.18.42-.28.7-.28.28 0 .52.09.7.28.18.19.28.42.28.7 0 .28-.09.52-.28.7a1 1 0 0 1-.7.3c-.28 0-.52-.11-.7-.3zM8 7.99c-.02-.25-.11-.48-.31-.69-.2-.19-.42-.3-.69-.31H6c-.27.02-.48.13-.69.31-.2.2-.3.44-.31.69h1v3c.02.27.11.5.31.69.2.2.42.31.69.31h1c.27 0 .48-.11.69-.31.2-.19.3-.42.31-.69H8V7.98v.01zM7 2.3c-3.14 0-5.7 2.54-5.7 5.68 0 3.14 2.56 5.7 5.7 5.7s5.7-2.55 5.7-5.7c0-3.15-2.56-5.69-5.7-5.69v.01zM7 .98c3.86 0 7 3.14 7 7s-3.14 7-7 7-7-3.12-7-7 3.14-7 7-7z"></path></svg></span>note</div><div class="admonitionContent_BuS1"><p>In addition, in the top-right corner of the <code>Discover</code> window, there is a button called <code>Inspect</code>. Clicking on it will reveal the query that Kibana is sending to Elasticsearch. These queries can be used in Dev Tools.</p></div></div>
</li>
<li>
<p>Monitor the created indices:</p>
<div class="language-bash codeBlockContainer_Ckt0 theme-code-block" style="--prism-color:#393A34;--prism-background-color:#f6f8fa"><div class="codeBlockContent_biex"><pre tabindex="0" class="prism-code language-bash codeBlock_bY9V thin-scrollbar" style="color:#393A34;background-color:#f6f8fa"><code class="codeBlockLines_e6Vv"><span class="token-line" style="color:#393A34"><span class="token plain">GET _cat/indices/fluent-bit-kube-*</span><br></span></code></pre><div class="buttonGroup__atx"><button type="button" aria-label="Copy code to clipboard" title="Copy" class="clean-btn"><span class="copyButtonIcons_eSgA" aria-hidden="true"><svg viewBox="0 0 24 24" class="copyButtonIcon_y97N"><path fill="currentColor" d="M19,21H8V7H19M19,5H8A2,2 0 0,0 6,7V21A2,2 0 0,0 8,23H19A2,2 0 0,0 21,21V7A2,2 0 0,0 19,5M16,1H4A2,2 0 0,0 2,3V17H4V3H16V1Z"></path></svg><svg viewBox="0 0 24 24" class="copyButtonSuccessIcon_LjdS"><path fill="currentColor" d="M21,7L9,19L3.5,13.5L4.91,12.09L9,16.17L19.59,5.59L21,7Z"></path></svg></span></button></div></div></div>
<div class="theme-admonition theme-admonition-note admonition_xJq3 alert alert--secondary"><div class="admonitionHeading_Gvgb"><span class="admonitionIcon_Rf37"><svg viewBox="0 0 14 16"><path fill-rule="evenodd" d="M6.3 5.69a.942.942 0 0 1-.28-.7c0-.28.09-.52.28-.7.19-.18.42-.28.7-.28.28 0 .52.09.7.28.18.19.28.42.28.7 0 .28-.09.52-.28.7a1 1 0 0 1-.7.3c-.28 0-.52-.11-.7-.3zM8 7.99c-.02-.25-.11-.48-.31-.69-.2-.19-.42-.3-.69-.31H6c-.27.02-.48.13-.69.31-.2.2-.3.44-.31.69h1v3c.02.27.11.5.31.69.2.2.42.31.69.31h1c.27 0 .48-.11.69-.31.2-.19.3-.42.31-.69H8V7.98v.01zM7 2.3c-3.14 0-5.7 2.54-5.7 5.68 0 3.14 2.56 5.7 5.7 5.7s5.7-2.55 5.7-5.7c0-3.15-2.56-5.69-5.7-5.69v.01zM7 .98c3.86 0 7 3.14 7 7s-3.14 7-7 7-7-3.12-7-7 3.14-7 7-7z"></path></svg></span>note</div><div class="admonitionContent_BuS1"><p>Physically, the indices are located on the <code>elasticsearch</code> Kubernetes pod in <code>/usr/share/elasticsearch/data/nodes/0/indices</code>. It is recommended to backup indices only via <a href="https://www.elastic.co/guide/en/elasticsearch/reference/current/snapshot-restore.html" target="_blank" rel="noopener noreferrer">Snapshots</a>.</p></div></div>
<p>We&#x27;ve configured the index rollover process. Now the index will be rolled over to a new one once it reaches the indicated size or time in the policy, and old indices will be removed according to the policy as well.</p>
<p>When you create an empty index that corresponds to the pattern indicated in the index template, the index template attaches <code>rollover_alias</code> with the <code>fluent-bit-kube</code> name, policy and other configured data. Then the Fluent Bit Elasticsearch output plugin sends logs to the <code>Index fluent-bit-kube</code> rollover alias. The index rollover process is managed by ILM that increments our indices united by the <code>rollover_alias</code> and distributes the log data to the latest index.</p>
</li>
</ol>
<h3 class="anchor anchorWithStickyNavbar_LWe7" id="ilm-without-rollover-policy">ILM Without Rollover Policy<a href="#ilm-without-rollover-policy" class="hash-link" aria-label="Direct link to ILM Without Rollover Policy" title="Direct link to ILM Without Rollover Policy">â€‹</a></h3>
<p>It is also possible to manage index lifecycle without rollover indicated in the policy. If this is the case, this section will explain how to refactor the index to make it look that way: <code>fluent-bit-kube-2023.03.18</code>.</p>
<div class="theme-admonition theme-admonition-note admonition_xJq3 alert alert--secondary"><div class="admonitionHeading_Gvgb"><span class="admonitionIcon_Rf37"><svg viewBox="0 0 14 16"><path fill-rule="evenodd" d="M6.3 5.69a.942.942 0 0 1-.28-.7c0-.28.09-.52.28-.7.19-.18.42-.28.7-.28.28 0 .52.09.7.28.18.19.28.42.28.7 0 .28-.09.52-.28.7a1 1 0 0 1-.7.3c-.28 0-.52-.11-.7-.3zM8 7.99c-.02-.25-.11-.48-.31-.69-.2-.19-.42-.3-.69-.31H6c-.27.02-.48.13-.69.31-.2.2-.3.44-.31.69h1v3c.02.27.11.5.31.69.2.2.42.31.69.31h1c.27 0 .48-.11.69-.31.2-.19.3-.42.31-.69H8V7.98v.01zM7 2.3c-3.14 0-5.7 2.54-5.7 5.68 0 3.14 2.56 5.7 5.7 5.7s5.7-2.55 5.7-5.7c0-3.15-2.56-5.69-5.7-5.69v.01zM7 .98c3.86 0 7 3.14 7 7s-3.14 7-7 7-7-3.12-7-7 3.14-7 7-7z"></path></svg></span>note</div><div class="admonitionContent_BuS1"><p>The main drawback of this method is that the indices can be managed only by their creation date.</p></div></div>
<p>To manage index lifecycle without rollover policy, follow the steps below:</p>
<ol>
<li>
<p>Create a Policy without <code>rollover</code> but with indices deletion:</p>
<details class="details_lb9f alert alert--info details_b_Ee" data-collapsed="true"><summary><b>Index Lifecycle Policy</b></summary><div><div class="collapsibleContent_i85q"><div class="language-json codeBlockContainer_Ckt0 theme-code-block" style="--prism-color:#393A34;--prism-background-color:#f6f8fa"><div class="codeBlockContent_biex"><pre tabindex="0" class="prism-code language-json codeBlock_bY9V thin-scrollbar" style="color:#393A34;background-color:#f6f8fa"><code class="codeBlockLines_e6Vv"><span class="token-line" style="color:#393A34"><span class="token plain">PUT _ilm/policy/fluent-bit-policy</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain"></span><span class="token punctuation" style="color:#393A34">{</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">  </span><span class="token property" style="color:#36acaa">&quot;policy&quot;</span><span class="token operator" style="color:#393A34">:</span><span class="token plain"> </span><span class="token punctuation" style="color:#393A34">{</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    </span><span class="token property" style="color:#36acaa">&quot;phases&quot;</span><span class="token operator" style="color:#393A34">:</span><span class="token plain"> </span><span class="token punctuation" style="color:#393A34">{</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">      </span><span class="token property" style="color:#36acaa">&quot;hot&quot;</span><span class="token operator" style="color:#393A34">:</span><span class="token plain"> </span><span class="token punctuation" style="color:#393A34">{</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">        </span><span class="token property" style="color:#36acaa">&quot;min_age&quot;</span><span class="token operator" style="color:#393A34">:</span><span class="token plain"> </span><span class="token string" style="color:#e3116c">&quot;0ms&quot;</span><span class="token punctuation" style="color:#393A34">,</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">        </span><span class="token property" style="color:#36acaa">&quot;actions&quot;</span><span class="token operator" style="color:#393A34">:</span><span class="token plain"> </span><span class="token punctuation" style="color:#393A34">{</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">          </span><span class="token property" style="color:#36acaa">&quot;set_priority&quot;</span><span class="token operator" style="color:#393A34">:</span><span class="token plain"> </span><span class="token punctuation" style="color:#393A34">{</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">            </span><span class="token property" style="color:#36acaa">&quot;priority&quot;</span><span class="token operator" style="color:#393A34">:</span><span class="token plain"> </span><span class="token number" style="color:#36acaa">100</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">          </span><span class="token punctuation" style="color:#393A34">}</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">        </span><span class="token punctuation" style="color:#393A34">}</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">      </span><span class="token punctuation" style="color:#393A34">}</span><span class="token punctuation" style="color:#393A34">,</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">      </span><span class="token property" style="color:#36acaa">&quot;delete&quot;</span><span class="token operator" style="color:#393A34">:</span><span class="token plain"> </span><span class="token punctuation" style="color:#393A34">{</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">        </span><span class="token property" style="color:#36acaa">&quot;min_age&quot;</span><span class="token operator" style="color:#393A34">:</span><span class="token plain"> </span><span class="token string" style="color:#e3116c">&quot;7d&quot;</span><span class="token punctuation" style="color:#393A34">,</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">        </span><span class="token property" style="color:#36acaa">&quot;actions&quot;</span><span class="token operator" style="color:#393A34">:</span><span class="token plain"> </span><span class="token punctuation" style="color:#393A34">{</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">          </span><span class="token property" style="color:#36acaa">&quot;delete&quot;</span><span class="token operator" style="color:#393A34">:</span><span class="token plain"> </span><span class="token punctuation" style="color:#393A34">{</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">            </span><span class="token property" style="color:#36acaa">&quot;delete_searchable_snapshot&quot;</span><span class="token operator" style="color:#393A34">:</span><span class="token plain"> </span><span class="token boolean" style="color:#36acaa">true</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">          </span><span class="token punctuation" style="color:#393A34">}</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">        </span><span class="token punctuation" style="color:#393A34">}</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">      </span><span class="token punctuation" style="color:#393A34">}</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    </span><span class="token punctuation" style="color:#393A34">}</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">  </span><span class="token punctuation" style="color:#393A34">}</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain"></span><span class="token punctuation" style="color:#393A34">}</span><br></span></code></pre><div class="buttonGroup__atx"><button type="button" aria-label="Copy code to clipboard" title="Copy" class="clean-btn"><span class="copyButtonIcons_eSgA" aria-hidden="true"><svg viewBox="0 0 24 24" class="copyButtonIcon_y97N"><path fill="currentColor" d="M19,21H8V7H19M19,5H8A2,2 0 0,0 6,7V21A2,2 0 0,0 8,23H19A2,2 0 0,0 21,21V7A2,2 0 0,0 19,5M16,1H4A2,2 0 0,0 2,3V17H4V3H16V1Z"></path></svg><svg viewBox="0 0 24 24" class="copyButtonSuccessIcon_LjdS"><path fill="currentColor" d="M21,7L9,19L3.5,13.5L4.91,12.09L9,16.17L19.59,5.59L21,7Z"></path></svg></span></button></div></div></div></div></div></details>
</li>
<li>
<p>Create an index template with the <code>rollover_alias</code> parameter:</p>
<details class="details_lb9f alert alert--info details_b_Ee" data-collapsed="true"><summary><b>Index Template</b></summary><div><div class="collapsibleContent_i85q"><div class="language-json codeBlockContainer_Ckt0 theme-code-block" style="--prism-color:#393A34;--prism-background-color:#f6f8fa"><div class="codeBlockContent_biex"><pre tabindex="0" class="prism-code language-json codeBlock_bY9V thin-scrollbar" style="color:#393A34;background-color:#f6f8fa"><code class="codeBlockLines_e6Vv"><span class="token-line" style="color:#393A34"><span class="token plain">PUT /_index_template/fluent-bit</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain"></span><span class="token punctuation" style="color:#393A34">{</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">  </span><span class="token property" style="color:#36acaa">&quot;index_patterns&quot;</span><span class="token operator" style="color:#393A34">:</span><span class="token plain"> </span><span class="token punctuation" style="color:#393A34">[</span><span class="token string" style="color:#e3116c">&quot;fluent-bit-kube-*&quot;</span><span class="token punctuation" style="color:#393A34">]</span><span class="token punctuation" style="color:#393A34">,</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">  </span><span class="token property" style="color:#36acaa">&quot;template&quot;</span><span class="token operator" style="color:#393A34">:</span><span class="token plain"> </span><span class="token punctuation" style="color:#393A34">{</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    </span><span class="token property" style="color:#36acaa">&quot;settings&quot;</span><span class="token operator" style="color:#393A34">:</span><span class="token plain"> </span><span class="token punctuation" style="color:#393A34">{</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">      </span><span class="token property" style="color:#36acaa">&quot;index&quot;</span><span class="token operator" style="color:#393A34">:</span><span class="token plain"> </span><span class="token punctuation" style="color:#393A34">{</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">        </span><span class="token property" style="color:#36acaa">&quot;lifecycle&quot;</span><span class="token operator" style="color:#393A34">:</span><span class="token plain"> </span><span class="token punctuation" style="color:#393A34">{</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">          </span><span class="token property" style="color:#36acaa">&quot;name&quot;</span><span class="token operator" style="color:#393A34">:</span><span class="token plain"> </span><span class="token string" style="color:#e3116c">&quot;fluent-bit-policy&quot;</span><span class="token punctuation" style="color:#393A34">,</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">          </span><span class="token property" style="color:#36acaa">&quot;rollover_alias&quot;</span><span class="token operator" style="color:#393A34">:</span><span class="token plain"> </span><span class="token string" style="color:#e3116c">&quot;fluent-bit-kube&quot;</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">        </span><span class="token punctuation" style="color:#393A34">}</span><span class="token punctuation" style="color:#393A34">,</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">        </span><span class="token property" style="color:#36acaa">&quot;number_of_shards&quot;</span><span class="token operator" style="color:#393A34">:</span><span class="token plain"> </span><span class="token string" style="color:#e3116c">&quot;1&quot;</span><span class="token punctuation" style="color:#393A34">,</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">        </span><span class="token property" style="color:#36acaa">&quot;number_of_replicas&quot;</span><span class="token operator" style="color:#393A34">:</span><span class="token plain"> </span><span class="token string" style="color:#e3116c">&quot;0&quot;</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">      </span><span class="token punctuation" style="color:#393A34">}</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    </span><span class="token punctuation" style="color:#393A34">}</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">  </span><span class="token punctuation" style="color:#393A34">}</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain"></span><span class="token punctuation" style="color:#393A34">}</span><br></span></code></pre><div class="buttonGroup__atx"><button type="button" aria-label="Copy code to clipboard" title="Copy" class="clean-btn"><span class="copyButtonIcons_eSgA" aria-hidden="true"><svg viewBox="0 0 24 24" class="copyButtonIcon_y97N"><path fill="currentColor" d="M19,21H8V7H19M19,5H8A2,2 0 0,0 6,7V21A2,2 0 0,0 8,23H19A2,2 0 0,0 21,21V7A2,2 0 0,0 19,5M16,1H4A2,2 0 0,0 2,3V17H4V3H16V1Z"></path></svg><svg viewBox="0 0 24 24" class="copyButtonSuccessIcon_LjdS"><path fill="currentColor" d="M21,7L9,19L3.5,13.5L4.91,12.09L9,16.17L19.59,5.59L21,7Z"></path></svg></span></button></div></div></div></div></div></details>
</li>
<li>
<p>Change the Fluent Bit <code>[OUTPUT]</code> config to this one:</p>
<details class="details_lb9f alert alert--info details_b_Ee" data-collapsed="true"><summary><b>ConfigMap fluent-bit</b></summary><div><div class="collapsibleContent_i85q"><div class="language-yaml codeBlockContainer_Ckt0 theme-code-block" style="--prism-color:#393A34;--prism-background-color:#f6f8fa"><div class="codeBlockContent_biex"><pre tabindex="0" class="prism-code language-yaml codeBlock_bY9V thin-scrollbar" style="color:#393A34;background-color:#f6f8fa"><code class="codeBlockLines_e6Vv"><span class="token-line" style="color:#393A34"><span class="token punctuation" style="color:#393A34">[</span><span class="token plain">OUTPUT</span><span class="token punctuation" style="color:#393A34">]</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    Name            es</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    Match           kube.*</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    Host            elasticsearch</span><span class="token punctuation" style="color:#393A34">-</span><span class="token plain">master</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    Port            9200</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    HTTP_User       $</span><span class="token punctuation" style="color:#393A34">{</span><span class="token plain">ES_USER</span><span class="token punctuation" style="color:#393A34">}</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    HTTP_Passwd     $</span><span class="token punctuation" style="color:#393A34">{</span><span class="token plain">ES_PASSWORD</span><span class="token punctuation" style="color:#393A34">}</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    Logstash_Format On</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    Logstash_Prefix fluent</span><span class="token punctuation" style="color:#393A34">-</span><span class="token plain">bit</span><span class="token punctuation" style="color:#393A34">-</span><span class="token plain">kube</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    Logstash_DateFormat %Y.%m.%d</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    Time_Key        @timestamp</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    Type            flb_type</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    Replace_Dots    On</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    Retry_Limit     False</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    Trace_Error     On</span><br></span></code></pre><div class="buttonGroup__atx"><button type="button" aria-label="Copy code to clipboard" title="Copy" class="clean-btn"><span class="copyButtonIcons_eSgA" aria-hidden="true"><svg viewBox="0 0 24 24" class="copyButtonIcon_y97N"><path fill="currentColor" d="M19,21H8V7H19M19,5H8A2,2 0 0,0 6,7V21A2,2 0 0,0 8,23H19A2,2 0 0,0 21,21V7A2,2 0 0,0 19,5M16,1H4A2,2 0 0,0 2,3V17H4V3H16V1Z"></path></svg><svg viewBox="0 0 24 24" class="copyButtonSuccessIcon_LjdS"><path fill="currentColor" d="M21,7L9,19L3.5,13.5L4.91,12.09L9,16.17L19.59,5.59L21,7Z"></path></svg></span></button></div></div></div></div></div></details>
</li>
<li>
<p>Restart Fluent Bit pods.</p>
</li>
</ol>
<p>Fluent Bit will be producing a new index every day with the new date in its name like in the <code>fluent-bit-kube-2023.03.18</code> name. Index deleting will be performed according to the policy.</p>
<h3 class="anchor anchorWithStickyNavbar_LWe7" id="tips-on-fluent-bit-debugging">Tips on Fluent Bit Debugging<a href="#tips-on-fluent-bit-debugging" class="hash-link" aria-label="Direct link to Tips on Fluent Bit Debugging" title="Direct link to Tips on Fluent Bit Debugging">â€‹</a></h3>
<p>If you experience a lot of difficulties when dealing with Fluent Bit, this section may help you.<br></p>
<p>Fluent Bit has docker images labelled <code>-debug</code>, e.g., <code>cr.fluentbit.io/fluent/fluent-bit:2.0.9-debug</code>.</p>
<p>Change that image in the Kubernetes Fluent Bit DaemonSet and add the <code>Trace_Error On</code> parameter to the <code>[OUTPUT]</code> section in the Fluent Bit configmap:</p>
<div class="language-yaml codeBlockContainer_Ckt0 theme-code-block" style="--prism-color:#393A34;--prism-background-color:#f6f8fa"><div class="codeBlockContent_biex"><pre tabindex="0" class="prism-code language-yaml codeBlock_bY9V thin-scrollbar" style="color:#393A34;background-color:#f6f8fa"><code class="codeBlockLines_e6Vv"><span class="token-line" style="color:#393A34"><span class="token punctuation" style="color:#393A34">[</span><span class="token plain">OUTPUT</span><span class="token punctuation" style="color:#393A34">]</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">  Trace_Error On</span><br></span></code></pre><div class="buttonGroup__atx"><button type="button" aria-label="Copy code to clipboard" title="Copy" class="clean-btn"><span class="copyButtonIcons_eSgA" aria-hidden="true"><svg viewBox="0 0 24 24" class="copyButtonIcon_y97N"><path fill="currentColor" d="M19,21H8V7H19M19,5H8A2,2 0 0,0 6,7V21A2,2 0 0,0 8,23H19A2,2 0 0,0 21,21V7A2,2 0 0,0 19,5M16,1H4A2,2 0 0,0 2,3V17H4V3H16V1Z"></path></svg><svg viewBox="0 0 24 24" class="copyButtonSuccessIcon_LjdS"><path fill="currentColor" d="M21,7L9,19L3.5,13.5L4.91,12.09L9,16.17L19.59,5.59L21,7Z"></path></svg></span></button></div></div></div>
<p>After adding the parameter above, you will start seeing more informative logs that will probably help you find out the reason of the problem.</p>
<h3 class="anchor anchorWithStickyNavbar_LWe7" id="related-articles">Related Articles<a href="#related-articles" class="hash-link" aria-label="Direct link to Related Articles" title="Direct link to Related Articles">â€‹</a></h3>
<ul>
<li><a href="https://www.elastic.co/guide/en/elasticsearch/reference/current/getting-started-index-lifecycle-management.html" target="_blank" rel="noopener noreferrer">Index Lifecycle Management</a></li>
<li><a href="https://docs.fluentbit.io/manual/pipeline/outputs/elasticsearch" target="_blank" rel="noopener noreferrer">Elasticsearch Output</a></li>
</ul></div><footer class="theme-doc-footer docusaurus-mt-lg"><div class="row margin-top--sm theme-doc-footer-edit-meta-row"><div class="col"><a href="https://github.com/KubeRocketCI/docs/edit/main/docs/operator-guide/monitoring-and-observability/kibana-ilm-rollover.md" target="_blank" rel="noopener noreferrer" class="theme-edit-this-page"><svg fill="currentColor" height="20" width="20" viewBox="0 0 40 40" class="iconEdit_Z9Sw" aria-hidden="true"><g><path d="m34.5 11.7l-3 3.1-6.3-6.3 3.1-3q0.5-0.5 1.2-0.5t1.1 0.5l3.9 3.9q0.5 0.4 0.5 1.1t-0.5 1.2z m-29.5 17.1l18.4-18.5 6.3 6.3-18.4 18.4h-6.3v-6.2z"></path></g></svg>Edit this page</a></div><div class="col lastUpdated_JAkA"><span class="theme-last-updated">Last updated<!-- --> on <b><time datetime="2025-03-01T16:50:12.000Z" itemprop="dateModified">Mar 1, 2025</time></b> by <b>Sergiy Kulanov</b></span></div></div></footer></article><nav class="pagination-nav docusaurus-mt-lg" aria-label="Docs pages"><a class="pagination-nav__link pagination-nav__link--prev" href="/docs/operator-guide/monitoring-and-observability/multitenant-logging"><div class="pagination-nav__sublabel">Previous</div><div class="pagination-nav__label">Multitenant Logging</div></a><a class="pagination-nav__link pagination-nav__link--next" href="/docs/operator-guide/ci/tekton-overview"><div class="pagination-nav__sublabel">Next</div><div class="pagination-nav__label">Tekton Overview</div></a></nav></div></div><div class="col col--3"><div class="tableOfContents_bqdL thin-scrollbar theme-doc-toc-desktop"><ul class="table-of-contents table-of-contents__left-border"><li><a href="#overview-of-the-elk-stack" class="table-of-contents__link toc-highlight">Overview of the ELK Stack</a><ul><li><a href="#efk-stack-overview" class="table-of-contents__link toc-highlight">EFK Stack Overview</a></li><li><a href="#automate-elasticsearch-index-rollover-with-ilm" class="table-of-contents__link toc-highlight">Automate Elasticsearch Index Rollover With ILM</a></li><li><a href="#ilm-without-rollover-policy" class="table-of-contents__link toc-highlight">ILM Without Rollover Policy</a></li><li><a href="#tips-on-fluent-bit-debugging" class="table-of-contents__link toc-highlight">Tips on Fluent Bit Debugging</a></li><li><a href="#related-articles" class="table-of-contents__link toc-highlight">Related Articles</a></li></ul></li></ul></div></div></div></div></main></div></div></div><footer class="footer footer--dark"><div class="container container-fluid"><div class="row footer__links"><div class="col footer__col"><div class="footer__title">Readings</div><ul class="footer__items clean-list"><li class="footer__item"><a class="footer__link-item" href="/docs/about-platform">What is KubeRocketCI</a></li><li class="footer__item"><a class="footer__link-item" href="/blog">Blogs: Interesting Facts From The DevSecOps Life</a></li><li class="footer__item"><a class="footer__link-item" href="/docs/user-guide">User Guide: How To Use KubeRocketCI</a></li><li class="footer__item"><a class="footer__link-item" href="/docs/developer-guide">Developer Guide: How We Build KubeRocketCI</a></li><li class="footer__item"><a class="footer__link-item" href="/docs/api/overview">API Reference: Use KubeRocketCI To Build Your Solutions</a></li></ul></div><div class="col footer__col"><div class="footer__title">Our Community</div><ul class="footer__items clean-list"><li class="footer__item"><a href="https://www.youtube.com/@theplatformteam" target="_blank" rel="noopener noreferrer" class="footer__link-item">YouTube<svg width="13.5" height="13.5" aria-hidden="true" viewBox="0 0 24 24" class="iconExternalLink_nPIU"><path fill="currentColor" d="M21 13v10h-21v-19h12v2h-10v15h17v-8h2zm3-12h-10.988l4.035 4-6.977 7.07 2.828 2.828 6.977-7.07 4.125 4.172v-11z"></path></svg></a></li><li class="footer__item"><a href="https://medium.com/kuberocketci" target="_blank" rel="noopener noreferrer" class="footer__link-item">Medium<svg width="13.5" height="13.5" aria-hidden="true" viewBox="0 0 24 24" class="iconExternalLink_nPIU"><path fill="currentColor" d="M21 13v10h-21v-19h12v2h-10v15h17v-8h2zm3-12h-10.988l4.035 4-6.977 7.07 2.828 2.828 6.977-7.07 4.125 4.172v-11z"></path></svg></a></li></ul></div><div class="col footer__col"><div class="footer__title">Learn More</div><ul class="footer__items clean-list"><li class="footer__item"><a href="https://github.com/kuberocketci/docs" target="_blank" rel="noopener noreferrer" class="footer__link-item">KubeRocketCI on the GitHub<svg width="13.5" height="13.5" aria-hidden="true" viewBox="0 0 24 24" class="iconExternalLink_nPIU"><path fill="currentColor" d="M21 13v10h-21v-19h12v2h-10v15h17v-8h2zm3-12h-10.988l4.035 4-6.977 7.07 2.828 2.828 6.977-7.07 4.125 4.172v-11z"></path></svg></a></li><li class="footer__item"><a href="https://artifacthub.io/packages/search?repo=epmdedp" target="_blank" rel="noopener noreferrer" class="footer__link-item">KubeRocketCI on the ArtifactHub<svg width="13.5" height="13.5" aria-hidden="true" viewBox="0 0 24 24" class="iconExternalLink_nPIU"><path fill="currentColor" d="M21 13v10h-21v-19h12v2h-10v15h17v-8h2zm3-12h-10.988l4.035 4-6.977 7.07 2.828 2.828 6.977-7.07 4.125 4.172v-11z"></path></svg></a></li><li class="footer__item"><a href="https://operatorhub.io/?keyword=edp" target="_blank" rel="noopener noreferrer" class="footer__link-item">KubeRocketCI on the OperatorHub<svg width="13.5" height="13.5" aria-hidden="true" viewBox="0 0 24 24" class="iconExternalLink_nPIU"><path fill="currentColor" d="M21 13v10h-21v-19h12v2h-10v15h17v-8h2zm3-12h-10.988l4.035 4-6.977 7.07 2.828 2.828 6.977-7.07 4.125 4.172v-11z"></path></svg></a></li><li class="footer__item"><a href="https://hub.docker.com/u/epamedp" target="_blank" rel="noopener noreferrer" class="footer__link-item">Docker Hub<svg width="13.5" height="13.5" aria-hidden="true" viewBox="0 0 24 24" class="iconExternalLink_nPIU"><path fill="currentColor" d="M21 13v10h-21v-19h12v2h-10v15h17v-8h2zm3-12h-10.988l4.035 4-6.977 7.07 2.828 2.828 6.977-7.07 4.125 4.172v-11z"></path></svg></a></li><li class="footer__item"><a class="footer__link-item" href="/blog/tags">Blog categories</a></li><li class="footer__item"><a href="https://docs.kuberocketci.io/blog/rss.xml" target="_blank" rel="noopener noreferrer" class="footer__link-item">RSS feed<svg width="13.5" height="13.5" aria-hidden="true" viewBox="0 0 24 24" class="iconExternalLink_nPIU"><path fill="currentColor" d="M21 13v10h-21v-19h12v2h-10v15h17v-8h2zm3-12h-10.988l4.035 4-6.977 7.07 2.828 2.828 6.977-7.07 4.125 4.172v-11z"></path></svg></a></li><li class="footer__item"><a href="https://docs.kuberocketci.io/blog/atom.xml" target="_blank" rel="noopener noreferrer" class="footer__link-item">Atom feed<svg width="13.5" height="13.5" aria-hidden="true" viewBox="0 0 24 24" class="iconExternalLink_nPIU"><path fill="currentColor" d="M21 13v10h-21v-19h12v2h-10v15h17v-8h2zm3-12h-10.988l4.035 4-6.977 7.07 2.828 2.828 6.977-7.07 4.125 4.172v-11z"></path></svg></a></li></ul></div></div><div class="footer__bottom text--center"><div class="footer__copyright">Copyright Â© 2025 KubeRocketCI. Built with Docusaurus.</div></div></div></footer></div>
</body>
</html>